/*!
 * Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 * 
 * billboard.js, JavaScript chart library
 * https://naver.github.io/billboard.js/
 * 
 * @version 2.0.0-alpha
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3-time-format"),require("d3-selection"),require("d3-brush"),require("d3-axis"),require("d3-scale"),require("d3-dsv"),require("d3-drag"),require("d3-transition"));else if("function"==typeof define&&define.amd)define(["d3-time-format","d3-selection","d3-brush","d3-axis","d3-scale","d3-dsv","d3-drag","d3-transition"],e);else{var i="object"==typeof exports?e(require("d3-time-format"),require("d3-selection"),require("d3-brush"),require("d3-axis"),require("d3-scale"),require("d3-dsv"),require("d3-drag"),require("d3-transition")):e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3);for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,(function(t,e,i,n,a,r,s,o){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){i(1),t.exports=i(10)},function(t,e,i){},function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e){t.exports=i},function(t,e){t.exports=n},function(t,e){t.exports=a},function(t,e){t.exports=r},function(t,e){t.exports=s},function(t,e){t.exports=o},function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.r(e),i.d(e,"bb",(function(){return de})),i.d(e,"default",(function(){return de}));var a,r=i(2),s=i(3),o={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",area:"bb-area",areas:"bb-areas",axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",bar:"bb-bar",bars:"bb-bars",brush:"bb-brush",button:"bb-button",buttonZoomReset:"bb-zoom-reset",chart:"bb-chart",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsTitle:"bb-chart-arcs-title",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",chartCircles:"bb-chart-circles",chartLine:"bb-chart-line",chartLines:"bb-chart-lines",chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars",chartText:"bb-chart-text",chartTexts:"bb-chart-texts",circle:"bb-circle",circles:"bb-circles",colorPattern:"bb-color-pattern",colorScale:"bb-colorscale",defocused:"bb-defocused",dragarea:"bb-dragarea",empty:"bb-empty",eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single",focused:"bb-focused",gaugeValue:"bb-gauge-value",grid:"bb-grid",gridLines:"bb-grid-lines",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemFocused:"bb-legend-item-focused",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile",level:"bb-level",levels:"bb-levels",line:"bb-line",lines:"bb-lines",region:"bb-region",regions:"bb-regions",selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",shape:"bb-shape",shapes:"bb-shapes",stanfordElements:"bb-stanford-elements",stanfordLine:"bb-stanford-line",stanfordLines:"bb-stanford-lines",stanfordRegion:"bb-stanford-region",stanfordRegions:"bb-stanford-regions",target:"bb-target",text:"bb-text",texts:"bb-texts",title:"bb-title",tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name",xgrid:"bb-xgrid",xgridFocus:"bb-xgrid-focus",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridFocus:"bb-ygrid-focus",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids",zoomBrush:"bb-zoom-brush",zoomRect:"bb-zoom-rect",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_",TextOverlapping:"text-overlapping"},c={element:function(){return{chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null}},state:function(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,current:{width:0,height:0,dataMax:0,maxTickWidths:{x:{size:0,ticks:[],clipPath:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},types:[]},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,resizing:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}},l=function(){function t(){var t=this;Object.keys(c).forEach((function(e){t[e]=new c[e]}))}return t.prototype.getStore=function(t){return this[t]},t}(),u={data_idConverter:function(t){return t},data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},d={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},h={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},g={legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:void 0,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_usePoint:!1},f={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},x={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_onshown:function(){},tooltip_onhidden:function(){},tooltip_order:null},p={data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_groups:[],data_axes:{},data_labels:{},data_labels_colors:void 0,data_labels_position:{},data_regions:{},data_stack_normalize:!1},_={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:function(){},data_onunselected:function(){}},v={axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]},m={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},b={axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]},y=i(4),T=(a=function(t){return void 0!==t&&t})(self)||a(window)||a(global)||a(globalThis)||Function("return this")(),w=T&&T.document,A=function(t){return t||0===t},k=function(t){return"function"==typeof t},L=function(t){return"string"==typeof t},S=function(t){return"number"==typeof t},O=function(t){return void 0===t},I=function(t){return void 0!==t},C=function(t){return 10*Math.ceil(t/10)},E=function(t){return Math.ceil(t)+.5},X=function(t){return"object"==typeof t},R=function(t){return O(t)||null===t||L(t)&&0===t.length||X(t)&&!(t instanceof Date)&&0===Object.keys(t).length||S(t)&&isNaN(t)},D=function(t){return!R(t)},z=function(t){return Array.isArray(t)},P=function(t){return t&&!t.nodeType&&X(t)&&!z(t)};function M(t,e,i){return I(t[e])?t[e]:i}function F(t){for(var e=k(t),i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return e&&t.call.apply(t,n),e}function B(t,e){var i=0;t.each((function(){return++i})).on("end",(function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];--i||e.apply.apply(e,[this].concat(n))}))}function N(t){return L(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function Y(t){var e,i=t.$el,n=s.event,a=i.subchart.main||i.main;return n&&"brush"===n.type?e=n.selection:a&&(e=a.select("."+o.brush).node())&&(e=Object(y.brushSelection)(e)),e}var $=function(t){return t.rect||(t.rect=t.getBoundingClientRect())};function V(t,e){for(var i in void 0===t&&(t={}),z(e)&&e.forEach((function(e){return V(t,e)})),e)/^\d+$/.test(i)||(t[i]=e[i]);return t}var j=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},H=function(t){return[].slice.call(t)};var W=function(t){var e=t?t.transform:null,i=e&&e.baseVal;return i&&i.numberOfItems?i.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}};function U(t){var e=t[0]instanceof Date,i=(e?t.map(Number):t).filter((function(t,e,i){return i.indexOf(t)===e}));return e?i.map((function(t){return new Date(t)})):i}function G(t){return t&&t.length?t.reduce((function(t,e){return t.concat(e)})):[]}function q(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];if(!i.length||1===i.length&&!i[0])return t;var a=i.shift();return P(t)&&P(a)&&Object.keys(a).forEach((function(e){var i=a[e];P(i)?(!t[e]&&(t[e]={}),t[e]=q(t[e],i)):t[e]=z(i)?i.concat():i})),q.apply(void 0,[t].concat(i))}function Z(t,e){var i;return void 0===e&&(e=!0),t[0]instanceof Date?i=e?function(t,e){return t-e}:function(t,e){return e-t}:e&&!t.every(isNaN)?i=function(t,e){return t-e}:!e&&(i=function(t,e){return(t>e?-1:t<e&&1)||t===e&&0}),t.concat().sort(i)}function K(t,e){var i=e.filter((function(t){return D(t)}));return i.length?S(i[0])?i=Math[t].apply(Math,i):i[0]instanceof Date&&(i=Z(i,"min"===t)[0]):i=void 0,i}var J={mouse:function(){try{return new MouseEvent("t"),function(t,e,i){void 0===i&&(i={bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}),t.dispatchEvent(new MouseEvent(e,i))}}catch(t){return function(t,e,i){void 0===i&&(i={bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0});var n=w.createEvent("MouseEvent");n.initMouseEvent(e,i.bubbles,i.cancelable,T,0,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}}(),touch:function(t,e,i){var n=new Touch(q({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},i));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[n],targetTouches:[],changedTouches:[n]}))}};function Q(t,e){var i=t;for(var n in e)i=i.replace(new RegExp("{="+n+"}","g"),e[n]);return i}function tt(t){var e;if(t instanceof Date)e=t;else if(L(t)){var i=this.config;e=this.format.dataTime(i.data_xFormat)(t)}else S(t)&&!isNaN(t)&&(e=new Date(+t));return(!e||isNaN(+e))&&console&&console.error&&console.error("Failed to parse x '"+t+"' to Date object"),e}var et=q({axis_rotated:!1},v,m,b),it={grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0},nt={point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_pattern:[],point_select_r:void 0,point_type:"circle"},at={subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_text_show:!0,subchart_onbrush:function(){}},rt={zoom_enabled:void 0,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0},st={area_zerobased:!0,area_above:!1,area_linearGradient:!1},ot={bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0},ct={bubble_maxR:35,bubble_zerobased:!1},lt={line_connectNull:!1,line_step_type:"step",line_zerobased:!1,line_classes:void 0,line_point:!0},ut={spline_interpolation_type:"cardinal"},dt={donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0},ht={gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_label_extents:void 0,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50},gt={pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0},ft={radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(t){return t%1==0?t:t.toFixed(2)},radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1},xt=function(){var t=[u,d,h,g,f,x].concat([dt,ht,gt,ft],[p,_,et,it,nt,at,rt],[st,ot,ct,lt,ut]);return q.apply(void 0,[{bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:350,scatter_zerobased:!1,plugins:[],render:{},regions:[]}].concat(t))},pt="__colorPattern__",_t="$dataMinMax",vt="$dataTotalSum",mt="$totalPerIndex",bt="legendItemTextBox",yt="setOverOut",Tt="callOverOutForTouch",wt="textRect",At=function(){function t(){n(this,"cache",{})}var e=t.prototype;return e.add=function(t,e,i){return void 0===i&&(i=!1),this.cache[t]=i?this.cloneTarget(e):e,this.cache[t]},e.remove=function(t){var e=this;H(t).forEach((function(t){return delete e.cache[t]}))},e.get=function(t,e){if(void 0===e&&(e=!1),e){for(var i,n=[],a=0;i=t[a];a++)i in this.cache&&n.push(this.cloneTarget(this.cache[i]));return n}var r=this.cache[t];return A(r)?r:null},e.reset=function(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)},e.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map((function(t){return{x:t.x,value:t.value,id:t.id}}))}},t}(),kt=T.setTimeout,Lt=T.clearTimeout;var St=i(5),Ot=i(6),It=function(){function t(t){n(this,"owner",void 0),n(this,"config",void 0),n(this,"scale",void 0);var e=Object(Ot.scaleLinear)(),i=t.config,a=t.params;this.owner=t,this.config=i,this.scale=e,(i.noTransition||!a.config.transition_duration)&&(i.withoutTransition=!0),i.range=this.scaleExtent((a.orgXScale||e).range())}t.getSizeFor1Char=function(t){var e={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call((function(t){try{var i=t.node().getBBox(),n=i.width,a=i.height;n&&a&&(e.w=n,e.h=a)}catch(t){}finally{t.text("")}})),this.getSizeFor1Char=function(){return e},e};var e=t.prototype;return e.getTickTransformSetter=function(t){var e=this.config,i="x"===t?function(t){return"translate("+(t+e.tickOffset)+",0)"}:function(t){return"translate(0,"+t+")"};return function(t,e){t.attr("transform",(function(t){return i(Math.ceil(e(t)))}))}},e.scaleExtent=function(t){var e=t[0],i=t[t.length-1];return e<i?[e,i]:[i,e]},e.generateTicks=function(t,e){var i=this.owner.params.tickStepSize,n=[];if(e&&i)for(var a=t.domain(),r=a[0],s=a[1],o=r;o<=s;)n.push(o),o+=i;else if(t.ticks)n=t.ticks.apply(t,this.config.tickArguments||[]).map((function(t){return L(t)&&S(t)&&!isNaN(t)&&Math.round(10*t)/10||t}));else{for(var c=t.domain(),l=Math.ceil(c[0]);l<c[1];l++)n.push(l);n.length>0&&n[0]>0&&n.unshift(n[0]-(n[1]-n[0]))}return n},e.copyScale=function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t},e.textFormatted=function(t){var e=this.config.tickFormat,i=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,n=e?e(i):i;return I(n)?n:""},e.transitionise=function(t){var e=this.config;return e.withoutTransition?t.interrupt():t.transition(e.transition)},t}(),Ct=function(){function t(t){void 0===t&&(t={}),n(this,"helper",void 0),n(this,"config",void 0),n(this,"params",void 0),n(this,"g",void 0);var e={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding,this.config=e,this.params=t,this.helper=new It(this)}var e=t.prototype;return e.create=function(t){var e=this,i=this.config,n=this.helper,a=this.params,r=n.scale,o=i.orient,c=this.splitTickText.bind(this),l=/^(left|right)$/.test(o),u=/^(top|bottom)$/.test(o),d=n.getTickTransformSetter(u?"x":"y"),h=d===n.axisX?"y":"x",g=/^(top|left)$/.test(o)?-1:1,f=a.tickTextRotate;this.config.range=r.rangeExtent?r.rangeExtent():n.scaleExtent((a.orgXScale||r).range());var x,p=i,_=p.innerTickSize,v=p.tickLength,m=p.range,b=a.id,y=b&&/^(x|y|y2)$/.test(b)?a.config["axis_"+b+"_tick_text_position"]:{x:0,y:0},T="subX"===b?"subchart_axis_x":"axis_"+b,w=a.config[T+"_show"],A=!!w&&a.config[T+"_tick_show"],k=!!w&&a.config[T+"_tick_text_show"];t.each((function(){var t=Object(s.select)(this),p=this.__chart__||r,b=n.copyScale();x=t,this.__chart__=b,i.tickOffset=a.isCategory?Math.ceil((b(1)-b(0))/2):0;var T=t.selectAll(".domain").data([0]);if(T.enter().append("path").attr("class","domain").merge(n.transitionise(T)).attr("d",(function(){var t=i.outerTickSize*g;return u?"M"+m[0]+","+t+"V0H"+m[1]+"V"+t:"M"+t+","+m[0]+"H0V"+m[1]+"H"+t})),A||k){var w=i.tickValues||n.generateTicks(b,l),L=t.selectAll(".tick").data(w,b),O=L.enter().insert("g",".domain").attr("class","tick").style("opacity","1"),I=L.exit().remove();L=O.merge(L),A&&O.append("line"),k&&O.append("text");var C=It.getSizeFor1Char(L),E=[],X=L.select("text").selectAll("tspan").data((function(t,e){var i=a.tickMultiline?c(t,b,w,l,C.w):z(n.textFormatted(t))?n.textFormatted(t).concat():[n.textFormatted(t)];return E[e]=i.length,i.map((function(t){return{index:e,splitted:t}}))}));X.exit().remove(),(X=X.enter().append("tspan").merge(X).text((function(t){return t.splitted}))).attr("x",u?0:v*g).attr("dx",function(){var t=0;return/(top|bottom)/.test(o)&&f&&(t=8*Math.sin(Math.PI*(f/180))*("top"===o?-1:1)),t+(y.x||0)}()).attr("dy",(function(t,e){var i=0;return"top"!==o&&(i=C.h,0===e&&(i=l?-((E[t.index]-1)*(C.h/2)-3):0===y.y?".71em":0)),S(i)&&y.y?i+y.y:i||".71em"}));var R=L.select("line"),D=L.select("text");if(O.select("line").attr(h+"2",_*g),O.select("text").attr(h,v*g),e.setTickLineTextPosition(R,D),a.tickTitle){var P=D.select("title");(P.empty()?D.append("title"):P).text((function(t){return a.tickTitle[t]}))}if(b.bandwidth){var M=b,F=M.bandwidth()/2;b=p=function(t){return M(t)+F}}else p.bandwidth?p=b:d(I,b);d(O,p),d(n.transitionise(L).style("opacity","1"),b)}})),this.g=x},e.getTickXY=function(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e},e.getTickSize=function(t){var e=this.helper.scale,i=this.config,n=i,a=n.innerTickSize,r=n.range,s=e(t)+(i.tickCentered?0:i.tickOffset);return r[0]<s&&s<r[1]?a:0},e.setTickLineTextPosition=function(t,e){var i=this.getTickXY(),n=this.config,a=n.innerTickSize,r=n.orient,s=n.tickLength,o=n.tickOffset,c=this.params.tickTextRotate,l=function(t){var e=["start","end"];return"top"===r&&e.reverse(),t?t>0?e[0]:e[1]:"middle"},u=function(t){return t?"rotate("+t+")":null},d=function(t){return t?11.5-2.5*(t/("bottom"===r?15:23))*(t>0?1:-1):s};"bottom"===r?(t.attr("x1",i.x).attr("x2",i.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",d(c)).style("text-anchor",l(c)).attr("transform",u(c))):"top"===r?(t.attr("x2",0).attr("y2",-a),e.attr("x",0).attr("y",2*-d(c)).style("text-anchor",l(c)).attr("transform",u(c))):"left"===r?(t.attr("x2",-a).attr("y1",i.y).attr("y2",i.y),e.attr("x",-s).attr("y",o).style("text-anchor","end")):"right"===r&&(t.attr("x2",a).attr("y2",0),e.attr("x",s).attr("y",0).style("text-anchor","start"))},e.splitTickText=function(t,e,i,n,a){var r=this.params,s=this.helper.textFormatted(t),o=L(s)&&s.indexOf("\n")>-1?s.split("\n"):[];if(o.length)return o;if(z(s))return s;var c=r.tickWidth;return(!c||c<=0)&&(c=n?95:r.isCategory?Math.ceil(e(i[1])-e(i[0]))-12:110),function t(e,i){for(var n,r,s,o=1;o<i.length;o++)if(" "===i.charAt(o)&&(r=o),n=i.substr(0,o+1),s=a*n.length,c<s)return t(e.concat(i.substr(0,r||o)),i.slice(r?r+1:o));return e.concat(i)}(o,s+"")},e.scale=function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale},e.orient=function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",this):this.config.orient},e.tickFormat=function(t){var e=this.config;return arguments.length?(e.tickFormat=t,this):e.tickFormat},e.tickCentered=function(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered},e.tickOffset=function(){return this.config.tickOffset},e.tickInterval=function(t){var e;this.params.isCategory?e=2*this.config.tickOffset:e=(this.g.select("path.domain").node().getTotalLength()-2*this.config.outerTickSize)/(t||this.g.selectAll("line").size());return e===1/0?0:e},e.ticks=function(){for(var t=this.config,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.length?(t.tickArguments=H(i),this):t.tickArguments},e.tickCulling=function(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling},e.tickValues=function(t){var e=this,i=this.config;if(k(t))i.tickValues=function(){return t(e.helper.scale.domain())};else{if(!arguments.length)return i.tickValues;i.tickValues=t}return this},e.setTransition=function(t){return this.config.transition=t,this},t}(),Et=function(){function t(t){n(this,"owner",void 0),n(this,"x",void 0),n(this,"subX",void 0),n(this,"y",void 0),n(this,"y2",void 0),n(this,"axesList",{}),n(this,"tick",{x:null,y:null,y2:null}),n(this,"xs",[]),n(this,"orient",{x:"bottom",y:"left",y2:"right",subX:"bottom"}),this.owner=t,this.setOrient()}var e=t.prototype;return e.getAxisClassName=function(t){return o.axis+" "+o["axis"+j(t)]},e.isHorizontal=function(t,e){var i=t.config.axis_rotated;return e?i:!i},e.isCategorized=function(){var t=this.owner,e=t.config,i=t.state;return e.axis_x_type.indexOf("category")>=0||i.hasRadar},e.isCustomX=function(){var t=this.owner.config;return!this.isTimeSeries()&&(t.data_x||D(t.data_xs))},e.isTimeSeries=function(t){return void 0===t&&(t="x"),"timeseries"===this.owner.config["axis_"+t+"_type"]},e.isTimeSeriesY=function(){return this.isTimeSeries("y")},e.init=function(){var t=this,e=this.owner,i=e.config,n=e.$el,a=n.main,r=n.axis,s=e.state.clip,c=i.axis_rotated,l=["x","y"];i.axis_y2_show&&l.push("y2"),l.forEach((function(n){var l=t.getAxisClassName(n),u=o["axis"+n.toUpperCase()+"Label"];r[n]=a.append("g").attr("class",l).attr("clip-path",(function(){var t=null;return"x"===n?t=s.pathXAxis:"y"===n&&i.axis_y_inner&&(t=s.pathYAxis),t})).attr("transform",e.getTranslate(n)).style("visibility",i["axis_"+n+"_show"]?"visible":"hidden"),r[n].append("text").attr("class",u).attr("transform",["rotate(-90)",null]["x"===n?+!c:+c]).style("text-anchor",(function(){return t.textAnchorForAxisLabel(n)})),t.generateAxes(n)}))},e.setOrient=function(){var t=this.owner.config,e=t.axis_rotated,i=t.axis_y_inner,n=t.axis_y2_inner;this.orient={x:e?"left":"bottom",y:e?i?"top":"bottom":i?"right":"left",y2:e?n?"bottom":"top":n?"left":"right",subX:e?"left":"bottom"}},e.generateAxes=function(t){var e,i=this.owner,n=i.config,a=[],r=n["axis_"+t+"_axes"],s=n.axis_rotated;"x"===t?e=s?St.axisLeft:St.axisBottom:"y"===t?e=s?St.axisBottom:St.axisLeft:"y2"===t&&(e=s?St.axisTop:St.axisRight),r.length&&r.forEach((function(n){var r=n.tick||{},s=i.scale[t].copy();n.domain&&s.domain(n.domain),a.push(e(s).ticks(r.count).tickFormat(k(r.format)?r.format.bind(i.api):function(t){return t}).tickValues(r.values).tickSizeOuter(!1===r.outer?0:6))})),this.axesList[t]=a},e.updateAxes=function(){var t=this,e=this.owner,i=e.config,n=e.$el.main;Object.keys(this.axesList).forEach((function(a){var r=i["axis_"+a+"_axes"],s=e.scale[a].copy(),o=s.range();t.axesList[a].forEach((function(c,l){var u=c.scale().range();o.every((function(t,e){return t===u[e]}))||c.scale().range(o);var d=t.getAxisClassName(a)+"-"+(l+1),h=n.select("."+d.replace(/\s/,"."));h.empty()?h=n.append("g").attr("class",d).style("visibility",i["axis_"+a+"_show"]?"visible":"hidden").call(c):(r[l].domain&&s.domain(r[l].domain),t.x.helper.transitionise(h).call(c.scale(s))),h.attr("transform",e.getTranslate(a,l+1))}))}))},e.setAxis=function(t){"subX"!==t&&(this.tick[t]=this.getTickValues(t));for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this[t]=this.getAxis.apply(this,[t].concat(i))},e.getAxis=function(t,e,i,n,a){var r,s=this.owner,o=s.config,c=/^(x|subX)$/.test(t),l=c?"x":t,u=c&&this.isCategorized(),d=this.orient[t],h=a?0:s.getAxisTickRotate(l);if(c)r=s.format.xAxisTick;else{var g=o["axis_"+t+"_tick_format"];k(g)&&(r=g.bind(s.api))}var f=this.tick[l],x=q({outerTick:i,noTransition:n,config:o,id:t,tickTextRotate:h},c&&{isCategory:u,tickMultiline:o.axis_x_tick_multiline,tickWidth:o.axis_x_tick_width,tickTitle:u&&o.axis_x_tick_tooltip&&s.api.categories(),orgXScale:s.scale.x});c||(x.tickStepSize=o["axis_"+l+"_tick_stepSize"]);var p=new Ct(x).scale(c&&s.scale.zoom||e).orient(d);if(c&&this.isTimeSeries()&&f&&!k(f)){var _=tt.bind(s);f=f.map((function(t){return _(t)}))}else!c&&this.isTimeSeriesY()&&(p.ticks(o.axis_y_tick_time_value),f=null);f&&p.tickValues(f),p.tickFormat(r||!c&&s.isStackNormalized()&&function(t){return t+"%"}),u&&(p.tickCentered(o.axis_x_tick_centered),R(o.axis_x_tick_culling)&&(o.axis_x_tick_culling=!1));var v=o["axis_"+l+"_tick_count"];return v&&p.ticks(v),p},e.updateXAxisTickValues=function(t,e){var i,n=this.owner,a=n.config,r=a.axis_x_tick_fit,s=a.axis_x_tick_count;return(r||s&&r)&&(i=n.mapTargetsToUniqueXs(t),this.isCategorized()&&s>i.length&&(s=i.length),i=this.generateTickValues(i,s,this.isTimeSeries())),e?e.tickValues(i):this.x&&(this.x.tickValues(i),this.subX&&this.subX.tickValues(i)),i},e.getId=function(t){var e=this.owner,i=e.config,n=e.scale,a=i.data_axes[t];return a&&n[a]||(a="y"),a},e.getXAxisTickFormat=function(){var t,e=this.owner,i=e.config,n=e.format,a=i.axis_x_tick_format,r=this.isTimeSeries(),s=this.isCategorized();return a?k(a)?t=a.bind(e.api):r&&(t=function(t){return t?n.axisTime(a)(t):""}):t=r?n.defaultAxisTime:s?e.categoryName:function(t){return t<0?t.toFixed(0):t},k(t)?function(i){return t.apply(e,s?[i,e.categoryName(i)]:[i])}:t},e.getTickValues=function(t){var e=this.owner,i=e.config["axis_"+t+"_tick_values"],n=e[t+"Axis"];return(k(i)?i.call(e.api):i)||(n?n.tickValues():void 0)},e.getLabelOptionByAxisId=function(t){return this.owner.config["axis_"+t+"_label"]},e.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return L(e)?e:e?e.text:null},e.setLabelText=function(t,e){var i=this.owner.config,n=this.getLabelOptionByAxisId(t);L(n)?i["axis_"+t+"_label"]=e:n&&(n.text=e)},e.getLabelPosition=function(t,e){var i=this.owner.config.axis_rotated,n=this.getLabelOptionByAxisId(t),a=X(n)&&n.position?n.position:e[+!i],r=function(t){return!!~a.indexOf(t)};return{isInner:r("inner"),isOuter:r("outer"),isLeft:r("left"),isCenter:r("center"),isRight:r("right"),isTop:r("top"),isMiddle:r("middle"),isBottom:r("bottom")}},e.getAxisLabelPosition=function(t){return this.getLabelPosition(t,"x"===t?["inner-top","inner-right"]:["inner-right","inner-top"])},e.getLabelPositionById=function(t){return this.getAxisLabelPosition(t)},e.xForAxisLabel=function(t){var e=this.owner,i=e.state,n=i.width,a=i.height,r=this.getAxisLabelPosition(t),s=r.isMiddle?-a/2:0;return this.isHorizontal(e,"x"!==t)?s=r.isLeft?0:r.isCenter?n/2:n:r.isBottom&&(s=-a),s},e.dxForAxisLabel=function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isBottom?"0.5em":"0";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"0.5em":i.isRight?"-0.5em":"0":i.isTop&&(n="-0.5em"),n},e.textAnchorForAxisLabel=function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isMiddle?"middle":"end";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"start":i.isCenter?"middle":"end":i.isBottom&&(n="start"),n},e.dyForAxisLabel=function(t){var e,i=this.owner,n=i.config,a=n.axis_rotated,r=this.getAxisLabelPosition(t).isInner,s=n["axis_"+t+"_tick_rotate"]?i.getHorizontalAxisHeight(t):0,o=this.getMaxTickWidth(t);if("x"===t){var c=n.axis_x_height;e=a?r?"1.2em":-25-o:r?"-0.5em":c?c-10:s?s-10:"3em"}else e={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],e=a?r?e[0]:s?s*("y2"===t?-1:1)-e[1]:e[2]:r?e[3]:(e[4]+(n["axis_"+t+"_inner"]?0:o+e[4]))*("y"===t?-1:1);return e},e.getMaxTickWidth=function(t,e){var i=this.owner,n=i.config,a=i.state.current,r=i.$el,s=r.svg,o=r.chart,c=a.maxTickWidths[t],l=0;if(e||!n["axis_"+t+"_show"]||0===i.filterTargetsToShow().length)return c.size;if(s){var u=/^y2?$/.test(t),d=i.filterTargetsToShow(i.data.targets),h=i.scale[t].copy().domain(i["get"+(u?"Y":"X")+"Domain"](d,t)),g=h.domain();if(g[0]===g[1]||z(c.domain)&&c.domain[0]===c.domain[1])return c.size;c.domain=g;var f=this.getAxis(t,h,!1,!1,!0),x=n["axis_"+t+"_tick_count"];!n["axis_"+t+"_tick_values"]&&x&&f.tickValues(this.generateTickValues(g,x,u?this.isTimeSeriesY():this.isTimeSeries())),u||this.updateXAxisTickValues(d,f);var p=o.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px");f.create(p),p.selectAll("text").each((function(e,i){var n=this.getBoundingClientRect().width;l=Math.max(l,n),"x"===t&&(c.ticks[i]=n)})),p.remove()}return l>0&&(c.size=l),c.size},e.getXAxisTickTextY2Overflow=function(t){var e=this.owner,i=e.axis,n=e.config,a=e.state,r=e.getAxisTickRotate("x");if((i.isCategorized()||i.isTimeSeries())&&n.axis_x_tick_fit&&!n.axis_x_tick_culling&&!n.axis_x_tick_multiline&&r>0&&r<90){var s=a.current.width-e.getCurrentPaddingLeft(),o=this.getXAxisTickMaxOverflow(r,s-t),c=Math.max(0,o)+t;return Math.min(c,s/2)}return 0},e.getXAxisTickMaxOverflow=function(t,e){for(var i=this.owner,n=i.axis,a=i.config,r=i.state,s=n.isTimeSeries(),o=r.current.maxTickWidths.x.ticks,c=o.length,l=r.axis.x.padding,u=l.left,d=l.right,h=0,g=c-(s&&a.axis_x_tick_fit?.5:0),f=0;f<c;f++){var x=f+1,p=Math.cos(Math.PI*t/180)*o[f],_=x-(s?1:.5)+u;if(!(_<=0)){var v=(e-p)/_;h=Math.max(h,p-v/2-((g-x)*v+d*v))}}var m=0;if(!s){var b=Object(Ot.scaleLinear)().domain([-1*u,i.getXDomainMax(i.data.targets)+1+d]).range([0,e-h]);m=Math.ceil((b(1)-b(0))/2)}return h+m},e.getXAxisPadding=function(t){var e=this.owner,i=e.config.axis_x_padding;if(R(i)?i={left:0,right:0}:(i.left=i.left||0,i.right=i.right||0),e.axis.isTimeSeries()){var n=+e.getXDomainMin(e.data.targets),a=+e.getXDomainMax(e.data.targets)-n,r=a+i.left+i.right,s=a/t/r;i={left:i.left/r/s||0,right:i.right/r/s||0}}return i},e.updateLabels=function(t){var e=this,i=this.owner.$el.main,n={x:i.select("."+o.axisX+" ."+o.axisXLabel),y:i.select("."+o.axisY+" ."+o.axisYLabel),y2:i.select("."+o.axisY2+" ."+o.axisY2Label)};Object.keys(n).filter((function(t){return!n[t].empty()})).forEach((function(i){var a=n[i];(t?a.transition():a).attr("x",(function(){return e.xForAxisLabel(i)})).attr("dx",(function(){return e.dxForAxisLabel(i)})).attr("dy",(function(){return e.dyForAxisLabel(i)})).text((function(){return e.getLabelText(i)}))}))},e.getPadding=function(t,e,i,n){var a=S(t)?t:t[e];return A(a)?this.convertPixelsToAxisPadding(a,n):i},e.convertPixelsToAxisPadding=function(t,e){var i=this.owner,n=i.config,a=i.state,r=a.width,s=a.height;return e*(t/(n.axis_rotated?r:s))},e.generateTickValues=function(t,e,i){var n=t;if(e){var a=k(e)?e():e;if(1===a)n=[t[0]];else if(2===a)n=[t[0],t[t.length-1]];else if(a>2){var r,s=this.isCategorized(),o=a-2,c=t[0],l=t[t.length-1];n=[c];for(var u=0;u<o;u++)r=+c+(l-c)/(o+1)*(u+1),n.push(i?new Date(r):s?Math.round(r):r);n.push(l)}}return i||(n=n.sort((function(t,e){return t-e}))),n},e.generateTransitions=function(t){var e=this.owner.$el.axis,i=["x","y","y2","subX"].map((function(i){var n=e[i];return n&&t&&(n=n.transition().duration(t)),n}));return{axisX:i[0],axisY:i[1],axisY2:i[2],axisSubX:i[3]}},e.redraw=function(t,e,i){var n=this,a=this.owner,r=a.config,s=a.$el,o=e?"0":"1";["x","y","y2","subX"].forEach((function(e){var a=n[e],c=s.axis[e];a&&c&&(!i&&(a.config.withoutTransition=!r.transition_duration),c.style("opacity",o),a.create(t["axis"+j(e)]))})),this.updateAxes()},e.redrawAxis=function(t,e,i,n,a){var r,s=this,o=this.owner,c=o.config,l=o.scale,u=o.$el,d=!!l.zoom;!d&&this.isCategorized()&&0===t.length&&l.x.domain([0,u.axis.x.selectAll(".tick").size()]),l.x&&t.length?(!d&&o.updateXDomain(t,e.UpdateXDomain,e.UpdateOrgXDomain,e.TrimXDomain),!c.axis_x_tick_values&&this.updateXAxisTickValues(t)):this.x&&(this.x.tickValues([]),this.subX&&this.subX.tickValues([])),c.zoom_rescale&&!n&&(r=l.x.orgDomain()),["y","y2"].forEach((function(e){var i=l[e];if(i){var n=c["axis_"+e+"_tick_values"],a=c["axis_"+e+"_tick_count"];if(i.domain(o.getYDomain(t,e,r)),!n&&a){var u=o.axis[e],d=i.domain();u.tickValues(s.generateTickValues(d,d.every((function(t){return 0===t}))?1:a,s.isTimeSeriesY()))}}})),this.redraw(i,o.hasArcType(),a),this.updateLabels(e.Transition),(e.UpdateXDomain||e.UpdateXAxis||e.Y)&&t.length&&this.setCulling(),e.Y&&(l.subY&&l.subY.domain(o.getYDomain(t,"y")),l.subY2&&l.subY2.domain(o.getYDomain(t,"y2")))},e.setCulling=function(){var t=this.owner,e=t.config,i=t.state,n=i.clip,a=i.current,r=t.$el;["subX","x","y","y2"].forEach((function(t){var i=r.axis[t],s="subX"===t?"x":t,c=e["axis_"+s+"_tick_culling"];if(i&&c){var l,u=i.selectAll(".tick text"),d=Z(u.data()),h=d.length,g=e["axis_"+s+"_tick_culling_max"];if(h){for(var f=1;f<h;f++)if(h/f<g){l=f;break}u.each((function(t){this.style.display=d.indexOf(t)%l?"none":"block"}))}else u.style("display","block");if("x"===t){var x=a.maxTickWidths.x.clipPath?n.pathXAxisTickTexts:null;r.svg.selectAll("."+o.axisX+" .tick text").attr("clip-path",x)}}}))},t}(),Xt=i(7),Rt={convertData:function(t,e){var i;if(t.bindto?(i={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach((function(e){var n="data_"+e;n in t&&(i[e]=t[n])}))):i=t,i.url&&e)this.convertUrlToData(i.url,i.mimeType,i.headers,i.keys,e);else if(i.json)i=this.convertJsonToData(i.json,i.keys);else if(i.rows)i=this.convertRowsToData(i.rows);else if(i.columns)i=this.convertColumnsToData(i.columns);else if(t.bindto)throw Error("url or json or rows or columns is required.");return z(i)&&i},convertUrlToData:function(t,e,i,n,a){var r=this;void 0===e&&(e="csv");var s=new XMLHttpRequest;s.open("GET",t),i&&Object.keys(i).forEach((function(t){s.setRequestHeader(t,i[t])})),s.onreadystatechange=function(){if(4===s.readyState){if(200!==s.status)throw new Error(t+": Something went wrong loading!");var i=s.responseText;i&&a.call(r,r["convert"+j(e)+"ToData"]("json"===e?JSON.parse(i):i,n))}},s.send()},convertCsvTsvToData:function(t,e){var i,n=t.rows(e);return 1===n.length?(i=[{}],n[0].forEach((function(t){i[0][t]=null}))):i=t.parse(e),i},convertCsvToData:function(t){return this.convertCsvTsvToData({rows:Xt.csvParseRows,parse:Xt.csvParse},t)},convertTsvToData:function(t){return this.convertCsvTsvToData({rows:Xt.tsvParseRows,parse:Xt.tsvParse},t)},convertJsonToData:function(t,e){var i,n,a=this,r=this.config,s=[];if(z(t)){var o=e||r.data_keys;o.x?(i=o.value.concat(o.x),r.data_x=o.x):i=o.value,s.push(i),t.forEach((function(t){var e=i.map((function(e){var i=a.findValueInJson(t,e);return O(i)&&(i=null),i}));s.push(e)})),n=this.convertRowsToData(s)}else Object.keys(t).forEach((function(e){var i=t[e].concat();i.unshift(e),s.push(i)})),n=this.convertColumnsToData(s);return n},findValueInJson:function(t,e){if(void 0!==t[e])return t[e];var i=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),n=t;return i.some((function(t){return!(n=n&&t in n?n[t]:void 0)})),n},convertRowsToData:function(t){var e=t[0],i=[];return t.forEach((function(t,n){if(n>0){var a={};t.forEach((function(t,i){if(O(t))throw new Error("Source data is missing a component at ("+n+", "+i+")!");a[e[i]]=t})),i.push(a)}})),i},convertColumnsToData:function(t){var e=[];return t.forEach((function(t,i){var n=t[0];t.forEach((function(t,a){if(a>0){if(O(e[a-1])&&(e[a-1]={}),O(t))throw new Error("Source data is missing a component at ("+i+", "+a+")!");e[a-1][n]=t}}))})),e},convertDataToTargets:function(t,e){var i=this,n=this,a=n.axis,r=n.config,s=n.state,o=!1,c=!1,l=!1;a&&(o=a.isCategorized(),c=a.isTimeSeries(),l=a.isCustomX());var u,d=Object.keys(t[0]||{}),h=d.length?d.filter(n.isNotX,n):[],g=d.length?d.filter(n.isX,n):[];h.forEach((function(a){var s=i.getXKey(a);l||c?g.indexOf(s)>=0?u=(e&&n.data.xs[a]||[]).concat(t.map((function(t){return t[s]})).filter(A).map((function(t,e){return n.generateTargetX(t,a,e)}))):r.data_x?u=i.getOtherTargetXs():D(r.data_xs)&&(u=n.getXValuesOfXKey(s,n.data.targets)):u=t.map((function(t,e){return e})),u&&(i.data.xs[a]=u)})),h.forEach((function(t){if(!i.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}));var f=h.map((function(e,i){var a=r.data_idConverter.bind(n.api)(e),c=n.getXKey(e),u=l&&o,d=u&&t.map((function(t){return t.x})).every((function(t){return r.axis_x_categories.indexOf(t)>-1}));return{id:a,id_org:e,values:t.map((function(t,o){var l,h=t[c],g=t[e];return g=null===g||isNaN(g)||P(g)?z(g)||P(g)?g:null:+g,!u&&!s.hasRadar||0!==i||O(h)?l=n.generateTargetX(h,e,o):(!d&&0===i&&0===o&&(r.axis_x_categories=[]),-1===(l=r.axis_x_categories.indexOf(h))&&(l=r.axis_x_categories.length,r.axis_x_categories.push(h))),(O(g)||n.data.xs[e].length<=o)&&(l=void 0),{x:l,value:g,id:a}})).filter((function(t){return I(t.x)}))}}));return f.forEach((function(t){r.data_xSort&&(t.values=t.values.sort((function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)}))),t.values.forEach((function(t,e){return t.index=e})),n.data.xs[t.id].sort((function(t,e){return t-e}))})),s.hasNegativeValue=n.hasNegativeValueInTargets(f),s.hasPositiveValue=n.hasPositiveValueInTargets(f),r.data_type&&n.setTargetType(n.mapToIds(f).filter((function(t){return!(t in r.data_types)})),r.data_type),f.forEach((function(t){return n.cache.add(t.id_org,t,!0)})),f}},Dt={isX:function(t){var e,i,n,a=this.config,r=a.data_x&&t===a.data_x,s=D(a.data_xs)&&(e=a.data_xs,i=t,n=!1,Object.keys(e).forEach((function(t){return e[t]===i&&(n=!0)})),n);return r||s},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return!(!t.data_stack_normalize||!t.data_groups.length)},isGrouped:function(t){return this.config.data_groups.map((function(e){return e.indexOf(t)>=0}))[0]},getXKey:function(t){var e=this.config;return e.data_x?e.data_x:D(e.data_xs)?e.data_xs[t]:null},getXValuesOfXKey:function(t,e){var i,n=this;return(e&&D(e)?n.mapToIds(e):[]).forEach((function(e){n.getXKey(e)===t&&(i=n.data.xs[e])})),i},getIndexByX:function(t,e){return e?e.indexOf(L(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){return t in this.data.xs&&this.data.xs[t]&&A(this.data.xs[t][e])?this.data.xs[t][e]:e},getOtherTargetXs:function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(t){var e=this.config;Object.keys(t).forEach((function(i){e.data_xs[i]=t[i]}))},isMultipleX:function(){return D(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function(t){var e,i=this.config;return t&&(e=i.data_names[t.id],t.name=void 0===e?t.id:e),t},getAllValuesOnIndex:function(t,e){void 0===e&&(e=!1);var i=this,n=i.filterTargetsToShow(i.data.targets).map((function(e){return i.addName(i.getValueOnIndex(e.values,t))}));return e&&(n=n.filter((function(t){return A(t.value)}))),n},getValueOnIndex:function(t,e){var i=t.filter((function(t){return t.index===e}));return i.length?i[0]:null},updateTargetX:function(t,e){var i=this;t.forEach((function(t){t.values.forEach((function(n,a){n.x=i.generateTargetX(e[a],t.id,a)})),i.data.xs[t.id]=e}))},updateTargetXs:function(t,e){var i=this;t.forEach((function(t){e[t.id]&&i.updateTargetX([t],e[t.id])}))},generateTargetX:function(t,e,i){var n=this.axis,a=n&&n.isCategorized()?i:t||i;if(n&&n.isTimeSeries()){var r=tt.bind(this);a=r(t||this.getXValue(e,i))}else n&&n.isCustomX()&&!n.isCategorized()&&(a=A(t)?+t:this.getXValue(e,i));return a},updateXs:function(t){t.length&&(this.axis.xs=t.map((function(t){return t.x})))},getPrevX:function(t){var e=this.axis.xs[t-1];return I(e)?e:null},getNextX:function(t){var e=this.axis.xs[t+1];return I(e)?e:null},getBaseValue:function(t){var e=this,i=e.state.hasAxis,n=t.value;return n&&i&&(e.isAreaRangeType(t)?n=e.getAreaRangeData(t,"mid"):e.isBubbleZType(t)&&(n=e.getBubbleZData(n,"y"))),n},getMinMaxValue:function(t){var e,i,n=this.getBaseValue.bind(this);return(t||this.data.targets.map((function(t){return t.values}))).forEach((function(t,a){var r=t.map(n).filter(S);e=Math.min.apply(Math,[a?e:1/0].concat(r)),i=Math.max.apply(Math,[a?i:-1/0].concat(r))})),{min:e,max:i}},getMinMaxData:function(){var t=this,e=_t,i=t.cache.get(e);if(!i){var n=t.data.targets.map((function(t){return t.values})),a=t.getMinMaxValue(n),r=[],s=[];n.forEach((function(e){var i=t.getFilteredDataByValue(e,a.min),n=t.getFilteredDataByValue(e,a.max);i.length&&(r=r.concat(i)),n.length&&(s=s.concat(n))})),t.cache.add(e,i={min:r,max:s})}return i},getTotalPerIndex:function(){var t=mt,e=this.cache.get(t);return this.isStackNormalized()&&!e&&(e=[],this.data.targets.forEach((function(t){t.values.forEach((function(t,i){e[i]||(e[i]=0),e[i]+=S(t.value)?t.value:0}))}))),e},getTotalDataSum:function(t){var e=vt,i=this.cache.get(e);if(!S(i)){var n=G(this.data.targets.map((function(t){return t.values}))).map((function(t){return t.value})).reduce((function(t,e){return t+e}));this.cache.add(e,i=n)}return t&&(i-=this.getHiddenTotalDataSum()),i},getHiddenTotalDataSum:function(){var t=this.api,e=this.state.hiddenTargetIds,i=0;return e.length&&(i=t.data.values.bind(t)(e).reduce((function(t,e){return t+e}))),i},getFilteredDataByValue:function(t,e){var i=this;return t.filter((function(t){return i.getBaseValue(t)===e}))},getMaxDataCount:function(){return Math.max.apply(Math,this.data.targets.map((function(t){return t.values.length})))},getMaxDataCountTarget:function(){var t=this.filterTargetsToShow()||[],e=t.length;return e>1?t=Z(U(t=t.map((function(t){return t.values})).reduce((function(t,e){return t.concat(e)})).map((function(t){return t.x})))).map((function(t,e){return{x:t,index:e}})):e&&(t=t[0].values),t},mapToIds:function(t){return t.map((function(t){return t.id}))},mapToTargetIds:function(t){return t?z(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function(t,e){for(var i,n=this.mapToIds(t),a=0;i=n[a];a++)if(i===e)return!0;return!1},isTargetToShow:function(t){return this.state.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.state.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this;return(t||e.data.targets).filter((function(t){return e.isTargetToShow(t.id)}))},mapTargetsToUniqueXs:function(t){var e=this.axis,i=[];return t&&t.length&&(i=U(G(t.map((function(t){return t.values.map((function(t){return+t.x}))})))),i=e&&e.isTimeSeries()?i.map((function(t){return new Date(+t)})):i.map((function(t){return+t}))),Z(i)},addHiddenTargetIds:function(t){this.state.hiddenTargetIds=this.state.hiddenTargetIds.concat(t)},removeHiddenTargetIds:function(t){this.state.hiddenTargetIds=this.state.hiddenTargetIds.filter((function(e){return t.indexOf(e)<0}))},addHiddenLegendIds:function(t){this.state.hiddenLegendIds=this.state.hiddenLegendIds.concat(t)},removeHiddenLegendIds:function(t){this.state.hiddenLegendIds=this.state.hiddenLegendIds.filter((function(e){return t.indexOf(e)<0}))},getValuesAsIdKeyed:function(t){var e=this,i=e.state.hasAxis,n={},a=e.isMultipleX(),r=a?e.mapTargetsToUniqueXs(t).map((function(t){return L(t)?t:+t})):null;return t.forEach((function(t){var s=[];t.values.forEach((function(t){var n=t.value;z(n)?s.push.apply(s,n):P(n)&&"high"in n?s.push.apply(s,Object.values(n)):e.isBubbleZType(t)?s.push(i&&e.getBubbleZData(n,"y")):a?s[e.getIndexByX(t.x,r)]=n:s.push(n)})),n[t.id]=s})),n},checkValueInTargets:function(t,e){for(var i,n=Object.keys(t),a=0;a<n.length;a++){i=t[n[a]].values;for(var r=0;r<i.length;r++)if(e(i[r].value))return!0}return!1},hasMultiTargets:function(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets:function(t){return this.checkValueInTargets(t,(function(t){return t<0}))},hasPositiveValueInTargets:function(t){return this.checkValueInTargets(t,(function(t){return t>0}))},_checkOrder:function(t){var e=this.config.data_order;return L(e)&&e.toLowerCase()===t},isOrderDesc:function(){return this._checkOrder("desc")},isOrderAsc:function(){return this._checkOrder("asc")},orderTargets:function(t){var e=this.config,i=[].concat(t),n=this.isOrderAsc(),a=this.isOrderDesc();return n||a?i.sort((function(t,e){var i=function(t,e){return t+Math.abs(e.value)},a=t.values.reduce(i,0),r=e.values.reduce(i,0);return n?r-a:a-r})):k(e.data_order)&&i.sort(e.data_order.bind(this.api)),i},filterByX:function(t,e){return G(t.map((function(t){return t.values}))).filter((function(t){return t.x-e==0}))},filterRemoveNull:function(t){var e=this;return t.filter((function(t){return A(e.getBaseValue(t))}))},filterByXDomain:function(t,e){return t.map((function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter((function(t){return e[0]<=t.x&&t.x<=e[1]}))}}))},hasDataLabel:function(){var t=this.config.data_labels;return"boolean"==typeof t&&t||X(t)&&D(t)},getDataLabelLength:function(t,e,i){var n=this,a=[0,0];return n.$el.chart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text((function(t){return n.dataLabelFormat(t.id)(t)})).each((function(t,e){a[e]=1.3*this.getBoundingClientRect()[i]})).remove(),a},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){var i,n=t[e].x,a=[];for(i=e-1;i>=0&&n===t[i].x;i--)a.push(t[i]);for(i=e;i<t.length&&n===t[i].x;i++)a.push(t[i]);return a},findClosestFromTargets:function(t,e){var i=this,n=t.map((function(t){return i.findClosest(t.values,e)}));return i.findClosest(n,e)},findClosest:function(t,e){var i,n=this,a=n.config,r=n.$el.main,s=t.filter((function(t){return t&&A(t.value)})),c=a.point_sensitivity;return s.filter((function(t){return n.isBarType(t.id)})).forEach((function(t){var e=r.select("."+o.bars+n.getTargetSelectorSuffix(t.id)+" ."+o.bar+"-"+t.index).node();!i&&n.isWithinBar(e)&&(i=t)})),s.filter((function(t){return!n.isBarType(t.id)})).forEach((function(t){var a=n.dist(t,e);a<c&&(c=a,i=t)})),i},dist:function(t,e){var i=this.config.axis_rotated,n=this.scale,a=i?1:0,r=i?0:1,s=this.circleY(t,t.index),o=(n.zoom||n.x)(t.x);return Math.sqrt(Math.pow(o-e[a],2)+Math.pow(s-e[r],2))},convertValuesToStep:function(t){var e=this.axis,i=this.config,n=i.axis_rotated,a=i.line_step_type,r=!!e&&e.isCategorized(),s=z(t)?t.concat():[t];if(!n&&!r)return t;var o=s[0].id,c=s[0].x-1,l=s[0].value;return r&&s.unshift({x:c,value:l,id:o}),"step-after"===a&&s.unshift({x:c-1,value:l,id:o}),l=s[c=s.length-1].value,r&&s.push({x:c,value:l,id:o}),"step-before"===a&&s.push({x:c+1,value:l,id:o}),s},convertValuesToRange:function(t){var e=z(t)?t.concat():[t],i=[];return e.forEach((function(t){var e=t.x,n=t.id;i.push({x:e,id:n,value:t.value[0]}),i.push({x:e,id:n,value:t.value[2]})})),i},updateDataAttributes:function(t,e){var i=this.config["data_"+t];return O(e)||(Object.keys(e).forEach((function(t){i[t]=e[t]})),this.redraw({withLegend:!0})),i},getAreaRangeData:function(t,e){var i=t.value;if(z(i)){var n=["high","mid","low"].indexOf(e);return-1===n?null:i[n]}return i[e]},getRatio:function(t,e,i){var n=this,a=n.config,r=n.state,s=n.api,o=0;if(e&&s.data.shown().length)if(o=e.ratio||e.value,"arc"===t)o=n.pie.padAngle()()?e.value/n.getTotalDataSum(!0):(e.endAngle-e.startAngle)/(Math.PI*(n.hasType("gauge")&&!a.gauge_fullCircle?1:2));else if("index"===t){var c=s.data.values.bind(s),l=this.getTotalPerIndex();if(r.hiddenTargetIds.length){var u=c(r.hiddenTargetIds,!1);u.length&&(u=u.reduce((function(t,e){return t.map((function(t,i){return(S(t)?t:0)+e[i]}))})),l=l.map((function(t,e){return t-u[e]})))}e.ratio=S(e.value)&&l&&l[e.index]>0?e.value/l[e.index]:0,o=e.ratio}else"radar"===t&&(o=parseFloat(Math.max(e.value,0)+"")/r.current.dataMax*a.radar_size_ratio);return i&&o?100*o:o},updateDataIndexByX:function(t){var e=t.reduce((function(t,e,i){return t[+e.x]=i,t}),{});this.data.targets.forEach((function(t){t.values.forEach((function(t,i){var n=e[+t.x];void 0===n&&(n=i),t.index=n}))}))}},zt={load:function(t,e){var i=this,n=t;n&&(e.filter&&(n=n.filter(e.filter)),(e.type||e.types)&&n.forEach((function(t){var n=e.types&&e.types[t.id]||e.type;i.setTargetType(t.id,n)})),i.data.targets.forEach((function(t){for(var e=0;e<n.length;e++)if(t.id===n[e].id){t.values=n[e].values,n.splice(e,1);break}})),i.data.targets=i.data.targets.concat(n)),i.updateTargets(i.data.targets),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.updateTypesElements(),e.done&&e.done.call(i.api)},loadFromArgs:function(t){var e=this;if(e.config){e.cache.reset();var i=t.data||e.convertData(t,(function(i){return e.load(e.convertDataToTargets(i),t)}));i&&e.load(e.convertDataToTargets(i),t)}},unload:function(t,e){var i=this,n=i.state,a=i.$el,r=e,s=t;return i.cache.reset(),r||(r=function(){}),(s=s.filter((function(t){return i.hasTarget(i.data.targets,t)})))&&0!==s.length?(a.svg.selectAll(s.map((function(t){return i.selectorTarget(t)}))).transition().style("opacity","0").remove().call(B,r),s.forEach((function(t){n.withoutFadeIn[t]=!1,a.legend&&a.legend.selectAll("."+o.legendItem+i.getTargetSelectorSuffix(t)).remove(),i.data.targets=i.data.targets.filter((function(e){return e.id!==t}))})),void i.updateTypesElements()):void r()}},Pt=i(8),Mt={setOverOut:function(t,e){var i=this,n=i.config,a=i.state.hasRadar,r=i.$el.main,c=P(e);if(c||-1!==e){var l=n[t?"data_onover":"data_onout"].bind(i.api);if(n.color_onover&&i.setOverColor(t,e,c),c)l(e,r.select("."+o.arc+i.getTargetSelectorSuffix(e.id)).node());else if(n.tooltip_grouped)t&&(n.point_focus_only&&a?i.showCircleFocus(i.getAllValuesOnIndex(e,!0)):i.expandCirclesBars(e,null,!0)),i.isMultipleX()||r.selectAll("."+o.shape+"-"+e).each((function(t){l(t,this)}));else{var u=i.cache.get(yt)||[],d=r.selectAll("."+o.shape+"-"+e).filter((function(t){return i.isWithinShape(this,t)}));d.each((function(t){var e=this;(0===u.length||u.every((function(t){return t!==e})))&&(l(t,this),u.push(this))})),u.length>0&&d.empty()&&(l=n.data_onout.bind(i.api),u.forEach((function(t){return l(Object(s.select)(t).datum(),t)})),u=[]),i.cache.add(yt,u)}}},callOverOutForTouch:function(t){var e=this.cache.get(Tt);(P(t)&&e?t.id!==e.id:t!==e)&&((e||S(e))&&this.setOverOut(!1,e),(t||S(t))&&this.setOverOut(!0,t),this.cache.add(Tt,t))},getDraggableSelection:function(){var t=this,e=t.config;return e.interaction_enabled&&e.data_selection_draggable&&t.drag?Object(Pt.drag)().on("drag",(function(){t.drag(Object(s.mouse)(this))})).on("start",(function(){t.dragstart(Object(s.mouse)(this))})).on("end",(function(){t.dragend()})):function(){}},dispatchEvent:function(t,e,i){var n=this.state.hasRadar,a=this.$el,r=a.main,s=a.radar,c=this.isMultipleX(),l=n?"."+o.axis+"-"+e+" text":"."+(c?o.eventRect:o.eventRect+"-"+e),u=(n?s.axes:r).select(l).node(),d=u.getBoundingClientRect(),h=d.width,g=d.left,f=d.top,x=g+(i?i[0]:0)+(c||this.config.axis_rotated?0:h/2),p=f+(i?i[1]:0);J[/^(mouse|click)/.test(t)?"mouse":"touch"](u,t,{screenX:x,screenY:p,clientX:x,clientY:p})}},Ft={generateClass:function(t,e){return" "+t+" "+(t+this.getTargetSelectorSuffix(e))},classText:function(t){return this.generateClass(o.text,t.index)},classTexts:function(t){return this.generateClass(o.texts,t.id)},classShape:function(t){return this.generateClass(o.shape,t.index)},classShapes:function(t){return this.generateClass(o.shapes,t.id)},generateExtraLineClass:function(){var t=this.config.line_classes||[],e=[];return function(i){var n=i.id||i.data&&i.data.id||i;return e.indexOf(n)<0&&e.push(n),t[e.indexOf(n)%t.length]}},classLine:function(t){return this.classShape(t)+this.generateClass(o.line,t.id)},classLines:function(t){return this.classShapes(t)+this.generateClass(o.lines,t.id)},classCircle:function(t){return this.classShape(t)+this.generateClass(o.circle,t.index)},classCircles:function(t){return this.classShapes(t)+this.generateClass(o.circles,t.id)},classBar:function(t){return this.classShape(t)+this.generateClass(o.bar,t.index)},classBars:function(t){return this.classShapes(t)+this.generateClass(o.bars,t.id)},classArc:function(t){return this.classShape(t.data)+this.generateClass(o.arc,t.data.id)},classArcs:function(t){return this.classShapes(t.data)+this.generateClass(o.arcs,t.data.id)},classArea:function(t){return this.classShape(t)+this.generateClass(o.area,t.id)},classAreas:function(t){return this.classShapes(t)+this.generateClass(o.areas,t.id)},classRegion:function(t,e){return this.generateClass(o.region,e)+" "+("class"in t?t.class:"")},classEvent:function(t){return this.generateClass(o.eventRect,t.index)},classTarget:function(t){var e=this.config.data_classes[t],i="";return e&&(i=" "+o.target+"-"+e),this.generateClass(o.target,t)+i},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" "+(this.state.focusedTargetIds.indexOf(t.id)>=0?o.focused:"")},classDefocused:function(t){return" "+(this.state.defocusedTargetIds.indexOf(t.id)>=0?o.defocused:"")},classChartText:function(t){return o.chartText+this.classTarget(t.id)},classChartLine:function(t){return o.chartLine+this.classTarget(t.id)},classChartBar:function(t){return o.chartBar+this.classTarget(t.id)},classChartArc:function(t){return o.chartArc+this.classTarget(t.data.id)},classChartRadar:function(t){return o.chartRadar+this.classTarget(t.id)},getTargetSelectorSuffix:function(t){return t||0===t?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},selectorTarget:function(t,e){var i=e||"",n=this.getTargetSelectorSuffix(t);return i+"."+(o.target+n)+", "+i+"."+(o.circles+n)},selectorTargets:function(t,e){var i=this,n=t||[];return n.length?n.map((function(t){return i.selectorTarget(t,e)})):null},selectorLegend:function(t){return"."+(o.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return t&&t.length?t.map((function(t){return e.selectorLegend(t)})):null}},Bt=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Nt={getColorFromCss:function(){var t=pt,e=w.body,i=e[t];if(!i){var n=w.createElement("span");n.className=o.colorPattern,n.style.display="none",e.appendChild(n);var a=T.getComputedStyle(n).backgroundImage;n.parentNode.removeChild(n),a.indexOf(";")>-1&&(i=a.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map((function(t){return t.trim().replace(/[\"'\s]/g,"")})).filter(Boolean),e[t]=i)}return i},generateColor:function(){var t=this,e=t.config,i=e.data_colors,n=e.data_color,a=[],r=D(e.color_pattern)?e.color_pattern:Object(Ot.scaleOrdinal)(t.getColorFromCss()||Bt).range(),o=r;if(k(e.color_tiles)){var c=e.color_tiles.bind(t.api)(),l=r.map((function(e,i){var n=e.replace(/[#\(\)\s,]/g,""),a=t.state.datetimeId+"-pattern-"+n+"-"+i;return function(t,e,i){var n=Object(s.select)(t.cloneNode(!0));return n.attr("id",i).insert("rect",":first-child").attr("width",n.attr("width")).attr("height",n.attr("height")).style("fill",e),{id:i,node:n.node()}}(c[i%c.length],e,a)}));r=l.map((function(t){return"url(#"+t.id+")"})),t.patterns=l}return function(s){var c,l=s.id||s.data&&s.data.id||s,u=t.isTypeOf(l,["line","spline","step"])||!e.data_types[l];return k(i[l])?c=i[l].bind(t.api)(s):i[l]?c=i[l]:(a.indexOf(l)<0&&a.push(l),c=u?o[a.indexOf(l)%o.length]:r[a.indexOf(l)%r.length],i[l]=c),k(n)?n.bind(t.api)(c,s):c}},generateLevelColor:function(){var t=this.config,e=t.color_pattern,i=t.color_threshold,n="value"===i.unit,a=i.max||100,r=i.values&&i.values.length?i.values:[];return D(i)?function(t){for(var i=n?t:100*t/a,s=e[e.length-1],o=0,c=r.length;o<c;o++)if(i<=r[o]){s=e[o];break}return s}:null},setOverColor:function(t,e){var i=this,n=i.config,a=i.$el.main,r=n.color_onover,s=t?r:i.color;P(s)?s=function(t){var e=t.id;return e in r?r[e]:i.color(e)}:L(s)?s=function(){return r}:k(r)&&(s=s.bind(i.api)),P(e)?a.selectAll("."+o.arc+i.getTargetSelectorSuffix(e.id)).style("fill",s(e)):a.selectAll("."+o.shape+"-"+e).style("fill",s)}},Yt={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step"},$t={Area:[Yt.AREA,Yt.AREA_SPLINE,Yt.AREA_SPLINE_RANGE,Yt.AREA_LINE_RANGE,Yt.AREA_STEP],AreaRange:[Yt.AREA_SPLINE_RANGE,Yt.AREA_LINE_RANGE],Arc:[Yt.PIE,Yt.DONUT,Yt.GAUGE,Yt.RADAR],Line:[Yt.LINE,Yt.SPLINE,Yt.AREA,Yt.AREA_SPLINE,Yt.AREA_SPLINE_RANGE,Yt.AREA_LINE_RANGE,Yt.STEP,Yt.AREA_STEP],Step:[Yt.STEP,Yt.AREA_STEP],Spline:[Yt.SPLINE,Yt.AREA_SPLINE,Yt.AREA_SPLINE_RANGE]},Vt={getYDomainMinMax:function(t,e){var i=this,n=i.axis,a=i.config,r="min"===e,s=a.data_groups,o=i.mapToIds(t),c=i.getValuesAsIdKeyed(t);return s.length>0&&function(){for(var e,a=i["has"+(r?"Negative":"Positive")+"ValueInTargets"](t),l=function(t,i){if(0===(i=i.filter((function(t){return o.indexOf(t)>=0}))).length)return e=i,"continue";var s=i[0],l=n.getId(s);a&&c[s]&&(c[s]=c[s].map((function(t){return(r?t<0:t>0)?t:0})));for(var u,d=function(t,e){if(!c[e])return"continue";var i=n.getId(e);c[e].forEach((function(t,e){var n=+t;i!==l||a&&(r?n>0:n<0)||(c[s][e]+=n)}))},h=1;u=i[h];h++)d(0,u);e=i},u=0;e=s[u];u++)l(0,e)}(),K(e,Object.keys(c).map((function(t){return K(e,c[t])})))},getYDomainMin:function(t){return this.getYDomainMinMax(t,"min")},getYDomainMax:function(t){return this.getYDomainMinMax(t,"max")},isHiddenTargetWithYDomain:function(t){var e=this;return e.state.hiddenTargetIds.some((function(i){return e.axis.getId(i)===t}))},getYDomain:function(t,e,i){var n=this,a=n.axis,r=n.config,s=n.scale,o="axis_"+e;if(n.isStackNormalized())return[0,100];var c=t.filter((function(t){return a.getId(t.id)===e})),l=i?n.filterByXDomain(c,i):c;if(0===l.length)return n.isHiddenTargetWithYDomain(e)?s[e].domain():"y2"===e?s.y.domain():n.getYDomain(t,"y2",i);var u=r[o+"_min"],d=r[o+"_max"],h=n.getYDomainMin(l),g=n.getYDomainMax(l),f=r[o+"_center"],x=[Yt.BAR,Yt.BUBBLE,Yt.SCATTER].concat($t.Line).some((function(t){var e=t.indexOf("area")>-1?"area":t;return n.hasType(t,l)&&r[e+"_zerobased"]})),p=r[o+"_inverted"],_=n.hasDataLabel()&&r.axis_rotated,v=n.hasDataLabel()&&!r.axis_rotated;h=A(u)?u:A(d)?h<d?h:d-10:h,g=A(d)?d:A(u)?u<g?g:u+10:g,isNaN(h)&&(h=0),isNaN(g)&&(g=h),h===g&&(h<0?g=0:h=0);var m=h>=0&&g>=0,b=h<=0&&g<=0;(A(u)&&m||A(d)&&b)&&(x=!1),x&&(m&&(h=0),b&&(g=0));var y,T=Math.abs(g-h),w={top:.1*T,bottom:.1*T};if(I(f)){var k=Math.max(Math.abs(h),Math.abs(g));g=f+k,h=f-k}if(_){var L=(y=s.y.range())[1]-y[0],S=n.getDataLabelLength(h,g,"width").map((function(t){return t/L}));["bottom","top"].forEach((function(t,e){w[t]+=T*(S[e]/(1-S[0]-S[1]))}))}else if(v){var O=n.getDataLabelLength(h,g,"height");["bottom","top"].forEach((function(t,e){w[t]+=a.convertPixelsToAxisPadding(O[e],T)}))}var C=r[o+"_padding"];D(C)&&["bottom","top"].forEach((function(t){w[t]=a.getPadding(C,t,w[t],T)})),x&&(m&&(w.bottom=h),b&&(w.top=-g));var E=[h-w.bottom,g+w.top];return p?E.reverse():E},getXDomainMinMax:function(t,e){var i=this.config["axis_x_"+e],n=K(e,t.map((function(t){return K(e,t.values.map((function(t){return t.x})))}))),a=P(i)?i.value:i;return a=I(a)&&this.axis.isTimeSeries()?tt(a):a,P(i)&&i.fit&&("min"===e&&a<n||"max"===e&&a>n)&&(a=void 0),I(a)?a:n},getXDomainMin:function(t){return this.getXDomainMinMax(t,"min")},getXDomainMax:function(t){return this.getXDomainMinMax(t,"max")},getXDomainPadding:function(t){var e,i,n=this.axis,a=this.config,r=t[1]-t[0],s=a.axis_x_padding;n.isCategorized()?i=0:this.hasType("bar")?i=(e=this.getMaxDataCount())>1?r/(e-1)/2:.5:i=.01*r;var o=i,c=i;return P(s)&&D(s)?(o=A(s.left)?s.left:i,c=A(s.right)?s.right:i):S(a.axis_x_padding)&&(o=s,c=s),{left:o,right:c}},getXDomain:function(t){var e=this,i=e.axis.isCategorized(),n=e.axis.isTimeSeries(),a=[e.getXDomainMin(t),e.getXDomainMax(t)],r=e.getXDomainPadding(a),s=a[0],o=a[1],c=0,l=0;return s-o!=0||i||(n?(s=new Date(.5*s.getTime()),o=new Date(1.5*o.getTime())):(s=0===s?1:.5*s,o=0===o?-1:1.5*o)),(s||0===s)&&(c=n?new Date(s.getTime()-r.left):s-r.left),(o||0===o)&&(l=n?new Date(o.getTime()+r.right):o+r.right),[c,l]},updateXDomain:function(t,e,i,n,a){var r,s=this,o=s.config,c=s.org,l=s.scale,u=l.x,d=l.subX,h=o.zoom_enabled;if(i&&(u.domain(a||Z(s.getXDomain(t))),c.xDomain=u.domain(),h&&s.zoom.updateScaleExtent(),d.domain(u.domain()),s.brush&&s.brush.scale(d)),e){var g=!a&&s.brush&&((r=Y(s))&&r[0]!==r[1])?Y(s).map(d.invert):c.xDomain;u.domain(g),h&&s.zoom.updateScaleExtent()}return n&&u.domain(s.trimXDomain(u.orgDomain())),u.domain()},trimXDomain:function(t){var e=this.getZoomDomain(),i=e[0],n=e[1];return t[0]<=i&&(t[1]=+t[1]+(i-t[0]),t[0]=i),n<=t[1]&&(t[0]=+t[0]-(t[1]-n),t[1]=n),t}};function jt(t,e,i){var n=t.config,a="axis_"+e+"_tick_format";return(n[a]?n[a]:t.defaultValueFormat)(i)}var Ht={getYFormat:function(t){var e=this,i=e.yFormat,n=e.y2Format;return t&&!e.hasType("gauge")&&(i=e.defaultArcValueFormat,n=e.defaultArcValueFormat),function(t,a,r){return(e.axis&&"y2"===e.axis.getId(r)?n:i).call(e,t,a)}},yFormat:function(t){return jt(this,"y",t)},y2Format:function(t){return jt(this,"y2",t)},defaultValueFormat:function(t){return A(t)?+t:""},defaultArcValueFormat:function(t,e){return(100*e).toFixed(1)+"%"},dataLabelFormat:function(t){var e=this.config.data_labels,i=function(t){return A(t)?+t:""},n=i;return k(e.format)?n=e.format:X(e.format)&&(n=e.format[t]?!0===e.format[t]?i:e.format[t]:function(){return""}),n.bind(this.api)}},Wt={initLegend:function(){var t=this,e=t.config,i=t.$el;t.legendItemTextBox={},t.state.legendHasRendered=!1,e.legend_show?(!e.legend_contents_bindto&&(i.legend=t.$el.svg.append("g").attr("transform",t.getTranslate("legend"))),t.updateLegend()):t.state.hiddenLegendIds=t.mapToIds(t.data.targets)},updateLegend:function(t,e,i){var n=this,a=n.config,r=n.state,s=n.scale,c=n.$el,l=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};l.withTransition=M(l,"withTransition",!0),l.withTransitionForTransform=M(l,"withTransitionForTransform",!0),a.legend_contents_bindto&&a.legend_contents_template?n.updateLegendTemplate():n.updateLegendElement(t||n.mapToIds(n.data.targets),l,i),c.legend.selectAll("."+o.legendItem).classed(o.legendItemHidden,(function(t){return!n.isTargetToShow(t)})),n.updateScales(!1,!s.zoom),n.updateSvgSize(),n.transformAll(l.withTransitionForTransform,i),r.legendHasRendered=!0},updateLegendTemplate:function(){var t=this,e=t.config,i=t.$el,n=Object(s.select)(e.legend_contents_bindto),a=e.legend_contents_template;if(!n.empty()){var r=t.mapToIds(t.data.targets),o=[],c="";r.forEach((function(e){var i=k(a)?a.bind(t.api)(e,t.color(e),t.api.data(e)[0].values):Q(a,{COLOR:t.color(e),TITLE:e});i&&(o.push(e),c+=i)}));var l=n.html(c).selectAll((function(){return this.childNodes})).data(o);t.setLegendItem(l),i.legend=n}},updateSizeForLegend:function(t){var e=this,i=e.config,n=e.state,a=n.isLegendTop,r=n.isLegendLeft,s=n.isLegendRight,o=n.isLegendInset,c=n.current,l=t.width,u=t.height,d={top:a?e.getCurrentPaddingTop()+i.legend_inset_y+5.5:c.height-u-e.getCurrentPaddingBottom()-i.legend_inset_y,left:r?e.getCurrentPaddingLeft()+i.legend_inset_x+.5:c.width-l-e.getCurrentPaddingRight()-i.legend_inset_x+.5};e.state.margin3={top:s?0:o?d.top:c.height-u,right:NaN,bottom:0,left:s?c.width-l:o?d.left:0}},transformLegend:function(t){var e=this.$el.legend;(t?e.transition():e).attr("transform",this.getTranslate("legend"))},updateLegendStep:function(t){this.state.legendStep=t},updateLegendItemWidth:function(t){this.state.legendItemWidth=t},updateLegendItemHeight:function(t){this.state.legendItemHeight=t},updateLegendItemColor:function(t,e){this.$el.legend.select("."+o.legendItem+"-"+t+" line").style("stroke",e)},getLegendWidth:function(){var t=this.state,e=t.current.width,i=t.isLegendRight,n=t.isLegendInset,a=t.legendItemWidth,r=t.legendStep;return this.config.legend_show?i||n?a*(r+1):e:0},getLegendHeight:function(){var t=this.state,e=t.current,i=t.isLegendRight,n=t.legendItemHeight,a=t.legendStep;return this.config.legend_show?i?e.height:Math.max(20,n)*(a+1):0},opacityForLegend:function(t){return t.classed(o.legendItemHidden)?null:"1"},opacityForUnfocusedLegend:function(t){return t.classed(o.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var i=this,n=i.$el.legend,a=i.mapToTargetIds(t);n&&n.selectAll("."+o.legendItem).filter((function(t){return a.indexOf(t)>=0})).classed(o.legendItemFocused,e).transition().duration(100).style("opacity",(function(){return(e?i.opacityForLegend:i.opacityForUnfocusedLegend).call(i,Object(s.select)(this))}))},revertLegend:function(){var t=this,e=t.$el.legend;e&&e.selectAll("."+o.legendItem).classed(o.legendItemFocused,!1).transition().duration(100).style("opacity",(function(){return t.opacityForLegend(Object(s.select)(this))}))},showLegend:function(t){var e=this,i=e.config,n=e.$el;i.legend_show||(i.legend_show=!0,n.legend?n.legend.style("visibility","visible"):e.initLegend(),!e.state.legendHasRendered&&e.updateLegend()),e.removeHiddenLegendIds(t),n.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",(function(){return e.opacityForLegend(Object(s.select)(this))}))},hideLegend:function(t){var e=this.config,i=this.$el.legend;e.legend_show&&R(t)&&(e.legend_show=!1,i.style("visibility","hidden")),this.addHiddenLegendIds(t),i.selectAll(this.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(t,e){var i,n=this.cache,a=bt;return t&&(!(i=n.get(a)||{})[t]&&(i[t]=this.getTextRect(e,o.legendItem),n.add(a,i)),i=i[t]),i},setLegendItem:function(t){var e=this,i=e.api,n=e.config,a=e.state,r="touch"===a.inputType,c=e.hasType("gauge");t.attr("class",(function(t){var i=Object(s.select)(this);return(!i.empty()&&i.attr("class")||"")+e.generateClass(o.legendItem,t)})).style("visibility",(function(t){return e.isLegendToShow(t)?"visible":"hidden"})).style("cursor","pointer").on("click",(function(t){F(n.legend_item_onclick,i,t)||(s.event.altKey?(i.hide(),i.show(t)):(i.toggle(t),!r&&e.isTargetToShow(t)?i.focus(t):i.revert())),r&&e.hideTooltip()})),r||t.on("mouseout",(function(t){F(n.legend_item_onout,i,t)||(Object(s.select)(this).classed(o.legendItemFocused,!1),c&&e.undoMarkOverlapped(e,"."+o.gaugeValue),e.api.revert())})).on("mouseover",(function(t){F(n.legend_item_onover,i,t)||(Object(s.select)(this).classed(o.legendItemFocused,!0),c&&e.markOverlapped(t,e,"."+o.gaugeValue),!a.transiting&&e.isTargetToShow(t)&&i.focus(t))}))},updateLegendElement:function(t,e){var i,n,a,r=this,c=r.config,l=r.state,u=r.$el.legend,d=c.legend_item_tile_width+5,h=0,g=0,f=0,x={},p={},_={},v=[0],m={},b=0,y=l.isLegendRight||l.isLegendInset,T=t.filter((function(t){return!I(c.data_names[t])||null!==c.data_names[t]})),A=e.withTransition,k=function(t,e,i){var n,a=i===T.length-1,s=r.getLegendItemTextBox(e,t),o=s.width+d+(a&&!y?0:10)+c.legend_padding,u=s.height+4,w=y?u:o,A=y?r.getLegendHeight():r.getLegendWidth(),k=function(t,e){e||(n=(A-f-w)/2)<10&&(n=(A-w)/2,f=0,b++),m[t]=b,v[b]=l.isLegendInset?10:n,x[t]=f,f+=w};if(0===i&&(f=0,b=0,h=0,g=0),c.legend_show&&!r.isLegendToShow(e))return p[e]=0,_[e]=0,m[e]=0,void(x[e]=0);p[e]=o,_[e]=u,(!h||o>=h)&&(h=o),(!g||u>=g)&&(g=u);var L=y?g:h;c.legend_equally?(Object.keys(p).forEach((function(t){return p[t]=h})),Object.keys(_).forEach((function(t){return _[t]=g})),(n=(A-L*T.length)/2)<10?(f=0,b=0,T.forEach((function(t){return k(t)}))):k(e,!0)):k(e)};l.isLegendInset&&(b=c.legend_inset_step?c.legend_inset_step:T.length,r.updateLegendStep(b)),l.isLegendRight?(i=function(t){return h*m[t]},n=function(t){return v[m[t]]+x[t]}):l.isLegendInset?(i=function(t){return h*m[t]+10},n=function(t){return v[m[t]]+x[t]}):(i=function(t){return v[m[t]]+x[t]},n=function(t){return g*m[t]});var L=function(t,e){return i(t,e)+4+c.legend_item_tile_width},S=function(t,e){return i(t,e)},O=function(t,e){return i(t,e)-2},C=function(t,e){return i(t,e)-2+c.legend_item_tile_width},E=function(t,e){return n(t,e)+9},X=function(t,e){return n(t,e)-5},R=function(t,e){return n(t,e)+4},z=u.selectAll("."+o.legendItem).data(T).enter().append("g");r.setLegendItem(z),z.append("text").text((function(t){return I(c.data_names[t])?c.data_names[t]:t})).each((function(t,e){k(this,t,e)})).style("pointer-events","none").attr("x",y?L:-200).attr("y",y?-200:E),z.append("rect").attr("class",o.legendItemEvent).style("fill-opacity","0").attr("x",y?S:-200).attr("y",y?-200:X);var P=c.legend_usePoint;if(P){var M=[];z.append((function(t){var e=D(c.point_pattern)?c.point_pattern:[c.point_type];-1===M.indexOf(t)&&M.push(t);var i=e[M.indexOf(t)%e.length];return"rectangle"===i&&(i="rect"),w.createElementNS(s.namespaces.svg,r.hasValidPointType(i)?i:"use")})).attr("class",o.legendItemPoint).style("fill",(function(t){return r.color(t)})).style("pointer-events","none").attr("href",(function(t,e,i){return"use"===i[e].nodeName.toLowerCase()?"#"+l.datetimeId+"-point-"+t:void 0}))}else z.append("line").attr("class",o.legendItemTile).style("stroke",r.color).style("pointer-events","none").attr("x1",y?O:-200).attr("y1",y?-200:R).attr("x2",y?C:-200).attr("y2",y?-200:R).attr("stroke-width",c.legend_item_tile_height);a=u.select("."+o.legendBackground+" rect"),l.isLegendInset&&h>0&&0===a.size()&&(a=u.insert("g","."+o.legendItem).attr("class",o.legendBackground).append("rect"));var F=u.selectAll("text").data(T).text((function(t){return I(c.data_names[t])?c.data_names[t]:t})).each((function(t,e){k(this,t,e)}));(A?F.transition():F).attr("x",L).attr("y",E);var B=u.selectAll("rect."+o.legendItemEvent).data(T);if((A?B.transition():B).attr("width",(function(t){return p[t]})).attr("height",(function(t){return _[t]})).attr("x",S).attr("y",X),P){var N=u.selectAll("."+o.legendItemPoint).data(T);(A?N.transition():N).each((function(){var t,e,i,n=this.nodeName.toLowerCase(),a=c.point_r,r="x",o="y",l=2,u=2.5;if("circle"===n){var d=.2*a;r="cx",o="cy",t=a+d,l=2*a,u=-d}else if("rect"===n){var h=2.5*a;e=h,i=h,u=3}Object(s.select)(this).attr(r,(function(t){return O(t)+l})).attr(o,(function(t){return R(t)-u})).attr("r",t).attr("width",e).attr("height",i)}))}else{var Y=u.selectAll("line."+o.legendItemTile).data(T);(A?Y.transition():Y).style("stroke",r.levelColor?function(t){return r.levelColor(r.cache.get(t).values[0].value)}:r.color).attr("x1",O).attr("y1",R).attr("x2",C).attr("y2",R)}a&&(A?a.transition():a).attr("height",r.getLegendHeight()-12).attr("width",h*(b+1)+10),r.updateLegendItemWidth(h),r.updateLegendItemHeight(g),r.updateLegendStep(b)}},Ut=i(9),Gt={redraw:function(t,e){void 0===t&&(t={});var i=this,n=i.config,a=i.state,r=i.$el,s=r.main,c=i.filterTargetsToShow(i.data.targets),l=t.initializing,u=t.flow,d=i.getWithOption(t),h=d.Transition?n.transition_duration:0,g=d.TransitionForExit?h:0,f=d.TransitionForAxis?h:0,x=e||i.axis&&i.axis.generateTransitions(f);i.updateSizes(l),d.Legend&&n.legend_show?i.updateLegend(i.mapToIds(i.data.targets),t,x):d.Dimension&&i.updateDimension(!0),i.hasDataLabel()&&i.updateText(g),(!i.hasArcType()||a.hasRadar)&&i.updateCircleY(),!a.resizing&&(i.hasPointType()||a.hasRadar)&&i.updateCircle(),a.hasAxis?(i.axis.redrawAxis(c,d,x,u,l),n.data_empty_label_text&&s.select("text."+o.text+"."+o.empty).attr("x",a.width/2).attr("y",a.height/2).text(n.data_empty_label_text).style("display",c.length?"none":null),i.hasGrid()&&i.updateGrid(h),n.regions.length&&i.updateRegion(h),i.hasType("bar")&&i.updateBar(g),i.hasTypeOf("Line")&&i.updateLine(g),i.hasTypeOf("Area")&&i.updateArea(g),r.text&&s.selectAll("."+o.selectedCircles).filter(i.isBarType.bind(i)).selectAll("circle").remove(),n.interaction_enabled&&!u&&d.EventRect&&i.bindZoomEvent()):(r.arcs&&i.redrawArc(h,g,d.Transform),r.radar&&i.redrawRadar(g)),i.redrawTitle&&i.redrawTitle(),l&&i.updateTypesElements(),i.generateRedrawList(c,u,h,d.Subchart),i.callPluginHook("$redraw",t,h)},generateRedrawList:function(t,e,i,n){var a=this,r=a.config,s=a.state,o=a.getDrawShape();s.hasAxis&&r.subchart_show&&a.redrawSubchart(n,i,o);var c,l,u=e&&a.generateFlow({targets:t,flow:e,duration:e.duration,shape:o,xv:a.xv.bind(a)}),d=(i||u)&&!w.hidden,h=a.getRedrawList(o,e,u,d),g=e||r.onrendered?function(){u&&u(),F(r.onrendered,a.api)}:null;if(g)if(d&&h.length){var f=(c=[],(l=function(t,e){var i;!function t(){for(var n,a=0,r=0;n=c[r];r++)if(!0===n||n.empty&&n.empty())a++;else try{n.transition()}catch(t){a++}i&&Lt(i),a===c.length?e&&e():i=kt(t,50)}()}).add=function(t){z(t)?c=c.concat(t):c.push(t)},l);Object(Ut.transition)().duration(i).each((function(){h.reduce((function(t,e){return t.concat(e)}),[]).forEach((function(t){return f.add(t)}))})).call(f,g)}else s.transiting||g();a.mapToIds(a.data.targets).forEach((function(t){s.withoutFadeIn[t]=!0}))},getRedrawList:function(t,e,i,n){var a=this,r=a.config,s=a.state,o=s.hasAxis,c=s.hasRadar,l=t.pos,u=l.cx,d=l.cy,h=l.xForText,g=l.yForText,f=[];if(o){var x=t.type,p=x.area,_=x.bar,v=x.line;(r.grid_x_lines.length||r.grid_y_lines.length)&&f.push(a.redrawGrid(n)),r.regions.length&&f.push(a.redrawRegion(n)),a.hasTypeOf("Line")&&f.push(a.redrawLine(v,n)),a.hasTypeOf("Area")&&f.push(a.redrawArea(p,n)),a.hasType("bar")&&f.push(a.redrawBar(_,n)),e||f.push(a.updateGridFocus())}return(!a.hasArcType()||c)&&D(r.data_labels)&&f.push(a.redrawText(h,g,e,n)),(a.hasPointType()||c)&&!r.point_focus_only&&f.push(a.redrawCircle(u,d,n,i)),f},updateAndRedraw:function(t){void 0===t&&(t={});var e,i=this,n=i.config,a=i.state;t.withTransition=M(t,"withTransition",!0),t.withTransform=M(t,"withTransform",!1),t.withLegend=M(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=M(t,"withTransitionForTransform",t.withTransition),t.withLegend&&n.legend_show||(a.hasAxis&&(e=i.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0)),i.updateScales(),i.updateSvgSize(),i.transformAll(t.withTransitionForTransform,e)),i.redraw(t,e)},redrawWithoutRescale:function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}},qt={getScale:function(t,e,i){return(i?Object(Ot.scaleTime)():Object(Ot.scaleLinear)()).range([t,e])},getXScale:function(t,e,i,n){var a=this.scale.zoom||this.getScale(t,e,this.axis.isTimeSeries());return this.getCustomizedScale(i?a.domain(i):a,n)},getYScale:function(t,e,i){var n=this.getScale(t,e,this.axis.isTimeSeriesY());return i&&n.domain(i),n},getYScaleById:function(t,e){void 0===e&&(e=!1);var i="y2"===this.axis.getId(t),n=e?i?"subY2":"subY":i?"y2":"y";return this.scale[n]},getCustomizedScale:function(t,e){var i=this,n=e||function(){return i.axis.x.tickOffset()},a=function(e,i){var a=t(e)+n();return i?a:Math.ceil(a)};for(var r in t)a[r]=t[r];return a.orgDomain=function(){return t.domain()},a.orgScale=function(){return t},i.axis.isCategorized()&&(a.domain=function(e){var i=e;return arguments.length?(t.domain(i),a):[(i=this.orgDomain())[0],i[1]+1]}),a},updateScales:function(t,e){void 0===e&&(e=!0);var i=this,n=i.axis,a=i.config,r=i.format,s=i.org,o=i.scale,c=i.state,l=c.width,u=c.height,d=c.width2,h=c.height2;if(c.hasAxis){var g=a.axis_rotated,f={x:g?1:0,y:g?0:u,subX:g?1:0,subY:g?0:h},x={x:g?u:l,y:g?l:1,subX:g?u:l,subY:g?d:1},p=e&&o.x&&o.x.orgDomain(),_=e&&s.xDomain;o.x=i.getXScale(f.x,x.x,p,(function(){return n.x.tickOffset()})),o.subX=i.getXScale(f.x,x.x,_,(function(t){return t%1?0:n.subX.tickOffset()})),r.xAxisTick=n.getXAxisTickFormat(),n.setAxis("x",o.x,a.axis_x_tick_outer,t),a.subchart_show&&n.setAxis("subX",o.subX,a.axis_x_tick_outer,t),o.y=i.getYScale(f.y,x.y,o.y?o.y.domain():a.axis_y_default),o.subY=i.getYScale(f.subY,x.subY,o.subY?o.subY.domain():a.axis_y_default),n.setAxis("y",o.y,a.axis_y_tick_outer,t),a.axis_y2_show&&(o.y2=i.getYScale(f.y,x.y,o.y2?o.y2.domain():a.axis_y2_default),o.subY2=i.getYScale(f.subY,x.subY,o.subY2?o.subY2.domain():a.axis_y2_default),n.setAxis("y2",o.y2,a.axis_y2_tick_outer,t))}else i.updateArc&&i.updateArc()},xx:function(t){var e=this.config,i=this.scale,n=i.x,a=i.zoom,r=e.zoom_enabled&&a?a:n;return t?r(A(t.x)?t.x:t):null},xv:function(t){var e=this,i=e.axis,n=e.config,a=e.scale.x,r=e.getBaseValue(t);return i.isTimeSeries()?r=tt.call(e,r):i.isCategorized()&&L(r)&&(r=n.axis_x_categories.indexOf(r)),Math.ceil(a(r))},yv:function(t){var e=this.scale,i=e.y,n=e.y2,a=t.axis&&"y2"===t.axis?n:i;return Math.ceil(a(this.getBaseValue(t)))},subxx:function(t){return t?this.scale.subX(t.x):null}},Zt={setContainerSize:function(){var t=this.state;t.current.width=this.getCurrentWidth(),t.current.height=this.getCurrentHeight()},getCurrentWidth:function(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function(){var t=this.config,e=t.size_height||this.getParentHeight();return e>0?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getAxisSize:function(t){var e=this.config.axis_rotated;return e&&"x"===t||!e&&/y2?/.test(t)?this.getAxisWidthByAxisId(t,!0):this.getHorizontalAxisHeight(t)},getCurrentPaddingTop:function(){var t=this.config,e=this.$el,i=t.axis_y2_axes.length,n=A(t.padding_top)?t.padding_top:0;return e.title&&e.title.node()&&(n+=this.getTitlePadding()),i&&t.axis_rotated&&(n+=this.getHorizontalAxisHeight("y2")*i),n},getCurrentPaddingBottom:function(){var t=this.config,e=t.axis_rotated?"y":"x",i=t["axis_"+e+"_axes"].length;return(A(t.padding_bottom)?t.padding_bottom:0)+(i?this.getHorizontalAxisHeight(e)*i:0)},getCurrentPaddingLeft:function(t){var e=this.config,i=this.state.hasAxis,n=e.axis_rotated,a=n?"x":"y",r=e["axis_"+a+"_axes"].length,s=i?this.getAxisWidthByAxisId(a,t):0;return(A(e.padding_left)?e.padding_left:i&&n?e.axis_x_show?Math.max(C(s),40):1:!i||e.axis_y_show&&!e.axis_y_inner?C(s):this.axis.getAxisLabelPosition("y").isOuter?30:1)+s*r},getCurrentPaddingRight:function(t){void 0===t&&(t=!1);var e=this,i=e.config,n=e.state.isLegendRight?e.getLegendWidth()+20:0,a=i.axis_y2_axes.length,r=e.getAxisWidthByAxisId("y2"),s=t?0:e.axis.getXAxisTickTextY2Overflow(10);return(A(i.padding_right)?i.padding_right+1:e.axis&&i.axis_rotated?10+n:!e.axis||i.axis_y2_show&&!i.axis_y2_inner?Math.max(C(r)+n,s):Math.max(2+n+(e.axis.getAxisLabelPosition("y2").isOuter?20:0),s))+r*a},getParentRectValue:function(t){for(var e,i="offset"+j(t),n=this.$el.chart.node();!e&&n&&"BODY"!==n.tagName;){try{e=n.getBoundingClientRect()[t]}catch(t){i in n&&(e=n[i])}n=n.parentNode}if("width"===t){var a=w.body.offsetWidth;e>a&&(e=a)}return e},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.$el.chart.style("height");return t.indexOf("px")>0?parseInt(t,10):0},getSvgLeft:function(t){var e=this.config,i=this.$el,n=e.axis_rotated||!e.axis_rotated&&!e.axis_y_inner,a=e.axis_rotated?o.axisX:o.axisY,r=i.main.select("."+a).node(),s=r&&n?r.getBoundingClientRect():{right:0},c=i.chart.node().getBoundingClientRect(),l=this.hasArcType(),u=s.right-c.left-(l?0:this.getCurrentPaddingLeft(t));return u>0?u:0},getAxisWidthByAxisId:function(t,e){if(this.axis){var i=this.axis&&this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(i.isInner?20:40)}return 40},getHorizontalAxisHeight:function(t){var e=this,i=e.config,n=e.state,a=n.current,r=n.rotatedPadding,s=n.isLegendRight,o=n.isLegendInset,c=i.axis_rotated,l=30;if("x"===t&&!i.axis_x_show)return 8;if("x"===t&&i.axis_x_height)return i.axis_x_height;if("y"===t&&!i.axis_y_show)return!i.legend_show||s||o?1:10;if("y2"===t&&!i.axis_y2_show)return r.top;var u=e.getAxisTickRotate(t);return("x"===t&&!c||/y2?/.test(t)&&c)&&u&&(l=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-u)/180),!i.axis_x_tick_multiline&&a.height&&l>a.height/2&&(l=a.height/2)),l+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||c?0:-10)},getEventRectWidth:function(){return Math.max(0,this.axis.x.tickInterval())},getAxisTickRotate:function(t){var e=this,i=e.axis,n=e.config,a=e.state,r=e.$el,s=n["axis_"+t+"_tick_rotate"];if("x"===t){var o=i.isCategorized(),c=i.isTimeSeries(),l=o||c,u=0;n.axis_x_tick_fit&&l&&((u=a.current.maxTickWidths.x.ticks.length+(c?-1:1))!==a.axis.x.tickCount&&(a.axis.x.padding=e.axis.getXAxisPadding(u)),a.axis.x.tickCount=u),r.svg&&n.axis_x_tick_fit&&!n.axis_x_tick_multiline&&!n.axis_x_tick_culling&&n.axis_x_tick_autorotate&&l&&(s=e.needToRotateXAxisTickTexts()?n.axis_x_tick_rotate:0)}return s},needToRotateXAxisTickTexts:function(){var t=this.state,e=t.axis,i=t.current.width-this.getCurrentPaddingLeft(!1)-this.getCurrentPaddingRight(!0),n=e.x.tickCount+e.x.padding.left+e.x.padding.right;return this.axis.getMaxTickWidth("x")>(i/n||0)},updateDimension:function(t){var e=this,i=e.config,n=e.state.hasAxis,a=e.$el;n&&!t&&(e.axis.x&&i.axis_rotated?(e.axis.x.create(a.axis.x),e.axis.subX&&e.axis.subX.create(a.axis.subX)):(e.axis.y&&e.axis.y.create(a.axis.y),e.axis.y2&&e.axis.y2.create(a.axis.y2))),e.updateScales(t),e.updateSvgSize(),e.transformAll(!1)},updateSvgSize:function(){var t=this,e=t.state,i=t.$el.svg;if(i.attr("width",e.current.width).attr("height",e.current.height),e.hasAxis){var n=i.select("."+o.brush+" .overlay"),a={width:0,height:0};n.size()&&(a.width=+n.attr("width"),a.height=+n.attr("height")),i.selectAll(["#"+e.clip.id,"#"+e.clip.idGrid]).select("rect").attr("width",e.width).attr("height",e.height),i.select("#"+e.clip.idXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),i.select("#"+e.clip.idYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),e.clip.idSubchart&&i.select("#"+e.clip.idSubchart).select("rect").attr("width",e.width).attr("height",a.height),i.select("."+o.zoomRect).attr("width",e.width).attr("height",e.height)}},updateSizes:function(t){var e=this,i=e.config,n=e.state,a=e.$el.legend,r=i.axis_rotated,s=e.hasArcType();t||e.setContainerSize();var o={width:a?e.getLegendWidth():0,height:a?e.getLegendHeight():0},c=n.isLegendRight||n.isLegendInset?0:o.height,l=r||s?0:e.getHorizontalAxisHeight("x"),u=i.subchart_axis_x_show&&i.subchart_axis_x_tick_text_show?l:30,d=i.subchart_show&&!s?i.subchart_size_height+u:0;n.margin=r?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:s?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+c+e.getCurrentPaddingBottom(),left:d+(s?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:s?0:e.getCurrentPaddingRight(),bottom:l+d+c+e.getCurrentPaddingBottom(),left:s?0:e.getCurrentPaddingLeft()},n.margin2=r?{top:n.margin.top,right:NaN,bottom:20+c,left:e.state.rotatedPadding.left}:{top:n.current.height-d-c,right:NaN,bottom:u+c,left:n.margin.left},n.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(o),n.width=n.current.width-n.margin.left-n.margin.right,n.height=n.current.height-n.margin.top-n.margin.bottom,n.width<0&&(n.width=0),n.height<0&&(n.height=0),n.width2=r?n.margin.left-n.rotatedPadding.left-n.rotatedPadding.right:n.width,n.height2=r?n.height:n.current.height-n.margin2.top-n.margin2.bottom,n.width2<0&&(n.width2=0),n.height2<0&&(n.height2=0),n.arcWidth=n.width-(n.isLegendRight?o.width+10:0),n.arcHeight=n.height-(n.isLegendRight?0:10),e.hasType("gauge")&&!i.gauge_fullCircle&&(n.arcHeight+=n.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),n.isLegendRight&&s&&(n.margin3.left=n.arcWidth/2+1.1*n.radiusExpanded),!s&&i.axis_x_show&&i.axis_x_tick_culling&&e.updateXAxisTickClip()}},Kt={opacityForText:function(){return this.hasDataLabel()?"1":"0"},initText:function(){this.$el.main.select("."+o.chart).append("g").attr("class",o.chartTexts)},updateTargetsForText:function(t){var e=this,i=e.classChartText.bind(e),n=e.classTexts.bind(e),a=e.classFocus.bind(e);e.$el.main.select("."+o.chartTexts).selectAll("."+o.chartText).data(t).attr("class",(function(t){return i(t)+a(t)})).enter().append("g").style("opacity","0").attr("class",i).style("pointer-events","none").append("g").attr("class",n)},updateText:function(t){var e=this,i=this,n=i.config,a=i.$el,r=i.labelishData.bind(i),s=i.classText.bind(i);a.text=a.main.selectAll("."+o.texts).selectAll("."+o.text).data((function(t){return e.isRadarType(t)?t.values:r(t)})),a.text.exit().transition().duration(t).style("fill-opacity","0").remove(),a.text=a.text.enter().append("text").merge(i.$el.text).attr("class",s).attr("text-anchor",(function(t){return n.axis_rotated?t.value<0?"end":"start":"middle"})).style("fill",i.updateTextColor.bind(i)).style("fill-opacity","0").text((function(t,e,n){var a=i.isBubbleZType(t)?i.getBubbleZData(t.value,"z"):t.value;return i.dataLabelFormat(t.id)(a,t.id,e,n)}))},updateTextColor:function(t){var e,i=this.config.data_labels_colors;return L(i)?e=i:P(i)&&(e=i[t.id]),e||this.color(t)},redrawText:function(t,e,i,n){var a=this,r=function(t){void 0===t&&(t=!0);var e=Math.random();return t?e+"":e}(),o=i?0:a.opacityForText.bind(a);return a.$el.text.each((function(i,c){var l=this,u=Object(s.select)(this);(n&&u.attr("x")?u.transition(r):u).attr("x",t.bind(this)(i,c)).attr("y",(function(t){return e.bind(l)(t,c)})).style("fill",a.updateTextColor.bind(a)).style("fill-opacity",o)})),!0},getTextRect:function(t,e){var i=t.node?t.node():t;/text/i.test(i.tagName)||(i=i.querySelector("text"));var n=i.textContent,a=wt+"-"+n.replace(/\W/g,"_"),r=this.cache.get(a);return r||(this.$el.svg.append("text").style("visibility","hidden").style("font",Object(s.select)(i).style("font")).classed(e,!0).text(n).call((function(t){r=$(t.node())})).remove(),this.cache.add(a,r)),r},generateXYForText:function(t,e){var i=this,n=Object.keys(t),a={},r=e?i.getXForText:i.getYForText;return i.hasType("radar")&&n.push("radar"),n.forEach((function(e){a[e]=i["generateGet"+j(e)+"Points"](t[e],!1)})),function(t,e){var n=(i.isAreaType(t)?"area":i.isBarType(t)&&"bar")||i.isRadarType(t)&&"radar"||"line";return r.call(i,a[n](t,e),t,this)}},getCenteredTextPos:function(t,e,i){var n=this.config,a=n.axis_rotated;if(n.data_labels.centered&&this.isBarType(t)){var r=$(i),s=t.value>=0;if(a){var o=(s?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+r.width/2;return s?-o-3:o+2}var c=(s?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+r.height/2;return s?c:-c-2}return 0},getTextPos:function(t,e){var i=this.config.data_labels_position;return(t in i?i[t]:i)[e]||0},getXForText:function(t,e,i){var n,a,r=this,s=r.config,o=r.state,c=s.axis_rotated;if(c?(a=r.isBarType(e)?4:6,n=t[2][1]+a*(e.value<0?-1:1)):n=r.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value)if(n>o.width){var l=$(i).width;n=o.width-l}else n<0&&(n=4);return c&&(n+=r.getCenteredTextPos(e,t,i)),n+r.getTextPos(e.id,"x")},getYForText:function(t,e,i){var n,a=this,r=a.config,s=a.state,o=r.axis_rotated,c=r.point_r,l=$(i),u=3;if(o)n=(t[0][0]+t[2][0]+.6*l.height)/2;else if(n=t[2][1],S(c)&&c>5&&(a.isLineType(e)||a.isScatterType(e))&&(u+=r.point_r/2.3),e.value<0||0===e.value&&!s.hasPositiveValue&&s.hasNegativeValue)n+=l.height+(a.isBarType(e)?-u:u);else{var d=2*-u;a.isBarType(e)?d=-u:a.isBubbleType(e)&&(d=u),n+=d}if(null===e.value&&!o){var h=l.height;n<h?n=h:n>s.height&&(n=s.height-4)}return o||(n+=a.getCenteredTextPos(e,t,i)),n+a.getTextPos(e.id,"y")},markOverlapped:function(t,e,i){var n=e.$el.arcs.selectAll(i),a=n.filter((function(e){return e.data.id!==t})),r=n.filter((function(e){return e.data.id===t})),c=W(r.node()),l=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))};r.node()&&a.each((function(){var t=W(this),e=Object(s.select)(this),i=l(c.e,c.f)>l(t.e,t.f)?r:e,n=Math.ceil(Math.abs(c.e-t.e))<Math.ceil(i.node().getComputedTextLength()),a=Math.ceil(Math.abs(c.f-t.f))<parseInt(r.style("font-size"),0);e.classed(o.TextOverlapping,n&&a)}))},undoMarkOverlapped:function(t,e){t.$el.arcs.selectAll(e).each((function(){Object(s.selectAll)([this,this.previousSibling]).classed(o.TextOverlapping,!1)}))}};function Jt(t,e){void 0===t&&(t="left");var i=S(e);return t.indexOf("center")>-1?i?e/2:"middle":t.indexOf("right")>-1?i?e:"end":i?0:"start"}var Qt={initTitle:function(){var t=this.config,e=this.$el;t.title_text&&(e.title=e.svg.append("g"),function(t,e,i,n){if(void 0===i&&(i=[-1,1]),void 0===n&&(n=!1),t&&L(e))if(-1===e.indexOf("\n"))t.text(e);else{var a=[t.text(),e].map((function(t){return t.replace(/[\s\n]/g,"")}));if(a[0]!==a[1]){var r=e.split("\n"),s=n?r.length-1:1;t.html(""),r.forEach((function(e,n){t.append("tspan").attr("x",0).attr("dy",(0===n?i[0]*s:i[1])+"em").text(e)}))}}}(e.title.append("text").style("text-anchor",Jt(t.title_position)).attr("class",o.title),t.title_text,[.3,1.5]))},redrawTitle:function(){var t=this,e=t.config,i=t.state.current,n=t.$el.title;if(n){var a=t.yForTitle.call(t);/g/i.test(n.node().tagName)?n.attr("transform","translate("+Jt(e.title_position,i.width)+", "+a+")"):n.attr("x",t.xForTitle.call(t)).attr("y",a)}},xForTitle:function(){var t,e=this.config,i=this.state.current,n=e.title_position||"left",a=this.getTextRect(this.$el.title,o.title).width;return/(right|center)/.test(n)?(t=i.width-a,n.indexOf("right")>=0?t=i.width-a-e.title_padding.right:n.indexOf("center")>=0&&(t=(i.width-a)/2)):t=e.title_padding.left||0,t},yForTitle:function(){return(this.config.title_padding.top||0)+this.getTextRect(this.$el.title,o.title).height},getTitlePadding:function(){return this.yForTitle()+(this.config.title_padding.bottom||0)}},te={initTooltip:function(){var t=this,e=t.config,i=t.$el,n=e.tooltip_contents.bindto;if(i.tooltip=Object(s.select)(n),i.tooltip.empty()&&(i.tooltip=i.chart.style("position","relative").append("div").attr("class",o.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),e.tooltip_init_show){if(t.axis.isTimeSeries()&&L(e.tooltip_init_x)){var a,r,c=t.data.targets[0];for(e.tooltip_init_x=tt.call(t,e.tooltip_init_x),a=0;(r=c.values[a])&&r.x-e.tooltip_init_x!=0;a++);e.tooltip_init_x=a}i.tooltip.html(t.getTooltipHTML(t.data.targets.map((function(i){return t.addName(i.values[e.tooltip_init_x])})),t.axis.getXAxisTickFormat(),t.getYFormat(t.hasArcType(null,["radar"])),t.color)),n||i.tooltip.style("top",e.tooltip_init_position.top).style("left",e.tooltip_init_position.left).style("display","block")}t.bindTooltipResizePos()},getTooltipHTML:function(){var t=this,e=t.api,i=t.config;return k(i.tooltip_contents)?i.tooltip_contents.bind(e).apply(void 0,arguments):t.getTooltipContent.apply(t,arguments)},getTooltipContent:function(t,e,i,n){var a=this,r=a.api,s=a.config,c=["title","name","value"].map((function(t){var e=s["tooltip_format_"+t];return k(e)?e.bind(r):e})),l=c[0],u=c[1],d=c[2];l=l||e,u=u||function(t){return t},d=d||(a.isStackNormalized()?function(t,e){return(100*e).toFixed(2)+"%"}:i);var h=s.tooltip_order,g=function(t){return a.axis&&a.isBubbleZType(t)?a.getBubbleZData(t.value,"z"):a.getBaseValue(t)},f=a.levelColor?function(t){return a.levelColor(t.value)}:function(t){return n(t)},x=s.tooltip_contents,p=x.template,_=a.mapToTargetIds();if(null===h&&s.data_groups.length){var v=a.orderTargets(a.data.targets).map((function(t){return t.id})).reverse();t.sort((function(t,e){var i=t?t.value:null,n=e?e.value:null;return i>0&&n>0&&(i=t.id?v.indexOf(t.id):null,n=e.id?v.indexOf(e.id):null),i-n}))}else/^(asc|desc)$/.test(h)?t.sort((function(t,e){var i=t?g(t):null,n=e?g(e):null;return"asc"===h?i-n:n-i})):k(h)&&t.sort(h.bind(r));var m,b,y,T,w,L=a.getTooltipContentTemplate(p),S=t.length;for(w=0;w<S;w++)if((b=t[w])&&(g(b)||0===g(b))){if(O(m)){var I=N(l?l(b.x):b.x);m=Q(L[0],{CLASS_TOOLTIP:o.tooltip,TITLE:A(I)?p?I:'<tr><th colspan="2">'+I+"</th></tr>":""})}if(y=[b.ratio,b.id,b.index,t],T=N(d.apply(void 0,[g(b)].concat(y))),a.isAreaRangeType(b)){var C=["high","low"].map((function(t){return N(d.apply(void 0,[a.getAreaRangeData(b,t)].concat(y)))})),E=C[0],X=C[1];T="<b>Mid:</b> "+T+" <b>High:</b> "+E+" <b>Low:</b> "+X}if(void 0!==T)if("continue"===function(){if(null===b.name)return"continue";var t=N(u.apply(void 0,[b.name].concat(y))),e=f(b),i={CLASS_TOOLTIP_NAME:o.tooltipName+a.getTargetSelectorSuffix(b.id),COLOR:p||!a.patterns?e:'<svg><rect style="fill:'+e+'" width="10" height="10"></rect></svg>',NAME:t,VALUE:T};if(p&&P(x.text)){var n=_.indexOf(b.id);Object.keys(x.text).forEach((function(t){i[t]=x.text[t][n]}))}m+=Q(L[1],i)}())continue}return m+"</table>"},getTooltipContentTemplate:function(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'+(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>')+'{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>').replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function(t,e,i,n){var a=this,r=a.config,o=a.scale,c=a.state,l=c.width,u=c.height,d=c.current,h=c.isLegendRight,g=c.inputType,f=a.hasType("gauge")&&!r.gauge_fullCircle,x=a.getSvgLeft(!0),p=Object(s.mouse)(n),_=p[0],v=p[1],m=x+d.width-a.getCurrentPaddingRight(!0),b=a.getCurrentPaddingLeft(!0);if(v+=20,a.hasArcType()){"touch"===g||a.hasType("radar")||(v+=f?u:u/2,_+=(l-(h?a.getLegendWidth():0))/2)}else{var y=o.x(t[0].x);r.axis_rotated?(v=y+20,_+=x+100,m-=x):(v-=5,_=x+b+20+(a.zoomScale?_:y))}return _+e+15>m&&(_-=e+b),v+i>d.height&&(v-=f?3*i:i+30),v<0&&(v=0),{top:v,left:_}},showTooltip:function(t,e){var i=this,n=i.config,a=i.state,r=i.$el.tooltip,s=n.tooltip_contents.bindto,o=i.hasArcType(null,["radar"]),c=t.filter((function(t){return t&&A(i.getBaseValue(t))}));if(0!==c.length&&n.tooltip_show){var l=r.datum(),u=l||{},d=u.width,h=void 0===d?0:d,g=u.height,f=void 0===g?0:g,x=JSON.stringify(t);if(!l||l.current!==x){var p=t.concat().sort()[0].index;F(n.tooltip_onshow,i.api,t),r.html(i.getTooltipHTML(t,i.axis?i.axis.getXAxisTickFormat():i.categoryName.bind(i),i.getYFormat(o),i.color)).style("display",null).style("visibility",null).datum(l={index:p,current:x,width:h=r.property("offsetWidth"),height:f=r.property("offsetHeight")}),F(n.tooltip_onshown,i.api,t),i._handleLinkedCharts(!0,p)}if(!s){var _=(n.tooltip_position||i.tooltipPosition).call(this,c,h,f,e);["top","left"].forEach((function(t){var e=_[t];r.style(t,e+"px"),"left"!==t||l.xPosInPercent||(l.xPosInPercent=e/a.current.width*100)}))}}},bindTooltipResizePos:function(){var t=this.resizeFunction,e=this.state,i=this.$el.tooltip;t.add((function(){if("block"===i.style("display")){var t=e.current,n=i.datum(),a=n.width,r=n.xPosInPercent,s=t.width/100*r,o=t.width-(s+a);o<0&&(s+=o),i.style("left",s+"px")}}))},hideTooltip:function(t){var e=this.api,i=this.config,n=this.$el.tooltip;if("none"!==n.style("display")&&(!i.tooltip_doNotHide||t)){var a=JSON.parse(n.datum().current);F(i.tooltip_onhide,e,a),n.style("display","none").style("visibility","hidden").datum(null),F(i.tooltip_onhidden,e,a)}},_handleLinkedCharts:function(t,e){var i=this,n=i.charts,a=i.config;if(a.tooltip_linked&&n.length>1){var r=a.tooltip_linked_name;n.forEach((function(n){if(n!==i.api){var a=n.internal,s=a.config,o=a.$el,c=s.tooltip_linked,l=s.tooltip_linked_name,u=w.body.contains(o.chart.node());if(c&&r===l&&u){var d=n.internal.$el.tooltip.data()[0],h=e!==(d&&d.index);try{t&&h?n.tooltip.show({index:e}):!t&&n.tooltip.hide()}catch(t){}}}}))}}},ee={getTranslate:function(t,e){void 0===e&&(e=0);var i,n,a=this,r=a.config,s=a.state,o=r.axis_rotated,c=a.hasType("gauge"),l=0;if(e&&/^(x|y2?)$/.test(t)&&(l=a.getAxisSize(t)*e),"main"===t)i=E(s.margin.left),n=E(s.margin.top);else if("context"===t)i=E(s.margin2.left),n=E(s.margin2.top);else if("legend"===t)i=s.margin3.left,n=s.margin3.top+(c?10:0);else if("x"===t)i=o?-l:0,n=o?0:s.height+l;else if("y"===t)i=o?0:-l,n=o?s.height+l:0;else if("y2"===t)i=o?0:s.width+l,n=o?1-l:0;else if("subX"===t)i=0,n=o?0:s.height2;else if("arc"===t)i=s.arcWidth/2,n=s.arcHeight/2;else if("radar"===t){var u=a.getRadarSize()[0];i=s.width/2-u,n=E(s.margin.top)}return"translate("+i+", "+n+")"},transformMain:function(t,e){var i,n,a,r=this,s=r.$el.main;e&&e.axisX?i=e.axisX:(i=s.select("."+o.axisX),t&&(i=i.transition())),e&&e.axisY?n=e.axisY:(n=s.select("."+o.axisY),t&&(n=n.transition())),e&&e.axisY2?a=e.axisY2:(a=s.select("."+o.axisY2),t&&(a=a.transition())),(t?s.transition():s).attr("transform",r.getTranslate("main")),i.attr("transform",r.getTranslate("x")),n.attr("transform",r.getTranslate("y")),a.attr("transform",r.getTranslate("y2")),s.select("."+o.chartArcs).attr("transform",r.getTranslate("arc"))},transformAll:function(t,e){var i=this,n=i.config,a=i.state.hasAxis,r=i.$el;i.transformMain(t,e),a&&n.subchart_show&&i.transformContext(t,e),r.legend&&i.transformLegend(t)}},ie={setTargetType:function(t,e){var i=this.config,n=this.state.withoutFadeIn;this.mapToTargetIds(t).forEach((function(t){n[t]=e===i.data_types[t],i.data_types[t]=e})),t||(i.data_type=e)},updateTypesElements:function(){var t=this,e=t.state.current;Object.keys(Yt).forEach((function(i){var n=Yt[i],a=t.hasType(n,null,!0),r=e.types.indexOf(n);-1===r&&a?e.types.push(n):r>-1&&!a&&e.types.splice(r,1)})),t.setChartElements()},hasType:function(t,e,i){void 0===i&&(i=!1);var n=this.config,a=this.state.current,r=n.data_types,s=e||this.data.targets,o=!1;return!i&&a.types.length&&a.types.indexOf(t)>-1?o=!0:s&&s.length?s.forEach((function(e){var i=r[e.id];i!==t&&(i||"line"!==t)||(o=!0)})):Object.keys(r).length?Object.keys(r).forEach((function(e){r[e]===t&&(o=!0)})):o=n.data_type===t,o},hasTypeOf:function(t,e,i){var n=this;return void 0===i&&(i=[]),!$t[t].filter((function(t){return-1===i.indexOf(t)})).every((function(t){return!n.hasType(t,e)}))},isTypeOf:function(t,e){var i=L(t)?t:t.id,n=this.config.data_types[i];return z(e)?e.indexOf(n)>=0:n===e},hasPointType:function(){return this.hasTypeOf("Line")||this.hasType("bubble")||this.hasType("scatter")},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&"multi"===this.config.gauge_type},isLineType:function(t){var e=L(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,$t.Line)},isStepType:function(t){return this.isTypeOf(t,$t.Step)},isSplineType:function(t){return this.isTypeOf(t,$t.Spline)},isAreaType:function(t){return this.isTypeOf(t,$t.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,$t.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isRadarType(t)},isCirclePoint:function(t){var e=this.config,i=e.point_pattern;return!(!t||"circle"!==t.tagName)||"circle"===e.point_type&&(!i||z(i)&&0===i.length)},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},barData:function(t){return this.isBarType(t)?t.values:[]},labelishData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isRadarType(t)?t.values:[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)>=0}},ne=function(){function t(t){n(this,"api",void 0),n(this,"config",void 0),n(this,"cache",void 0),n(this,"$el",void 0),n(this,"state",void 0),n(this,"charts",void 0),n(this,"data",{xs:{},targets:[]}),n(this,"axis",void 0),n(this,"scale",{x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null}),n(this,"org",{xScale:null,xDomain:null}),n(this,"color",void 0),n(this,"patterns",void 0),n(this,"levelColor",void 0),n(this,"point",void 0),n(this,"brush",void 0),n(this,"format",{extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null});var e=this;e.api=t,e.config=new xt,e.cache=new At;var i=new l;e.$el=i.getStore("element"),e.state=i.getStore("state")}var e=t.prototype;return e.beforeInit=function(){this.callPluginHook("$beforeInit"),F(this.config.onbeforeinit,this.api)},e.afterInit=function(){this.callPluginHook("$afterInit"),F(this.config.onafterinit,this.api)},e.init=function(){var t=this,e=t.config,i=t.state,n=t.$el;i.hasAxis=!t.hasArcType(),i.hasRadar=!i.hasAxis&&t.hasType("radar"),t.initParams();var a={element:e.bindto,classname:"bb"};P(e.bindto)&&(a.element=e.bindto.element||"#chart",a.classname=e.bindto.classname||a.classname),n.chart=k(a.element.node)?e.bindto.element:Object(s.select)(a.element||[]),n.chart.empty()&&(n.chart=Object(s.select)(w.body.appendChild(w.createElement("div")))),n.chart.html("").classed(a.classname,!0),t.initToRender()},e.initToRender=function(t){var e=this,i=e.config,n=e.state,a=e.$el.chart,r=function(){return"none"===a.style("display")||"hidden"===a.style("visibility")},s=i.render.lazy||r(),o=T.MutationObserver;if(s&&o&&!1!==i.render.observe&&!t&&new o((function(t,i){r()||(i.disconnect(),!n.rendered&&e.initToRender(!0))})).observe(a.node(),{attributes:!0,attributeFilter:["class","style"]}),!s||t){var c=e.convertData(i,e.initWithData);c&&e.initWithData(c),e.afterInit()}},e.initParams=function(){var t=this,e=t,i=e.config,n=e.format,a=e.state,s=i.axis_rotated;if(a.datetimeId="bb-"+ +new Date,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.hasPointType()&&(t.point=t.generatePoint()),a.hasAxis){t.initClip(),n.extraLineClasses=t.generateExtraLineClass(),n.dataTime=i.data_xLocaltime?r.timeParse:r.utcParse,n.axisTime=i.axis_x_localtime?r.timeFormat:r.utcFormat;var o=t.config.zoom_enabled&&"drag"===t.config.zoom_enabled.type;n.defaultAxisTime=function(e){var i=t.scale,a=i.x,r=i.zoom,s=o?r:r&&a.orgDomain().toString()!==r.domain().toString(),c=(e.getMilliseconds()?".%L":e.getSeconds()&&".:%S")||e.getMinutes()&&"%I:%M"||e.getHours()&&"%I %p"||1!==e.getDate()&&"%b %d"||s&&1===e.getDate()&&"%b'%y"||e.getMonth()&&"%-m/%-d"||"%Y";return n.axisTime(c)(e)}}a.isLegendRight="right"===i.legend_position,a.isLegendInset="inset"===i.legend_position,a.isLegendTop="top-left"===i.legend_inset_anchor||"top-right"===i.legend_inset_anchor,a.isLegendLeft="top-left"===i.legend_inset_anchor||"bottom-left"===i.legend_inset_anchor,a.rotatedPaddingRight=s&&!i.axis_x_show?0:30,a.inputType=function(t,e){var i=!1;if(/Mobi/.test(T.navigator.userAgent)&&e){var n=T.navigator&&"maxTouchPoints"in T.navigator&&T.navigator.maxTouchPoints>0,a="ontouchmove"in T||T.DocumentTouch&&w instanceof T.DocumentTouch;i=n||a}return(!(!t||i)&&"onmouseover"in T?"mouse":i&&"touch")||null}(i.interaction_inputType_mouse,i.interaction_inputType_touch)},e.initWithData=function(t){var e=this,i=e.config,n=e.scale,a=e.state,r=e.$el,s=e.org,c=a.hasAxis;c&&(e.axis=new Et(e),i.zoom_enabled&&e.initZoom()),e.data.xs={},e.data.targets=e.convertDataToTargets(t),i.data_filter&&(e.data.targets=e.data.targets.filter(i.data_filter.bind(e.api))),i.data_hide&&e.addHiddenTargetIds(!0===i.data_hide?e.mapToIds(e.data.targets):i.data_hide),i.legend_hide&&e.addHiddenLegendIds(!0===i.legend_hide?e.mapToIds(e.data.targets):i.legend_hide),e.updateSizes(),e.updateScales(!0);var l=n.x,u=n.y,d=n.y2,h=n.subX,g=n.subY,f=n.subY2;if(l&&(l.domain(Z(e.getXDomain(e.data.targets))),h.domain(l.domain()),s.xDomain=l.domain()),u&&(u.domain(e.getYDomain(e.data.targets,"y")),g.domain(u.domain())),d&&(d.domain(e.getYDomain(e.data.targets,"y2")),f&&f.domain(d.domain())),r.svg=r.chart.append("svg").style("overflow","hidden").style("display","block"),i.interaction_enabled&&a.inputType){var x="touch"===a.inputType;r.svg.on(x?"touchstart":"mouseenter",(function(){return F(i.onover,e.api)})).on(x?"touchend":"mouseleave",(function(){return F(i.onout,e.api)}))}i.svg_classname&&r.svg.attr("class",i.svg_classname);var p=k(i.color_tiles)&&e.patterns;(c||p)&&(r.defs=r.svg.append("defs"),c&&["id","idXAxis","idYAxis","idXAxisTickTexts","idGrid"].forEach((function(t){e.appendClip(r.defs,a.clip[t])})),p&&e.patterns.forEach((function(t){return r.defs.append((function(){return t.node}))}))),e.updateSvgSize(),e.bindResize();var _=r.svg.append("g").attr("transform",e.getTranslate("main"));if(r.main=_,i.subchart_show&&e.initSubchart(),i.tooltip_show&&e.initTooltip(),i.title_text&&e.initTitle(),i.legend_show&&e.initLegend(),i.data_empty_label_text&&_.append("text").attr("class",o.text+" "+o.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),c&&(i.regions.length&&e.initRegion(),!i.clipPath&&e.axis.init()),_.append("g").attr("class",o.chart).attr("clip-path",a.clip.path),e.callPluginHook("$init"),c&&(e.initEventRect&&e.initEventRect(),e.initGrid(),i.clipPath&&e.axis&&e.axis.init()),e.initChartElements(),e.updateTargets(e.data.targets),e.updateDimension(),F(i.oninit,e.api),e.setBackground(),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),i.data_onmin||i.data_onmax){var v=e.getMinMaxData();F(i.data_onmin,e.api,v.min),F(i.data_onmax,e.api,v.max)}a.rendered=!0},e.initChartElements=function(){var t=this,e=t.state,i=e.hasAxis,n=e.hasRadar,a=[];i?(t.hasType("bar")&&a.push("Bar"),t.hasType("bubble")&&a.push("Bubble"),t.hasTypeOf("Line")&&a.push("Line")):(!n&&a.push("Arc","Pie"),t.hasType("gauge")?a.push("Gauge"):n&&a.push("Radar")),a.forEach((function(e){t["init"+e]()})),D(t.config.data_labels)&&t.initText()},e.setChartElements=function(){var t=this.$el,e=t.chart,i=t.svg,n=t.defs,a=t.main,r=t.tooltip,s=t.legend,o=t.title,c=t.grid,l=t.arcs,u=t.circle,d=t.bar,h=t.line,g=t.area,f=t.text;this.api.$={chart:e,svg:i,defs:n,main:a,tooltip:r,legend:s,title:o,grid:c,arc:l,circles:u,bar:{bars:d},line:{lines:h,areas:g},text:{texts:f}}},e.setBackground=function(){var t=this.config.background,e=this.state,i=this.$el.svg;if(D(t)){var n=i.select("g").insert(t.imgUrl?"image":"rect",":first-child");t.imgUrl?n.attr("href",t.imgUrl):t.color&&n.style("fill",t.color).attr("clip-path",e.clip.path),n.attr("class",t.class||null).attr("width","100%").attr("height","100%")}},e.updateTargets=function(t){var e=this,i=e.state,n=i.hasAxis,a=i.hasRadar;e.updateTargetsForText(t),(e.hasPointType()||a)&&e.updateTargetForCircle(),n?(e.hasType("bar")&&e.updateTargetsForBar(t),e.hasTypeOf("Line")&&e.updateTargetsForLine(t),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t)):e.hasArcType(t)&&(a?e.updateTargetsForRadar(t):e.updateTargetsForArc(t)),e.showTargets()},e.showTargets=function(){var t=this,e=t.config;t.$el.svg.selectAll("."+o.target).filter((function(e){return t.isTargetToShow(e.id)})).transition().duration(e.transition_duration).style("opacity","1")},e.getWithOption=function(t){var e={Y:!0,Subchart:!0,Transition:!0,EventRect:!0,Dimension:!0,TrimXDomain:!0,Transform:!1,UpdateXDomain:!1,UpdateOrgXDomain:!1,Legend:!1,UpdateXAxis:"UpdateXDomain",TransitionForExit:"Transition",TransitionForAxis:"Transition"};return Object.keys(e).forEach((function(i){var n=e[i];L(n)&&(n=e[n]),e[i]=M(t,"with"+i,n)})),e},e.initialOpacity=function(t){var e=this.state.withoutFadeIn;return null!==this.getBaseValue(t)&&e[t.id]?"1":"0"},e.bindResize=function(){var t,e,i,n=this,a=n.config,r=n.state,s=(e=[],(i=function(){i.clear(),t=kt((function(){e.forEach((function(t){return t()}))}),200)}).clear=function(){t&&(Lt(t),t=null)},i.add=function(t){return e.push(t)},i.remove=function(t){return e.splice(e.indexOf(t),1)},i),o=[];o.push((function(){return F(a.onresize,n,n.api)})),a.resize_auto&&o.push((function(){r.resizing=!0,n.api.flush(!1)})),o.push((function(){F(a.onresized,n,n.api),r.resizing=!1})),o.forEach((function(t){return s.add(t)})),n.resizeFunction=s,T.addEventListener("resize",n.resizeFunction=s)},e.callPluginHook=function(t){for(var e=this,i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];this.config.plugins.forEach((function(i){"$beforeInit"===t&&(i.$$=e,e.api.plugins.push(i)),i[t].apply(i,n)}))},t}();function ae(t){var e,i,n,a=this.config,r=function(){var t=i.shift();return t&&e&&X(e)&&t in e?(e=e[t],r()):t?void 0:e};Object.keys(a).forEach((function(s){e=t,i=s.split("_"),n=r(),I(n)&&(a[s]=n)}))}V(ne.prototype,[Rt,Dt,zt,{categoryName:function(t){var e=this.config.axis_x_categories;return t<e.length?e[t]:t}},Ft,Nt,Vt,Mt,Ht,Wt,Gt,qt,Zt,Kt,Qt,te,ee,ie]);var re={resize:function(t){var e=this.internal,i=e.config;e.state.rendered&&(i.size_width=t?t.width:null,i.size_height=t?t.height:null,this.flush(!1,!0),e.resizeFunction())},flush:function(t){var e=this.internal,i=e.state;i.rendered?(i.resizing?e.brush&&e.brush.updateResize():e.axis&&e.axis.setOrient(),e.scale.zoom=null,t?e.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):e.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})):e.initToRender(!0)},destroy:function(){var t=this,e=this.internal,i=e.$el,n=i.chart,a=i.svg;return D(e)&&(e.callPluginHook("$willDestroy"),e.charts.splice(e.charts.indexOf(this),1),a.select("*").interrupt(),e.resizeFunction.clear(),T.removeEventListener("resize",e.resizeFunction),n.classed("bb",!1).html(""),Object.keys(this).forEach((function(i){"internal"===i&&Object.keys(e).forEach((function(t){e[t]=null})),t[i]=null,delete t[i]}))),null},config:function(t,e,i){var n,a=this.internal.config,r=t&&t.replace(/\./g,"_");return r in a&&(I(e)?(a[r]=e,n=e,i&&this.flush()):n=a[r]),n}};function se(t){var e=this.internal.data.targets;if(!O(t)){var i=z(t)?t:[t];return e.filter((function(t){return i.some((function(e){return e===t.id}))}))}return e}V(se,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t,e){void 0===e&&(e=!0);var i=null;if(t){var n=this.data(t);n&&z(n)&&(i=[],n.forEach((function(t){var n=t.values.map((function(t){return t.value}));e?i=i.concat(n):i.push(n)})))}return i},names:function(t){var e=this.internal;return e.cache.remove(bt),e.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});function oe(t,e){var i,n,a=new XMLSerializer,r=t.cloneNode(!0),o=(i=H(w.styleSheets),n=[],i.forEach((function(t){try{t.cssRules&&t.cssRules.length&&(n=n.concat(H(t.cssRules)))}catch(e){console.error("Error while reading rules from "+t.href+": "+e.toString())}})),n).filter((function(t){return t.cssText})).map((function(t){return t.cssText}));r.setAttribute("xmlns",s.namespaces.xhtml);var c=a.serializeToString(r),l=w.createElement("style");l.appendChild(w.createTextNode(o.join("\n")));var u=a.serializeToString(l),d=('<svg xmlns="'+s.namespaces.svg+'" width="'+e.width+'" height="'+e.height+'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t'+u+"\n\t\t\t\t"+c.replace(/(url\()[^#]+/g,"$1")+"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,"+btoa(encodeURIComponent(d).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(+("0x"+e))})))}function ce(t,e,i){var n=this.internal,a=n.mapToTargetIds(e);n[(t?"remove":"add")+"HiddenTargetIds"](a);var r=n.$el.svg.selectAll(n.selectorTargets(a)),s=t?"1":"0";r.transition().style("opacity",s,"important").call(B,(function(){r.style("opacity",null).style("opacity",s)})),i.withLegend&&n[(t?"show":"hide")+"Legend"](a),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})}var le=function t(e){n(this,"plugins",[]),n(this,"internal",void 0);var i=new ne(this);this.internal=i,function t(e,i,n){Object.keys(e).forEach((function(a){var r=k(e[a]),s=i!==n,o=Object.keys(e[a]).length>0;r&&(!s&&o||s)?i[a]=e[a].bind(n):!r&&(i[a]={}),o&&t(e[a],i[a],n)}))}(t.prototype,this,this),ae.call(i,e),i.beforeInit(),i.init()};V(le.prototype,[re,{color:function(t){return this.internal.color(t)}},{data:se},{export:function(t,e){var i=this,n=this.internal,a=n.state,r=n.$el.chart,s=a.current,o=s.width,c=s.height,l=oe(r.node(),{width:o,height:c});if(e&&k(e)){var u=new Image;u.crossOrigin="Anonymous",u.onload=function(){var n=w.createElement("canvas"),a=n.getContext("2d");n.width=o,n.height=c,a.drawImage(u,0,0),e.bind(i)(n.toDataURL(t))},u.src=l}return l}},{focus:function(t){var e=this.internal,i=e.state,n=e.mapToTargetIds(t),a=e.$el.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),a.classed(o.focused,!0).classed(o.defocused,!1),e.hasArcType()&&!i.hasRadar&&(e.expandArc(n),e.hasType("gauge")&&e.markOverlapped(t,e,"."+o.gaugeValue)),e.toggleFocusLegend(n,!0),i.focusedTargetIds=n,i.defocusedTargetIds=i.defocusedTargetIds.filter((function(t){return n.indexOf(t)<0}))},defocus:function(t){var e=this.internal,i=e.state,n=e.mapToTargetIds(t);e.$el.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e))).classed(o.focused,!1).classed(o.defocused,!0),e.hasArcType()&&(e.unexpandArc(n),e.hasType("gauge")&&e.undoMarkOverlapped(e,"."+o.gaugeValue)),e.toggleFocusLegend(n,!1),i.focusedTargetIds=i.focusedTargetIds.filter((function(t){return n.indexOf(t)<0})),i.defocusedTargetIds=n},revert:function(t){var e=this.internal,i=e.config,n=e.state,a=e.$el,r=e.mapToTargetIds(t);a.svg.selectAll(e.selectorTargets(r)).classed(o.focused,!1).classed(o.defocused,!1),e.hasArcType()&&e.unexpandArc(r),i.legend_show&&(e.showLegend(r.filter(e.isLegendToShow.bind(e))),a.legend.selectAll(e.selectorLegends(r)).filter((function(){return Object(s.select)(this).classed(o.legendItemFocused)})).classed(o.legendItemFocused,!1)),n.focusedTargetIds=[],n.defocusedTargetIds=[]}},{legend:{show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}}},{load:function(t){var e=this.internal,i=e.config;t.xs&&e.addXs(t.xs),"names"in t&&this.data.names(t.names),"classes"in t&&Object.keys(t.classes).forEach((function(e){i.data_classes[e]=t.classes[e]})),"categories"in t&&e.axis.isCategorized()&&(i.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach((function(e){i.data_axes[e]=t.axes[e]})),"colors"in t&&Object.keys(t.colors).forEach((function(e){i.data_colors[e]=t.colors[e]})),"unload"in t&&!1!==t.unload?e.unload(e.mapToTargetIds(!0===t.unload?null:t.unload),(function(){return e.loadFromArgs(t)})):e.loadFromArgs(t)},unload:function(t){var e=this,i=this.internal,n=t||{};z(n)?n={ids:n}:L(n)&&(n={ids:[n]});var a=i.mapToTargetIds(n.ids);i.unload(a,(function(){i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.cache.remove(a),n.done&&n.done.call(e)}))}},{show:function(t,e){void 0===e&&(e={}),ce.call(this,!0,t,e)},hide:function(t,e){void 0===e&&(e={}),ce.call(this,!1,t,e)},toggle:function(t,e){var i=this;void 0===e&&(e={});var n=this.internal,a={show:[],hide:[]};n.mapToTargetIds(t).forEach((function(t){return a[n.isTargetToShow(t)?"hide":"show"].push(t)})),a.show.length&&this.show(a.show,e),a.hide.length&&setTimeout((function(){return i.hide(a.hide,e)}),0)}},{tooltip:{show:function(t){var e,i,n=this.internal,a=n.config,r=n.state.inputType;if(t.mouse&&(i=t.mouse),t.data){var s=t.data,o=n.getYScaleById(s.id)(s.value);n.isMultipleX()?i=[n.scale.x(s.x),o]:(!a.tooltip_grouped&&(i=[0,o]),e=A(s.index)?s.index:n.getIndexByX(s.x))}else I(t.x)?e=n.getIndexByX(t.x):I(t.index)&&(e=t.index);("mouse"===r?["mouseover","mousemove"]:["touchstart"]).forEach((function(t){n.dispatchEvent(t,e,i)}))},hide:function(){var t=this.internal;"touch"===t.inputType&&t.callOverOutForTouch(),t.hideTooltip(!0),t.hideGridFocus(),t.unexpandCircles(),t.unexpandBars()}}}]);var ue={},de={version:"2.0.0-alpha",generate:function(t){var e=q({},ue,t),i=new le(e);return i.internal.charts=this.instance,this.instance.push(i),i},defaults:function(t){return P(t)&&(ue=t),ue},instance:[],plugin:{}}}])}));
//# sourceMappingURL=billboard.min.js.map