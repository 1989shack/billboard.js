/*!
 * Copyright (c) 2017 NAVER Corp.
 * billboard.js project is licensed under the MIT license
 * 
 * billboard.js, JavaScript chart library
 * http://naver.github.io/billboard.js/
 * 
 * @version 1.6.2-nightly-20181121171023
 */
!function webpackUniversalModuleDefinition(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3-time-format"),require("d3-selection"),require("d3-array"),require("d3-transition"),require("d3-scale"),require("d3-brush"),require("d3-collection"),require("d3-dsv"),require("d3-drag"),require("d3-shape"),require("d3-interpolate"),require("d3-color"),require("d3-zoom"),require("d3-ease"));else if("function"==typeof define&&define.amd)define(["d3-time-format","d3-selection","d3-array","d3-transition","d3-scale","d3-brush","d3-collection","d3-dsv","d3-drag","d3-shape","d3-interpolate","d3-color","d3-zoom","d3-ease"],e);else{var n="object"==typeof exports?e(require("d3-time-format"),require("d3-selection"),require("d3-array"),require("d3-transition"),require("d3-scale"),require("d3-brush"),require("d3-collection"),require("d3-dsv"),require("d3-drag"),require("d3-shape"),require("d3-interpolate"),require("d3-color"),require("d3-zoom"),require("d3-ease")):e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3);for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(window,function(n,i,a,r,o,s,c,l,d,u,g,h,f,p){return function(n){var i={};function __webpack_require__(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,__webpack_require__),e.l=!0,e.exports}return __webpack_require__.m=n,__webpack_require__.c=i,__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__webpack_require__.d(n,i,function(t){return e[t]}.bind(null,i));return n},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t["default"]}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=26)}([function(t,e){t.exports=function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){var i=n(2),a=n(3),r=n(4);t.exports=function _slicedToArray(t,e){return i(t)||a(t,e)||r()}},function(t,e){t.exports=function _arrayWithHoles(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function _iterableToArrayLimit(t,e){var n=[],i=!0,a=!1,r=undefined;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(c){a=!0,r=c}finally{try{i||null==s["return"]||s["return"]()}finally{if(a)throw r}}return n}},function(t,e){t.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}},function(t,e){t.exports=n},function(t,e){t.exports=i},function(t,e){t.exports=a},function(t,e){t.exports=r},function(t,e,n){var i=n(11),a=n(12),r=n(13);t.exports=function _toConsumableArray(t){return i(t)||a(t)||r()}},function(t,e){t.exports=function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e){t.exports=o},function(e,t){function _typeof2(t){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof2(t){return typeof t}:function _typeof2(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return"function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?e.exports=_typeof=function _typeof(t){return _typeof2(t)}:e.exports=_typeof=function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)},_typeof(t)}e.exports=_typeof},function(t,e){t.exports=s},function(t,e){t.exports=c},function(t,e){t.exports=l},function(t,e){t.exports=d},function(t,e){t.exports=u},function(t,e){t.exports=g},function(t,e){t.exports=h},function(t,e){t.exports=f},function(t,e){t.exports=p},function(t,e,n){},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(1),S=n.n(r),o=n(5),s=n.n(o),c=n(6),z=n(7),m=n(8),E=n(9),l=n(10),Y=n.n(l),u=n(14),d=n(15),g=n.n(d),h=n(16),j={arc:"bb-arc",arcs:"bb-arcs",area:"bb-area",areas:"bb-areas",axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",bar:"bb-bar",bars:"bb-bars",brush:"bb-brush",button:"bb-button",buttonZoomReset:"bb-zoom-reset",chart:"bb-chart",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsTitle:"bb-chart-arcs-title",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",chartLine:"bb-chart-line",chartLines:"bb-chart-lines",chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars",chartText:"bb-chart-text",chartTexts:"bb-chart-texts",circle:"bb-circle",circles:"bb-circles",colorPattern:"bb-color-pattern",defocused:"bb-defocused",dragarea:"bb-dragarea",empty:"bb-empty",eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single",focused:"bb-focused",gaugeValue:"bb-gauge-value",grid:"bb-grid",gridLines:"bb-grid-lines",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemFocused:"bb-legend-item-focused",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile",level:"bb-level",levels:"bb-levels",line:"bb-line",lines:"bb-lines",region:"bb-region",regions:"bb-regions",selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",shape:"bb-shape",shapes:"bb-shapes",target:"bb-target",text:"bb-text",texts:"bb-texts",title:"bb-title",tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name",xgrid:"bb-xgrid",xgridFocus:"bb-xgrid-focus",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids",zoomBrush:"bb-zoom-brush",zoomRect:"bb-zoom-rect",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},C=function(t){return t||0===t},k=function(t){return"function"==typeof t},V=function(t){return"string"==typeof t},N=function(t){return"number"==typeof t},O=function(t){return void 0===t},G=function(t){return void 0!==t},f=function(t){return"boolean"==typeof t},p=function(t){return 10*Math.ceil(t/10)},v=function(t){return Math.ceil(t)+.5},B=function(t){return t[1]-t[0]},_=function(t){return"object"===g()(t)},y=function(t){return O(t)||null===t||V(t)&&0===t.length||_(t)&&0===Object.keys(t).length},W=function(t){return!y(t)},H=function(t){return t&&t.constructor===Array},b=function(t){return t&&!t.nodeType&&_(t)&&!H(t)},q=function(t,e,n){return G(t[e])?t[e]:n},I=function(t){for(var e=k(t),n=arguments.length,i=Array(1<n?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return e&&t.call.apply(t,i),e},X=function(t){return V(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},T=function(t){var e=t.getBBox(),n=e.x,i=e.y,a=e.width,r=e.height;return[{x:n,y:i+r},{x:n,y:i},{x:n+a,y:i},{x:n+a,y:i+r}]},A=function(t){var e=null,n=z.event,i=t.context||t.main;return n&&"BrushEvent"===n.constructor.name?e=n.selection:i&&(e=i.select(".".concat(j.brush)).node())&&(e=Object(h.brushSelection)(e)),e},w=function(t){var e=A(t);return!e||e[0]===e[1]},L=function(){var t=0<arguments.length&&arguments[0]!==undefined?arguments[0]:{},e=1<arguments.length?arguments[1]:undefined;for(var n in e)t[n]=e[n];return t},D=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},U=function(t){return[].slice.call(t)},F={mouse:function(){try{return new MouseEvent("t"),function(t,e){var n=2<arguments.length&&arguments[2]!==undefined?arguments[2]:{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0};t.dispatchEvent(new MouseEvent(e,n))}}catch(t){return function(t,e){var n=2<arguments.length&&arguments[2]!==undefined?arguments[2]:{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0},i=document.createEvent("MouseEvent");i.initMouseEvent(e,n.bubbles,n.cancelable,window,0,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}}}(),touch:function touch(t,e,n){var i=new Touch(Object.assign({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[i],targetTouches:[],changedTouches:[i]}))}},Z=function(t){var r={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call(function(t){try{var e=t.node().getBBox(),n=e.height,i=e.width;n&&i&&(r.h=n,r.w=i),t.text("")}catch(a){}}),Z.size=r},R=function(){function axisX(t,e){t.attr("transform",function(t){return"translate(".concat(Math.ceil(e(t)+P),", 0)")})}function axisY(t,e){t.attr("transform",function(t){return"translate(0,".concat(Math.ceil(e(t)),")")})}function textFormatted(t){var e=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,n=i?i(e):e;return G(n)?n:""}function transitionise(t){return O.withoutTransition?t.interrupt():t.transition(e)}function axis(t){t.each(function(){var t=Object(z.select)(this);axis.g=t;var e=this.__chart__||I,c=function copyScale(){var t=I.copy();return t.domain().length||t.domain(I.domain()),t}();this.__chart__=c;var n,i,l=M||function generateTicks(t){var e=[];if(t.ticks)return t.ticks.apply(t,Y()(F?U(F):[])).map(function(t){return V(t)&&N(t)&&!isNaN(t)&&Math.round(10*t)/10||t});for(var n=t.domain(),i=Math.ceil(n[0]);i<n[1];i++)e.push(i);return 0<e.length&&0<e[0]&&e.unshift(e[0]-(e[1]-e[0])),e}(c),a=t.selectAll(".tick").data(l,c),r=a.enter().insert("g",".domain").attr("class","tick").style("opacity","1"),o=a.exit().remove(),s=transitionise(a=r.merge(a)).style("opacity","1"),d=I.rangeExtent?I.rangeExtent():function scaleExtent(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}((O.orgXScale||I).range()),u=t.selectAll(".domain").data([0]),g=u.enter().append("path").attr("class","domain").merge(transitionise(u));r.append("line"),r.append("text");var h=r.select("line"),f=s.select("line"),p=r.select("text"),x=s.select("text");O.isCategory?(P=Math.ceil((c(1)-c(0))/2),n=R?0:P,i=R?P:0):P=n=0;var m=Z.size||Z(t.select(".tick")),v=[],_=Math.max(6,0)+3,y=/^(left|right)$/.test(E),b=/^(top|bottom)$/.test(E),T=a.select("text").selectAll("tspan").data(function(t,e){var n=O.tickMultiline?function splitTickText(t,e){var n=textFormatted(t),i=V(n)&&-1<n.indexOf("\n")?n.split("\n"):[];if(i.length)return i;var a,r,o,s=e;return H(n)?n:((!s||s<=0)&&(s=y?95:O.isCategory?Math.ceil(c(l[1])-c(l[0]))-12:110),function split(t,e){r=undefined;for(var n=1;n<e.length;n++)if(" "===e.charAt(n)&&(r=n),a=e.substr(0,n+1),o=m.w*a.length,s<o)return split(t.concat(e.substr(0,r||n)),e.slice(r?r+1:n));return t.concat(e)}(i,n+""))}(t,O.tickWidth):H(textFormatted(t))?textFormatted(t).concat():[textFormatted(t)];return v[e]=n.length,n.map(function(t){return{index:e,splitted:t}})});T.exit().remove(),T=T.enter().append("tspan").merge(T).text(function(t){return t.splitted});var A=b?axisX:axisY,w=/^(top|left)$/.test(E)?-1:1,L=A===axisX?"y":"x";h.attr("".concat(L,"2"),6*w),p.attr("".concat(L),_*w),g.attr("d",function(){var t=B*w;return b?"M".concat(d[0],",").concat(t,"V0H").concat(d[1],"V").concat(t):"M".concat(t,",").concat(d[0],"H0V").concat(d[1],"H").concat(t)});var S,C=O.tickTextRotate,k=O.axisName&&/^(x|y|y2)$/.test(O.axisName)?O.config["axis_".concat(O.axisName,"_tick_text_position")]:{x:0,y:0};if(T.attr("x",b?0:_*w).attr("dx",(S=0,"bottom"===E&&C&&(S=8*Math.sin(Math.PI*(C/180))),S+(k.x||0))).attr("dy",function(t,e){var n=0;return"top"!==E&&(n=0===e?y?-((v[t.index]-1)*(m.h/2)-3):0===k.y?".71em":0:m.h),N(n)&&k.y?n+k.y:n||".71em"}),"bottom"===E?(f.attr("x1",n).attr("x2",n).attr("y2",function(t){var e=I(t)+(R?0:P);return d[0]<e&&e<d[1]?6:0}),x.attr("x",0).attr("y",function yForText(t){return t?11.5-t/15*2.5*(0<t?1:-1):_}(C)).style("text-anchor",function textAnchorForText(t){return t?0<t?"start":"end":"middle"}(C)).attr("transform",function textTransform(t){return t?"rotate(".concat(t,")"):null}(C))):"top"===E?(f.attr("x2",0).attr("y2",-6),x.attr("x",0).attr("y",-_).style("text-anchor","middle")):"left"===E?(f.attr("x2",-6).attr("y1",i).attr("y2",i),x.attr("x",-_).attr("y",P).style("text-anchor","end")):"right"===E&&(f.attr("x2",6).attr("y2",0),x.attr("x",_).attr("y",0).style("text-anchor","start")),O.tickTitle&&x.append&&x.append("title").each(function(t){Object(z.select)(this).text(O.tickTitle[t])}),c.bandwidth){var X=c,D=X.bandwidth()/2;c=e=function(t){return X(t)+D}}else e.bandwidth?e=c:o.call(A,c);r.call(A,e),s.call(A,c)})}var i,F,R,e,O=0<arguments.length&&arguments[0]!==undefined?arguments[0]:{},I=Object(u.scaleLinear)(),E="bottom",B=O.withOuterTick?6:0,M=null,P=0,n=!0;return axis.scale=function(t){return arguments.length?(I=t,axis):I},axis.orient=function(t){return arguments.length?(E=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",axis):E},axis.tickFormat=function(t){return arguments.length?(i=t,axis):i},axis.tickCentered=function(t){return arguments.length?(R=t,axis):R},axis.tickOffset=function(){return P},axis.tickInterval=function(t){var e;O.isCategory?e=2*P:e=(axis.g.select("path.domain").node().getTotalLength()-2*B)/(t||axis.g.selectAll("line").size());return e===Infinity?0:e},axis.ticks=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length?(F=U(e),axis):F},axis.tickCulling=function(t){return arguments.length?(n=t,axis):n},axis.tickValues=function(t){if(k(t))M=function(){return t(I.domain())};else{if(!arguments.length)return M;M=t}return axis},axis.setTransition=function(t){return e=t,axis},axis},M=function(t,e){var n=t.config.axis_rotated;return e?n:!n},P=function(){function Axis(t){a()(this,Axis),this.owner=t}return s()(Axis,[{key:"init",value:function init(){var a=this,r=this.owner,o=r.config,s=o.axis_rotated,c=r.main;["x","y","y2"].forEach(function(e){var t="axis".concat(D(e)),n="".concat(j.axis," ").concat(j[t]),i=j["".concat(t,"Label")];r.axes[e]=c.append("g").attr("class",n).attr("clip-path",function(){var t=null;return"x"===e?t=r.clipPathForXAxis:"y"===e&&o.axis_y_inner&&(t=r.clipPathForYAxis),t}).attr("transform",r.getTranslate(e)).style("visibility",o["axis_".concat(e,"_show")]?"visible":"hidden"),r.axes[e].append("text").attr("class",i).attr("transform",["rotate(-90)",null]["x"===e?+!s:+s]).style("text-anchor",a.textAnchorForXAxisLabel.bind(a))})}},{key:"getXAxis",value:function getXAxis(t,e,n,i,a,r,o,s){var c=this.owner,l=c.config,d=c.isCategorized(),u={isCategory:d,withOuterTick:r,withoutTransition:o,config:l,axisName:t,tickMultiline:l.axis_x_tick_multiline,tickWidth:l.axis_x_tick_width,tickTextRotate:s?0:l.axis_x_tick_rotate,tickTitle:d&&l.axis_x_tick_tooltip&&c.api.categories(),orgXScale:c.x},g=R(u).scale(c.zoomScale||e).orient(n),h=a;return c.isTimeSeries()&&a&&!k(a)&&(h=a.map(function(t){return c.parseDate(t)})),g.tickFormat(i).tickValues(h),d&&(g.tickCentered(l.axis_x_tick_centered),y(l.axis_x_tick_culling)&&(l.axis_x_tick_culling=!1)),g}},{key:"getYAxis",value:function getYAxis(t,e,n,i,a,r,o,s){var c=this.owner,l=c.config,d={withOuterTick:r,withoutTransition:o,config:l,axisName:t,tickTextRotate:s?0:l.axis_y_tick_rotate},u=R(d).scale(e).orient(n).tickFormat(i||c.isStackNormalized()&&function(t){return"".concat(t,"%")});return c.isTimeSeriesY()?u.ticks(l.axis_y_tick_time_value):u.tickValues(a),u}},{key:"updateXAxisTickValues",value:function updateXAxisTickValues(t,e){var n,i=this.owner,a=i.config,r=a.axis_x_tick_count;return(a.axis_x_tick_fit||r)&&(n=this.generateTickValues(i.mapTargetsToUniqueXs(t),r,i.isTimeSeries())),e?e.tickValues(n):(i.xAxis.tickValues(n),i.subXAxis.tickValues(n)),n}},{key:"getId",value:function getId(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"}},{key:"getXAxisTickFormat",value:function getXAxisTickFormat(){var e,n=this.owner,i=n.config.axis_x_tick_format,t=n.isTimeSeries(),a=n.isCategorized();return i?k(i)?e=i:t&&(e=function(t){return t?n.axisTimeFormat(i)(t):""}):e=t?n.defaultAxisTimeFormat:a?n.categoryName:function(t){return t<0?t.toFixed(0):t},k(e)?function(t){return e.apply(n,a?[t,n.categoryName(t)]:[t])}:e}},{key:"getTickValues",value:function getTickValues(t){var e=this.owner,n=e.config["axis_".concat(t,"_tick_values")],i=e["".concat(t,"Axis")];return n||(i?i.tickValues():undefined)}},{key:"getXAxisTickValues",value:function getXAxisTickValues(){return this.getTickValues("x")}},{key:"getYAxisTickValues",value:function getYAxisTickValues(){return this.getTickValues("y")}},{key:"getY2AxisTickValues",value:function getY2AxisTickValues(){return this.getTickValues("y2")}},{key:"getLabelOptionByAxisId",value:function getLabelOptionByAxisId(t){return this.owner.config["axis_".concat(t,"_label")]}},{key:"getLabelText",value:function getLabelText(t){var e=this.getLabelOptionByAxisId(t);return V(e)?e:e?e.text:null}},{key:"setLabelText",value:function setLabelText(t,e){var n=this.owner.config,i=this.getLabelOptionByAxisId(t);V(i)?n["axis_".concat(t,"_label")]=e:i&&(i.text=e)}},{key:"getLabelPosition",value:function getLabelPosition(t,e){var n=this.owner.config.axis_rotated,i=this.getLabelOptionByAxisId(t),a=_(i)&&i.position?i.position:e[+!n],r=function(t){return!!~a.indexOf(t)};return{isInner:r("inner"),isOuter:r("outer"),isLeft:r("left"),isCenter:r("center"),isRight:r("right"),isTop:r("top"),isMiddle:r("middle"),isBottom:r("bottom")}}},{key:"getXAxisLabelPosition",value:function getXAxisLabelPosition(){return this.getLabelPosition("x",["inner-top","inner-right"])}},{key:"getYAxisLabelPosition",value:function getYAxisLabelPosition(){return this.getLabelPosition("y",["inner-right","inner-top"])}},{key:"getY2AxisLabelPosition",value:function getY2AxisLabelPosition(){return this.getLabelPosition("y2",["inner-right","inner-top"])}},{key:"getLabelPositionById",value:function getLabelPositionById(t){return this["get".concat(t.toUpperCase(),"AxisLabelPosition")]()}},{key:"textForXAxisLabel",value:function textForXAxisLabel(){return this.getLabelText("x")}},{key:"textForYAxisLabel",value:function textForYAxisLabel(){return this.getLabelText("y")}},{key:"textForY2AxisLabel",value:function textForY2AxisLabel(){return this.getLabelText("y2")}},{key:"xForAxisLabel",value:function xForAxisLabel(t){var e=!(1<arguments.length&&arguments[1]!==undefined)||arguments[1],n=this.owner,i=t.isMiddle?-n.height/2:0;return M(n,e)?i=t.isLeft?0:t.isCenter?n.width/2:n.width:t.isBottom&&(i=-n.height),i}},{key:"dxForAxisLabel",value:function dxForAxisLabel(t){var e=!(1<arguments.length&&arguments[1]!==undefined)||arguments[1],n=this.owner,i=t.isBottom?"0.5em":"0";return M(n,e)?i=t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop&&(i="-0.5em"),i}},{key:"textAnchorForAxisLabel",value:function textAnchorForAxisLabel(t){var e=!(1<arguments.length&&arguments[1]!==undefined)||arguments[1],n=this.owner,i=t.isMiddle?"middle":"end";return M(n,e)?i=t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom&&(i="start"),i}},{key:"xForXAxisLabel",value:function xForXAxisLabel(){return this.xForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"xForYAxisLabel",value:function xForYAxisLabel(){return this.xForAxisLabel(this.getYAxisLabelPosition())}},{key:"xForY2AxisLabel",value:function xForY2AxisLabel(){return this.xForAxisLabel(this.getY2AxisLabelPosition())}},{key:"dxForXAxisLabel",value:function dxForXAxisLabel(){return this.dxForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"dxForYAxisLabel",value:function dxForYAxisLabel(){return this.dxForAxisLabel(this.getYAxisLabelPosition())}},{key:"dxForY2AxisLabel",value:function dxForY2AxisLabel(){return this.dxForAxisLabel(this.getY2AxisLabelPosition())}},{key:"dyForXAxisLabel",value:function dyForXAxisLabel(){var t=this.owner.config,e=this.getXAxisLabelPosition().isInner,n=t.axis_x_height;return t.axis_rotated?e?"1.2em":-25-this.getMaxTickWidth("x"):e?"-0.5em":n?n-10:"3em"}},{key:"dyForYAxisLabel",value:function dyForYAxisLabel(){var t=this.owner,e=this.getYAxisLabelPosition().isInner;return t.config.axis_rotated?e?"-0.5em":"3em":e?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)}},{key:"dyForY2AxisLabel",value:function dyForY2AxisLabel(){var t=this.owner,e=this.getY2AxisLabelPosition().isInner;return t.config.axis_rotated?e?"1.2em":"-2.2em":e?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)}},{key:"textAnchorForXAxisLabel",value:function textAnchorForXAxisLabel(){return this.textAnchorForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"textAnchorForYAxisLabel",value:function textAnchorForYAxisLabel(){return this.textAnchorForAxisLabel(this.getYAxisLabelPosition())}},{key:"textAnchorForY2AxisLabel",value:function textAnchorForY2AxisLabel(){return this.textAnchorForAxisLabel(this.getY2AxisLabelPosition())}},{key:"getMaxTickWidth",value:function getMaxTickWidth(t,e){var n=this.owner,i=n.config,a=n.currentMaxTickWidths,r=0;if(e&&a[t])return a[t];if(n.svg){var o=/^y2?$/.test(t),s=n.filterTargetsToShow(n.data.targets),c=o?"getY":"getX",l=n[t].copy().domain(n["".concat(c,"Domain")](s,t)),d=this["".concat(c,"Axis")](t,l,n["".concat(t,"Orient")],o?i["axis_".concat(t,"_tick_format")]:n.xAxisTickFormat,null,!1,!0,!0);o||this.updateXAxisTickValues(s,d);var u=n.selectChart.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px");u.call(d).selectAll("text").each(function(){r=Math.max(r,this.getBoundingClientRect().width)}),u.remove()}return 0<r&&(a[t]=r),a[t]}},{key:"updateLabels",value:function updateLabels(i){var a=this,t=this.owner,r={X:t.main.select(".".concat(j.axisX," .").concat(j.axisXLabel)),Y:t.main.select(".".concat(j.axisY," .").concat(j.axisYLabel)),Y2:t.main.select(".".concat(j.axisY2," .").concat(j.axisY2Label))};Object.keys(r).forEach(function(t){var e=r[t],n="".concat(t,"AxisLabel");(i?e.transition():e).attr("x",a["xFor".concat(n)].bind(a)).attr("dx",a["dxFor".concat(n)].bind(a)).attr("dy",a["dyFor".concat(n)].bind(a)).text(a["textFor".concat(n)].bind(a))})}},{key:"getPadding",value:function getPadding(t,e,n,i){var a=N(t)?t:t[e];return C(a)?"ratio"===t.unit?t[e]*i:this.convertPixelsToAxisPadding(a,i):n}},{key:"convertPixelsToAxisPadding",value:function convertPixelsToAxisPadding(t,e){var n=this.owner;return e*(t/(n.config.axis_rotated?n.width:n.height))}},{key:"generateTickValues",value:function generateTickValues(t,e,n){var i,a,r,o,s,c,l=t;if(e){var d=k(e)?e():e;if(1===d)l=[t[0]];else if(2===d)l=[t[0],t[t.length-1]];else if(2<d){for(r=d-2,i=t[0],o=((a=t[t.length-1])-i)/(r+1),l=[i],s=0;s<r;s++)c=+i+o*(s+1),l.push(n?new Date(c):c);l.push(a)}}return n||(l=l.sort(function(t,e){return t-e})),l}},{key:"generateTransitions",value:function generateTransitions(e){var n=this.owner.axes,t=["x","y","y2","subx"].map(function(t){return e?n[t].transition().duration(e):n[t]}),i=S()(t,4);return{axisX:i[0],axisY:i[1],axisY2:i[2],axisSubX:i[3]}}},{key:"redraw",value:function redraw(t,e){var n=this.owner,i=e?"0":"1";["x","y","y2","subx"].forEach(function(t){n.axes[t].style("opacity",i)}),t.axisX.call(n.xAxis),t.axisY.call(n.yAxis),t.axisY2.call(n.y2Axis),t.axisSubX.call(n.subXAxis)}}]),Axis}(),$=function(){function ChartInternal(t){a()(this,ChartInternal);var e=this;e.api=t,e.config=e.getOptions(),e.data={},e.cache={},e.axes={}}return s()(ChartInternal,[{key:"beforeInit",value:function beforeInit(){var t=this.config;I(t.onbeforeinit,this)}},{key:"afterInit",value:function afterInit(){var t=this.config;I(t.onafterinit,this)}},{key:"init",value:function init(){var t,e=this,n=e.config;if(e.initParams(),n.data_url)e.convertUrlToData(n.data_url,n.data_mimeType,n.data_headers,n.data_keys,e.initWithData);else if(n.data_json)t=e.convertJsonToData(n.data_json,n.data_keys);else if(n.data_rows)t=e.convertRowsToData(n.data_rows);else{if(!n.data_columns)throw Error("url or json or rows or columns is required.");t=e.convertColumnsToData(n.data_columns)}t&&e.initWithData(t)}},{key:"initParams",value:function initParams(){var n=this,t=n.config,e=t.axis_rotated;n.datetimeId="bb-".concat(+new Date),n.clipId="".concat(n.datetimeId,"-clip"),n.clipIdForXAxis="".concat(n.clipId,"-xaxis"),n.clipIdForYAxis="".concat(n.clipId,"-yaxis"),n.clipIdForGrid="".concat(n.clipId,"-grid"),n.clipIdForSubchart="".concat(n.clipId,"-subchart"),n.clipPath=n.getClipPath(n.clipId),n.clipPathForXAxis=n.getClipPath(n.clipIdForXAxis),n.clipPathForYAxis=n.getClipPath(n.clipIdForYAxis),n.clipPathForGrid=n.getClipPath(n.clipIdForGrid),n.clipPathForSubchart=n.getClipPath(n.clipIdForSubchart),n.dragStart=null,n.dragging=!1,n.flowing=!1,n.cancelClick=!1,n.mouseover=!1,n.transiting=!1,n.color=n.generateColor(),n.levelColor=n.generateLevelColor(),n.point=n.generatePoint(),n.extraLineClasses=n.generateExtraLineClass(),n.dataTimeFormat=t.data_xLocaltime?c.timeParse:c.utcParse,n.axisTimeFormat=t.axis_x_localtime?c.timeFormat:c.utcFormat,n.defaultAxisTimeFormat=function(t){var e=(t.getMilliseconds()?".%L":t.getSeconds()&&".:%S")||t.getMinutes()&&"%I:%M"||t.getHours()&&"%I %p"||t.getDay()&&1!==t.getDate()&&"%-m/%-d"||1!==t.getDate()&&"%b %d"||t.getMonth()&&"%-m/%-d"||"%Y/%-m/%-d";return n.axisTimeFormat(e)(t)},n.hiddenTargetIds=[],n.hiddenLegendIds=[],n.focusedTargetIds=[],n.defocusedTargetIds=[],n.xOrient=e?"left":"bottom",n.yOrient=e?t.axis_y_inner?"top":"bottom":t.axis_y_inner?"right":"left",n.y2Orient=e?t.axis_y2_inner?"bottom":"top":t.axis_y2_inner?"left":"right",n.subXOrient=e?"left":"bottom",n.isLegendRight="right"===t.legend_position,n.isLegendInset="inset"===t.legend_position,n.isLegendTop="top-left"===t.legend_inset_anchor||"top-right"===t.legend_inset_anchor,n.isLegendLeft="top-left"===t.legend_inset_anchor||"bottom-left"===t.legend_inset_anchor,n.legendStep=0,n.legendItemWidth=0,n.legendItemHeight=0,n.currentMaxTickWidths={x:0,y:0,y2:0},n.rotated_padding_left=30,n.rotated_padding_right=e&&!t.axis_x_show?0:30,n.rotated_padding_top=5,n.withoutFadeIn={},n.inputType=n.convertInputType(),n.axes.subx=Object(z.selectAll)([])}},{key:"initWithData",value:function initWithData(t){var e=this,n=e.config;e.axis=new P(e),n.subchart_show&&e.initBrush(),n.zoom_enabled&&(e.initZoom(),e.initZoomBehaviour());var i={element:n.bindto,classname:"bb"};if(b(n.bindto)&&(i.element=n.bindto.element||"#chart",i.classname=n.bindto.classname||i.classname),e.selectChart=k(i.element.node)?n.bindto.element:Object(z.select)(i.element?i.element:[]),e.selectChart.html("").classed(i.classname,!0),e.data.xs={},e.data.targets=e.convertDataToTargets(t),n.data_filter&&(e.data.targets=e.data.targets.filter(n.data_filter)),n.data_hide&&e.addHiddenTargetIds(!0===n.data_hide?e.mapToIds(e.data.targets):n.data_hide),n.legend_hide&&e.addHiddenLegendIds(!0===n.legend_hide?e.mapToIds(e.data.targets):n.legend_hide),e.hasType("gauge")&&(n.legend_show=!1),e.updateSizes(),e.updateScales(),e.x.domain(Object(m.extent)(e.getXDomain(e.data.targets))),e.y.domain(e.getYDomain(e.data.targets,"y")),e.y2.domain(e.getYDomain(e.data.targets,"y2")),e.subX.domain(e.x.domain()),e.subY.domain(e.y.domain()),e.subY2.domain(e.y2.domain()),e.orgXDomain=e.x.domain(),e.svg=e.selectChart.append("svg").style("overflow","hidden").style("display","block"),n.interaction_enabled&&e.inputType){var a="touch"===e.inputType;e.svg.on(a?"touchstart":"mouseenter",function(){return I(n.onover,e)}).on(a?"touchend":"mouseleave",function(){return I(n.onout,e)})}n.svg_classname&&e.svg.attr("class",n.svg_classname),e.defs=e.svg.append("defs"),e.clipChart=e.appendClip(e.defs,e.clipId),e.clipXAxis=e.appendClip(e.defs,e.clipIdForXAxis),e.clipYAxis=e.appendClip(e.defs,e.clipIdForYAxis),e.clipGrid=e.appendClip(e.defs,e.clipIdForGrid),e.clipSubchart=e.appendClip(e.defs,e.clipIdForSubchart),k(n.color_tiles)&&e.patterns&&e.patterns.forEach(function(t){return e.defs.append(function(){return t.node})}),e.updateSvgSize();var r=e.svg.append("g").attr("transform",e.getTranslate("main"));if(e.main=r,n.subchart_show&&e.initSubchart&&e.initSubchart(),e.initTooltip&&e.initTooltip(),e.initLegend&&e.initLegend(),e.initTitle&&e.initTitle(),r.append("text").attr("class","".concat(j.text," ").concat(j.empty)).attr("text-anchor","middle").attr("dominant-baseline","middle"),e.initRegion(),e.initGrid(),n.clipPath||e.axis.init(),r.append("g").attr("class",j.chart).attr("clip-path",e.clipPath),n.grid_lines_front&&e.initGridLines(),n.grid_front&&e.initXYFocusGrid(),e.initEventRect(),e.initChartElements(),r.insert("rect",n.zoom_privileged?null:"g.".concat(j.regions)).attr("class",j.zoomRect).attr("width",e.width).attr("height",e.height).style("opacity","0").on("dblclick.zoom",null),n.axis_x_extent&&e.brush.scale(e.getDefaultExtent()),n.clipPath&&e.axis.init(),e.updateTargets(e.data.targets),e.updateDimension(),n.oninit.call(e),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),n.data_onmin||n.data_onmax){var o=e.getMinMaxData();I(n.data_onmin,e,o.min),I(n.data_onmax,e,o.max)}e.bindResize(),e.api.element=e.selectChart.node()}},{key:"initChartElements",value:function initChartElements(){var n=this;["Pie","Bar","Line","Arc","Gauge","Bubble","Radar","Text"].forEach(function(t){var e="init".concat(t);n[e]&&n[e]()})}},{key:"getChartElements",value:function getChartElements(){var t=this;return{chart:t.selectChart,svg:t.svg,defs:t.defs,main:t.main,tooltip:t.tooltip,legend:t.legend,title:t.title,grid:t.grid,arc:t.arcs,bar:{bars:t.mainBar},line:{lines:t.mainLine,areas:t.mainArea,circles:t.mainCircle},text:{texts:t.texts}}}},{key:"smoothLines",value:function smoothLines(t,e){"grid"===e&&t.each(function(){var e=Object(z.select)(this),t=["x1","x2","y1","y2"].map(function(t){return Math.ceil(e.attr(t))}),n=S()(t,4),i=n[0],a=n[1],r=n[2],o=n[3];e.attr({x1:i,x2:a,y1:r,y2:o})})}},{key:"updateSizes",value:function updateSizes(){var t=this,e=t.config,n=e.axis_rotated,i=t.hasArcType(),a=t.legend?t.getLegendHeight():0,r=t.legend?t.getLegendWidth():0,o=t.isLegendRight||t.isLegendInset?0:a,s=n||i?0:t.getHorizontalAxisHeight("x"),c=e.subchart_show&&!i?e.subchart_size_height+s:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=n?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:i?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+o+t.getCurrentPaddingBottom(),left:c+(i?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:i?0:t.getCurrentPaddingRight(),bottom:s+c+o+t.getCurrentPaddingBottom(),left:i?0:t.getCurrentPaddingLeft()},t.margin2=n?{top:t.margin.top,right:NaN,bottom:20+o,left:t.rotated_padding_left}:{top:t.currentHeight-c-o,right:NaN,bottom:s+o,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(a,r),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=n?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=n?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?r+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&!e.gauge_fullCircle&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&i&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)}},{key:"updateTargets",value:function updateTargets(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType(t)&&(e.hasType("radar")?e.updateTargetsForRadar(t):e.updateTargetsForArc(t)),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()}},{key:"showTargets",value:function showTargets(){var e=this;e.svg.selectAll(".".concat(j.target)).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity","1")}},{key:"getWithOption",value:function getWithOption(n){var i={Y:!0,Subchart:!0,Transition:!0,EventRect:!0,Dimension:!0,TrimXDomain:!0,Transform:!1,UpdateXDomain:!1,UpdateOrgXDomain:!1,Legend:!1,UpdateXAxis:"UpdateXDomain",TransitionForExit:"Transition",TransitionForAxis:"Transition"};return Object.keys(i).forEach(function(t){var e=i[t];V(e)&&(e=i[e]),i[t]=q(n,"with".concat(t),e)}),i}},{key:"redraw",value:function redraw(){var n,i,r,t=0<arguments.length&&arguments[0]!==undefined?arguments[0]:{},e=1<arguments.length?arguments[1]:undefined,o=this,a=o.main,s=o.config,c=s.axis_rotated,l=o.hasType("radar"),d=o.getShapeIndices(o.isAreaType),u=o.getShapeIndices(o.isBarType),g=o.getShapeIndices(o.isLineType),h=o.hasArcType(),f=o.filterTargetsToShow(o.data.targets),p=o.xv.bind(o),x=o.getWithOption(t),m=x.Transition?s.transition_duration:0,v=x.TransitionForExit?m:0,_=x.TransitionForAxis?m:0,y=e||o.axis.generateTransitions(_);if(t.initializing&&s.tooltip_init_show||"touch"!==o.inputType||o.hideTooltip(),x.Legend&&s.legend_show?o.updateLegend(o.mapToIds(o.data.targets),t,y):x.Dimension&&o.updateDimension(!0),o.isCategorized()&&0===f.length&&o.x.domain([0,o.axes.x.selectAll(".tick").size()]),f.length?(o.updateXDomain(f,x.UpdateXDomain,x.UpdateOrgXDomain,x.TrimXDomain),!s.axis_x_tick_values&&(n=o.axis.updateXAxisTickValues(f))):(o.xAxis.tickValues([]),o.subXAxis.tickValues([])),s.zoom_rescale&&!t.flow&&(r=o.x.orgDomain()),["y","y2"].forEach(function(t){var e=o[t],n=s["axis_".concat(t,"_tick_values")],i=s["axis_".concat(t,"_tick_count")];if(e.domain(o.getYDomain(f,t,r)),!n&&i){var a=e.domain();o["".concat(t,"Axis")].tickValues(o.axis.generateTickValues(a,a.every(function(t){return 0===t})?1:i,o.isTimeSeriesY()))}}),o.axis.redraw(y,h),o.axis.updateLabels(x.Transition),(x.UpdateXDomain||x.UpdateXAxis)&&f.length)if(s.axis_x_tick_culling&&n){for(var b=1;b<n.length;b++)if(n.length/b<s.axis_x_tick_culling_max){i=b;break}o.svg.selectAll(".".concat(j.axisX," .tick text")).each(function(t){var e=n.indexOf(t);0<=e&&Object(z.select)(this).style("display",e%i?"none":"block")})}else o.svg.selectAll(".".concat(j.axisX," .tick text")).style("display","block");var T=o.generateDrawArea?o.generateDrawArea(d,!1):undefined,A=o.generateDrawBar?o.generateDrawBar(u):undefined,w=o.generateDrawLine?o.generateDrawLine(g,!1):undefined,L=o.generateXYForText(d,u,g,!0),S=o.generateXYForText(d,u,g,!1);x.Y&&(o.subY.domain(o.getYDomain(f,"y")),o.subY2.domain(o.getYDomain(f,"y2"))),o.updateXgridFocus(),a.select("text.".concat(j.text,".").concat(j.empty)).attr("x",o.width/2).attr("y",o.height/2).text(s.data_empty_label_text).transition().style("opacity",f.length?0:1),o.updateGrid(m),o.updateRegion(m),o.updateBar(v),o.updateLine(v),o.updateArea(v),o.updateCircle(),o.hasDataLabel()&&o.updateText(v),o.redrawTitle&&o.redrawTitle(),o.redrawArc&&o.redrawArc(m,v,x.Transform),l&&o.redrawRadar(m,v),s.subchart_show&&o.redrawSubchart&&o.redrawSubchart(x.Subchart,y,m,v,d,u,g),a.selectAll(".".concat(j.selectedCircles)).filter(o.isBarType.bind(o)).selectAll("circle").remove(),s.interaction_enabled&&!t.flow&&x.EventRect&&(o.redrawEventRect(),o.bindZoomEvent()),o.updateCircleY();var C=(l?o.radarCircleX:c?o.circleY:o.circleX).bind(o),k=(l?o.radarCircleY:c?o.circleX:o.circleY).bind(o),X=t.flow&&o.generateFlow({targets:f,flow:t.flow,duration:t.flow.duration,drawBar:A,drawLine:w,drawArea:T,cx:C,cy:k,xv:p,xForText:L,yForText:S}),D=(m||X)&&o.isTabVisible(),F=[o.redrawBar(A,D),o.redrawLine(w,D),o.redrawArea(T,D),o.redrawCircle(C,k,D,X),o.redrawText(L,S,t.flow,D),o.redrawRegion(D),o.redrawGrid(D)],R=X||s.onrendered?function(){X&&X(),I(s.onrendered,o)}:null;if(R)if(D){var O=o.generateWait();Object(E.transition)().duration(m).each(function(){F.reduce(function(t,e){return t.concat(e)},[]).forEach(function(t){return O.add(t)})}).call(O,R)}else R();o.mapToIds(o.data.targets).forEach(function(t){o.withoutFadeIn[t]=!0})}},{key:"updateAndRedraw",value:function updateAndRedraw(){var t,e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:{},n=this,i=n.config;e.withTransition=q(e,"withTransition",!0),e.withTransform=q(e,"withTransform",!1),e.withLegend=q(e,"withLegend",!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=q(e,"withTransitionForTransform",e.withTransition),n.updateSizes(),e.withLegend&&i.legend_show||(t=n.axis.generateTransitions(e.withTransitionForAxis?i.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(e.withTransitionForTransform,t)),n.redraw(e,t)}},{key:"redrawWithoutRescale",value:function redrawWithoutRescale(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}},{key:"isTimeSeries",value:function isTimeSeries(){return"timeseries"===this.config.axis_x_type}},{key:"isCategorized",value:function isCategorized(){return 0<=this.config.axis_x_type.indexOf("category")||this.hasType("radar")}},{key:"isCustomX",value:function isCustomX(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||W(t.data_xs))}},{key:"isTimeSeriesY",value:function isTimeSeriesY(){return"timeseries"===this.config.axis_y_type}},{key:"getTranslate",value:function getTranslate(t){var e,n,i=this,a=i.config.axis_rotated;if("main"===t)e=v(i.margin.left),n=v(i.margin.top);else if("context"===t)e=v(i.margin2.left),n=v(i.margin2.top);else if("legend"===t)e=i.margin3.left,n=i.margin3.top;else if("x"===t)e=0,n=a?0:i.height;else if("y"===t)e=0,n=a?i.height:0;else if("y2"===t)e=a?0:i.width,n=a?1:0;else if("subx"===t)e=0,n=a?0:i.height2;else if("arc"===t)e=i.arcWidth/2,n=i.arcHeight/2;else if("radar"===t){var r=(i.arcWidth-i.arcHeight)/2;e=Math.max(r,0)+4,n=r<0?Math.abs(r):v(i.margin.top)}return"translate(".concat(e,", ").concat(n,")")}},{key:"initialOpacity",value:function initialOpacity(t){return null!==this.getBaseValue(t)&&this.withoutFadeIn[t.id]?"1":"0"}},{key:"initialOpacityForCircle",value:function initialOpacityForCircle(t){return null!==this.getBaseValue(t)&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):"0"}},{key:"opacityForCircle",value:function opacityForCircle(t){var e=this.config.point_show?"1":"0";return C(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":e:"0"}},{key:"opacityForText",value:function opacityForText(){return this.hasDataLabel()?"1":"0"}},{key:"xx",value:function xx(t){var e=this.config.zoom_enabled&&this.zoomScale?this.zoomScale:this.x;return t?e(t.x):null}},{key:"xv",value:function xv(t){var e=this,n=e.getBaseValue(t);return e.isTimeSeries()?n=e.parseDate(n):e.isCategorized()&&V(n)&&(n=e.config.axis_x_categories.indexOf(n)),Math.ceil(e.x(n))}},{key:"yv",value:function yv(t){var e=t.axis&&"y2"===t.axis?this.y2:this.y;return Math.ceil(e(this.getBaseValue(t)))}},{key:"subxx",value:function subxx(t){return t?this.subX(t.x):null}},{key:"transformMain",value:function transformMain(t,e){var n,i,a,r=this;e&&e.axisX?n=e.axisX:(n=r.main.select(".".concat(j.axisX)),t&&(n=n.transition())),e&&e.axisY?i=e.axisY:(i=r.main.select(".".concat(j.axisY)),t&&(i=i.transition())),e&&e.axisY2?a=e.axisY2:(a=r.main.select(".".concat(j.axisY2)),t&&(a=a.transition())),(t?r.main.transition():r.main).attr("transform",r.getTranslate("main")),n.attr("transform",r.getTranslate("x")),i.attr("transform",r.getTranslate("y")),a.attr("transform",r.getTranslate("y2")),r.main.select(".".concat(j.chartArcs)).attr("transform",r.getTranslate("arc"))}},{key:"transformAll",value:function transformAll(t,e){var n=this;n.transformMain(t,e),n.config.subchart_show&&n.transformContext(t,e),n.legend&&n.transformLegend(t)}},{key:"updateSvgSize",value:function updateSvgSize(){var t=this,e=t.svg.select(".".concat(j.brush," .overlay")),n=e.size()?e.attr("height"):0;t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#".concat(t.clipId),"#".concat(t.clipIdForGrid)]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#".concat(t.clipIdForXAxis)).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#".concat(t.clipIdForYAxis)).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#".concat(t.clipIdForSubchart)).select("rect").attr("width",t.width).attr("height",n),t.svg.select(".".concat(j.zoomRect)).attr("width",t.width).attr("height",t.height),t.brush&&t.brush.scale(t.subX,n)}},{key:"updateDimension",value:function updateDimension(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(t),e.updateSvgSize(),e.transformAll(!1)}},{key:"bindResize",value:function bindResize(){var t=this,e=t.config;t.resizeFunction=t.generateResize(),t.resizeFunction.add(function(){return e.onresize.call(t)}),e.resize_auto&&t.resizeFunction.add(function(){t.resizeTimeout&&(window.clearTimeout(t.resizeTimeout),t.resizeTimeout=null),t.resizeTimeout=window.setTimeout(t.api.flush,100)}),t.resizeFunction.add(function(){return e.onresized.call(t)}),window.addEventListener("resize",t.resizeFunction)}},{key:"generateResize",value:function generateResize(){function callResizeFunctions(){e.forEach(function(t){return t()})}var e=[];return callResizeFunctions.add=function(t){return e.push(t)},callResizeFunctions.remove=function(t){return e.splice(e.indexOf(t),1)},callResizeFunctions}},{key:"endall",value:function endall(t,i){var a=0;t.each(function(){return++a}).on("end",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];--a||i.apply.apply(i,[this].concat(e))})}},{key:"generateWait",value:function generateWait(){var a=[],t=function(t,e){var i;!function loop(){var n=0;a.forEach(function(t){if(t.empty())n++;else try{t.transition()}catch(e){n++}}),i&&clearTimeout(i),n===a.length?e&&e():i=setTimeout(loop,50)}()};return t.add=function(t){H(t)?a=a.concat(t):a.push(t)},t}},{key:"parseDate",value:function parseDate(t){var e;return t instanceof Date?e=t:V(t)?e=this.dataTimeFormat(this.config.data_xFormat)(t):N(t)&&!isNaN(t)&&(e=new Date(+t)),(!e||isNaN(+e))&&console&&console.error&&console.error("Failed to parse x '".concat(t,"' to Date object")),e}},{key:"isTabVisible",value:function isTabVisible(){return!document[["hidden","mozHidden","msHidden","webkitHidden"].filter(function(t){return t in document})[0]]}},{key:"convertInputType",value:function convertInputType(){var t=this.config,e=this.isMobile(),n=t.interaction_inputType_mouse&&!e&&"onmouseover"in window,i=!1;return t.interaction_inputType_touch&&(i="ontouchmove"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),(n?"mouse":i&&"touch")||null}}]),ChartInternal}(),K=function Chart(t){a()(this,Chart);var e=new $(this);(this.internal=e).loadConfig(t),e.beforeInit(t),e.init(),this.$=e.getChartElements(),e.afterInit(t),function bindThis(e,n,i){Object.keys(e).forEach(function(t){n[t]=e[t].bind(i),Object.keys(e[t]).length&&bindThis(e[t],n[t],i)})}(Chart.prototype,this,this)},J=function Options(){return a()(this,Options),{bindto:"#chart",clipPath:!0,svg_classname:undefined,size_width:undefined,size_height:undefined,padding_left:undefined,padding_right:undefined,padding_top:undefined,padding_bottom:undefined,resize_auto:!0,zoom_enabled:undefined,zoom_extent:undefined,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:undefined,zoom_onzoomstart:undefined,zoom_onzoomend:undefined,zoom_resetButton:!0,zoom_x_min:undefined,zoom_x_max:undefined,interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{},onover:function onover(){},onout:function onout(){},onresize:function onresize(){},onresized:function onresized(){},onbeforeinit:undefined,oninit:function oninit(){},onafterinit:undefined,onrendered:undefined,transition_duration:350,data_x:undefined,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function data_idConverter(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:undefined,data_types:{},data_labels:{},data_labels_position:{},data_order:"desc",data_regions:{},data_color:undefined,data_colors:{},data_hide:!1,data_filter:undefined,data_stack_normalize:!1,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function data_selection_isselectable(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function data_onclick(){},data_onover:function data_onover(){},data_onout:function data_onout(){},data_onselected:function data_onselected(){},data_onunselected:function data_onunselected(){},data_onmin:undefined,data_onmax:undefined,data_url:undefined,data_headers:undefined,data_json:undefined,data_rows:undefined,data_columns:undefined,data_mimeType:undefined,data_keys:undefined,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function subchart_onbrush(){},color_pattern:[],color_tiles:undefined,color_threshold:{},legend_show:!0,legend_hide:!1,legend_contents_bindto:undefined,legend_contents_template:undefined,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:undefined,legend_item_onclick:undefined,legend_item_onover:undefined,legend_item_onout:undefined,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_usePoint:!1,axis_rotated:!1,axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:undefined,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:undefined,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:undefined,axis_x_min:undefined,axis_x_padding:{},axis_x_height:undefined,axis_x_extent:undefined,axis_x_label:{},axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:undefined,axis_y_max:undefined,axis_y_min:undefined,axis_y_inverted:!1,axis_y_center:undefined,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:undefined,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:undefined,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:undefined,axis_y_padding:{},axis_y_default:undefined,axis_y2_show:!1,axis_y2_max:undefined,axis_y2_min:undefined,axis_y2_inverted:!1,axis_y2_center:undefined,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:undefined,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:undefined,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:undefined,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_front:!1,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:undefined,point_pattern:[],point_select_r:undefined,point_type:"circle",line_connectNull:!1,line_step_type:"step",line_classes:undefined,line_point:!0,bar_padding:0,bar_radius:undefined,bar_radius_ratio:undefined,bar_width:undefined,bar_width_ratio:.6,bar_width_max:undefined,bar_zerobased:!0,bubble_maxR:35,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:undefined,pie_label_threshold:.05,pie_label_ratio:undefined,pie_expand:{},pie_expand_duration:50,pie_innerRadius:0,pie_padAngle:0,pie_padding:0,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:undefined,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:undefined,gauge_units:undefined,gauge_width:undefined,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:undefined,donut_label_threshold:.05,donut_label_ratio:undefined,donut_width:undefined,donut_title:"",donut_expand:{},donut_expand_duration:50,donut_padAngle:0,spline_interpolation_type:"cardinal",radar_axis_max:undefined,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function radar_level_text_format(t){return t%1==0?t:t.toFixed(2)},radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1,regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:undefined,tooltip_format_name:undefined,tooltip_format_value:undefined,tooltip_position:undefined,tooltip_contents:function tooltip_contents(t,e,n,i){return this.getTooltipContent?this.getTooltipContent(t,e,n,i):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function tooltip_onshow(){},tooltip_onhide:function tooltip_onhide(){},tooltip_onshown:function tooltip_onshown(){},tooltip_onhidden:function tooltip_onhidden(){},tooltip_order:null,title_text:undefined,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"}};L($.prototype,{getOptions:function getOptions(){return new J},loadConfig:function loadConfig(e){var n,i,a,r=this.config,o=function(){var t=i.shift();return t&&n&&_(n)&&t in n?(n=n[t],o()):t?undefined:n};Object.keys(r).forEach(function(t){n=e,i=t.split("_"),a=o(),G(a)&&(r[t]=a)})}}),L($.prototype,{getScale:function getScale(t,e,n){return(n?Object(u.scaleTime)():Object(u.scaleLinear)()).range([t,e])},getX:function getX(t,e,n,i){var a=this.zoomScale||this.getScale(t,e,this.isTimeSeries());return this.getCustomizedScale(n?a.domain(n):a,i)},getY:function getY(t,e,n){var i=this.getScale(t,e,this.isTimeSeriesY());return n&&i.domain(n),i},getCustomizedScale:function getCustomizedScale(i,t){var e=this,a=t||function(){return e.xAxis.tickOffset()},n=function(t,e){var n=i(t)+a();return e?n:Math.ceil(n)};for(var r in i)n[r]=i[r];return n.orgDomain=function(){return i.domain()},n.orgScale=function(){return i},e.isCategorized()&&(n.domain=function(t){var e=t;return arguments.length?(i.domain(e),n):[(e=this.orgDomain())[0],e[1]+1]}),n},getYScale:function getYScale(t){return"y2"===this.axis.getId(t)?this.y2:this.y},getSubYScale:function getSubYScale(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},updateScales:function updateScales(t){var e=this,n=e.config,i=n.axis_rotated,a=!e.x;e.xMin=i?1:0,e.xMax=i?e.height:e.width,e.yMin=i?0:e.height,e.yMax=i?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=i?0:e.height2,e.subYMax=i?e.width2:1,e.x=e.getX(e.xMin,e.xMax,a?undefined:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,a?n.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,a?n.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,a?n.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,a?n.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis("x",e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,n.axis_x_tick_outer,t),e.subXAxis=e.axis.getXAxis("subx",e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,n.axis_x_tick_outer),e.yAxis=e.axis.getYAxis("y",e.y,e.yOrient,n.axis_y_tick_format,e.yAxisTickValues,n.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis("y2",e.y2,e.y2Orient,n.axis_y2_tick_format,e.y2AxisTickValues,n.axis_y2_tick_outer),e.updateArc&&e.updateArc()}}),L($.prototype,{getYDomainMinMax:function getYDomainMinMax(c,t){var l=this,e=l.config,d="min"===t,u=e.data_groups,g=l.mapToIds(c),h=l.getValuesAsIdKeyed(c),n=d?m.min:m.max;return 0<u.length&&function(){for(var r,t,o=l["has".concat(d?"Negative":"Positive","ValueInTargets")](c),e=0;t=u[e];e++)if(0!==(t=t.filter(function(t){return 0<=g.indexOf(t)})).length){if(r=t[0],o&&h[r]){var n=d?function(t,e){h[r][e]=t<0?t:0}:function(t,e){h[r][e]=0<t?t:0};h[r].forEach(n)}for(var i,a=function(t,a){return h[a]?void h[a].forEach(function(t,e){var n=+t,i=d?0<n:n<0;l.axis.getId(a)===l.axis.getId(r)&&h[r]&&(!o||!i)&&(h[r][e]+=n)}):"continue"},s=1;i=t[s];s++)a(0,i)}}(),n(Object.keys(h).map(function(t){return n(h[t])}))},getYDomainMin:function getYDomainMin(t){return this.getYDomainMinMax(t,"min")},getYDomainMax:function getYDomainMax(t){return this.getYDomainMinMax(t,"max")},getYDomain:function getYDomain(t,e,n){var i=this,a=i.config;if(i.isStackNormalized())return[0,100];var r,o=t.filter(function(t){return i.axis.getId(t.id)===e}),s=n?i.filterByXDomain(o,n):o,c="y2"===e?a.axis_y2_min:a.axis_y_min,l="y2"===e?a.axis_y2_max:a.axis_y_max,d=i.getYDomainMin(s),u=i.getYDomainMax(s),g="y2"===e?a.axis_y2_center:a.axis_y_center,h=i.hasType("bar",s)&&a.bar_zerobased||i.hasType("area",s)&&a.area_zerobased,f="y2"===e?a.axis_y2_inverted:a.axis_y_inverted,p=i.hasDataLabel()&&a.axis_rotated,x=i.hasDataLabel()&&!a.axis_rotated;if(d=C(c)?c:C(l)?d<l?d:l-10:d,u=C(l)?l:C(c)?c<u?u:c+10:u,0===s.length)return"y2"===e?i.y2.domain():i.y.domain();isNaN(d)&&(d=0),isNaN(u)&&(u=d),d===u&&(d<0?u=0:d=0);var m=0<=d&&0<=u,v=d<=0&&u<=0;(C(c)&&m||C(l)&&v)&&(h=!1),h&&(m&&(d=0),v&&(u=0));var _=Math.abs(u-d),y=.1*_,b=.1*_;if(G(g)){var T=Math.max(Math.abs(d),Math.abs(u));u=g+T,d=g-T}if(p){r=i.getDataLabelLength(d,u,"width");var A=B(i.y.range()),w=[r[0]/A,r[1]/A];y+=_*(w[1]/(1-w[0]-w[1])),b+=_*(w[0]/(1-w[0]-w[1]))}else x&&(r=i.getDataLabelLength(d,u,"height"),y+=i.axis.convertPixelsToAxisPadding(r[1],_),b+=i.axis.convertPixelsToAxisPadding(r[0],_));"y"===e&&W(a.axis_y_padding)&&(y=i.axis.getPadding(a.axis_y_padding,"top",y,_),b=i.axis.getPadding(a.axis_y_padding,"bottom",b,_)),"y2"===e&&W(a.axis_y2_padding)&&(y=i.axis.getPadding(a.axis_y2_padding,"top",y,_),b=i.axis.getPadding(a.axis_y2_padding,"bottom",b,_)),h&&(m&&(b=d),v&&(y=-u));var L=[d-b,u+y];return f?L.reverse():L},getXDomainMinMax:function getXDomainMinMax(t,e){var n=this.config["axis_x_".concat(e)],i="min"===e?m.min:m.max;return G(n)?this.isTimeSeries()?this.parseDate(n):n:i(t,function(t){return i(t.values,function(t){return t.x})})},getXDomainMin:function getXDomainMin(t){return this.getXDomainMinMax(t,"min")},getXDomainMax:function getXDomainMax(t){return this.getXDomainMinMax(t,"max")},getXDomainPadding:function getXDomainPadding(t){var e,n,i=this.config,a=t[1]-t[0],r=i.axis_x_padding,o=n=this.isCategorized()?0:this.hasType("bar")?1<(e=this.getMaxDataCount())?a/(e-1)/2:.5:.01*a,s=n;return b(r)&&W(r)?(o=C(r.left)?r.left:n,s=C(r.right)?r.right:n):N(i.axis_x_padding)&&(s=o=r),{left:o,right:s}},getXDomain:function getXDomain(t){var e=this,n=[e.getXDomainMin(t),e.getXDomainMax(t)],i=n[0],a=n[1],r=e.getXDomainPadding(n),o=0,s=0;return i-a!=0||e.isCategorized()||(a=e.isTimeSeries()?(i=new Date(.5*i.getTime()),new Date(1.5*a.getTime())):(i=0===i?1:.5*i,0===a?-1:1.5*a)),(i||0===i)&&(o=e.isTimeSeries()?new Date(i.getTime()-r.left):i-r.left),(a||0===a)&&(s=e.isTimeSeries()?new Date(a.getTime()+r.right):a+r.right),[o,s]},updateXDomain:function updateXDomain(t,e,n,i,a){var r=this,o=r.config.zoom_enabled;if(n&&(r.x.domain(a||Object(m.extent)(r.getXDomain(t))),r.orgXDomain=r.x.domain(),o&&r.zoom.updateScaleExtent(),r.subX.domain(r.x.domain()),r.brush&&r.brush.scale(r.subX)),e){var s=a||!r.brush||w(r)?r.orgXDomain:A(r).map(r.subX.invert);r.x.domain(s),o&&r.zoom.updateScaleExtent()}return i&&r.x.domain(r.trimXDomain(r.x.orgDomain())),r.x.domain()},trimXDomain:function trimXDomain(t){var e=this.getZoomDomain(),n=e[0],i=e[1];return t[0]<=n&&(t[1]=+t[1]+(n-t[0]),t[0]=n),i<=t[1]&&(t[0]=+t[0]-(t[1]-i),t[1]=i),t}});var Q=n(17);L($.prototype,{isX:function isX(t){var e,n,i,a=this.config,r=a.data_x&&t===a.data_x,o=W(a.data_xs)&&(e=a.data_xs,n=t,i=!1,Object.keys(e).forEach(function(t){return e[t]===n&&(i=!0)}),i);return r||o},isNotX:function isNotX(t){return!this.isX(t)},isStackNormalized:function isStackNormalized(){var t=this.config;return t.data_stack_normalize&&t.data_groups.length},isGrouped:function isGrouped(e){return this.config.data_groups.map(function(t){return 0<=t.indexOf(e)})[0]},getXKey:function getXKey(t){var e=this.config;return e.data_x?e.data_x:W(e.data_xs)?e.data_xs[t]:null},getXValuesOfXKey:function getXValuesOfXKey(e,t){var n,i=this;return(t&&W(t)?i.mapToIds(t):[]).forEach(function(t){i.getXKey(t)===e&&(n=i.data.xs[t])}),n},getIndexByX:function getIndexByX(t){var e=this.filterByX(this.data.targets,t);return e.length?e[0].index:null},getXValue:function getXValue(t,e){return t in this.data.xs&&this.data.xs[t]&&C(this.data.xs[t][e])?this.data.xs[t][e]:e},getOtherTargetXs:function getOtherTargetXs(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function getOtherTargetX(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function addXs(e){var n=this;Object.keys(e).forEach(function(t){n.config.data_xs[t]=e[t]})},hasMultipleX:function hasMultipleX(e){return 1<Object(Q.set)(Object.keys(e).map(function(t){return e[t]})).size()},isMultipleX:function isMultipleX(){return W(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function addName(t){var e;return t&&(e=this.config.data_names[t.id],t.name=e===undefined?t.id:e),t},getAllValuesOnIndex:function getAllValuesOnIndex(e){var n=this;return n.filterTargetsToShow(n.data.targets).map(function(t){return n.addName(n.getValueOnIndex(t.values,e))})},getValueOnIndex:function getValueOnIndex(t,e){var n=t.filter(function(t){return t.index===e});return n.length?n[0]:null},updateTargetX:function updateTargetX(t,i){var a=this;t.forEach(function(n){n.values.forEach(function(t,e){t.x=a.generateTargetX(i[e],n.id,e)}),a.data.xs[n.id]=i})},updateTargetXs:function updateTargetXs(t,e){var n=this;t.forEach(function(t){e[t.id]&&n.updateTargetX([t],e[t.id])})},generateTargetX:function generateTargetX(t,e,n){var i=this,a=i.isCategorized()?n:t||n;return i.isTimeSeries()?a=t?i.parseDate(t):i.parseDate(i.getXValue(e,n)):i.isCustomX()&&!i.isCategorized()&&(a=C(t)?+t:i.getXValue(e,n)),a},cloneTarget:function cloneTarget(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},updateXs:function updateXs(){var e=this;e.data.targets.length&&(e.xs=[],e.data.targets[0].values.forEach(function(t){e.xs[t.index]=t.x}))},getPrevX:function getPrevX(t){var e=this.xs[t-1];return G(e)?e:null},getNextX:function getNextX(t){var e=this.xs[t+1];return G(e)?e:null},getBaseValue:function getBaseValue(t){var e=t.value;return e&&this.isAreaRangeType(t)&&(e=this.getAreaRangeData(t,"mid")),e},getMinMaxValue:function getMinMaxValue(t){var e,n,i=this.getBaseValue.bind(this);return(t||this.data.targets.map(function(t){return t.values})).forEach(function(t){e=Object(m.min)([e,Object(m.min)(t,i)]),n=Object(m.max)([n,Object(m.max)(t,i)])}),{min:e,max:n}},getMinMaxData:function getMinMaxData(){var i=this,t="$minMaxData",e=i.getCache(t);if(!e){var n=i.data.targets.map(function(t){return t.values}),a=i.getMinMaxValue(n),r=[],o=[];n.forEach(function(t){var e=i.getFilteredDataByValue(t,a.min),n=i.getFilteredDataByValue(t,a.max);e.length&&(r=r.concat(e)),n.length&&(o=o.concat(n))}),i.addCache(t,e={min:r,max:o})}return e},getTotalPerIndex:function getTotalPerIndex(){var n=this.getCache("$totalPerIndex");return this.isStackNormalized()&&!n&&(n=[],this.data.targets.forEach(function(t){t.values.forEach(function(t,e){n[e]||(n[e]=0),n[e]+=N(t.value)?t.value:0})})),n},getTotalDataSum:function getTotalDataSum(){var t="$totalDataSum",e=this.getCache(t);if(!e){var n=0;this.data.targets.map(function(t){return t.values}).forEach(function(t){n+=Object(m.sum)(t,function(t){return t.value})}),this.addCache(t,e=n)}return e},getFilteredDataByValue:function getFilteredDataByValue(t,e){var n=this;return t.filter(function(t){return n.getBaseValue(t)===e})},getMaxDataCount:function getMaxDataCount(){return Object(m.max)(this.data.targets,function(t){return t.values.length})},getMaxDataCountTarget:function getMaxDataCountTarget(t){var e,n=t.length,i=0;return 1<n?t.forEach(function(t){t.values.length>i&&(i=(e=t).values.length)}):e=n?t[0]:null,e},mapToIds:function mapToIds(t){return t.map(function(t){return t.id})},mapToTargetIds:function mapToTargetIds(t){return t?H(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function hasTarget(t,e){for(var n,i=this.mapToIds(t),a=0;n=i[a];a++)if(n===e)return!0;return!1},isTargetToShow:function isTargetToShow(t){return this.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function isLegendToShow(t){return this.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function filterTargetsToShow(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})},mapTargetsToUniqueXs:function mapTargetsToUniqueXs(t){var e=Object(Q.set)(Object(m.merge)(t.map(function(t){return t.values.map(function(t){return+t.x})}))).values();return(e=this.isTimeSeries()?e.map(function(t){return new Date(+t)}):e.map(function(t){return+t})).sort(function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN})},addHiddenTargetIds:function addHiddenTargetIds(t){this.hiddenTargetIds=this.hiddenTargetIds.concat(t)},removeHiddenTargetIds:function removeHiddenTargetIds(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0})},addHiddenLegendIds:function addHiddenLegendIds(t){this.hiddenLegendIds=this.hiddenLegendIds.concat(t)},removeHiddenLegendIds:function removeHiddenLegendIds(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},getValuesAsIdKeyed:function getValuesAsIdKeyed(t){var e={};return t.forEach(function(t){var n=[];t.values.forEach(function(t){var e=t.value;H(e)?n.push.apply(n,Y()(e)):b(e)&&"high"in e?n.push.apply(n,Y()(Object.values(e))):n.push(e)}),e[t.id]=n}),e},checkValueInTargets:function checkValueInTargets(t,e){for(var n,i=Object.keys(t),a=0;a<i.length;a++){n=t[i[a]].values;for(var r=0;r<n.length;r++)if(e(n[r].value))return!0}return!1},hasNegativeValueInTargets:function hasNegativeValueInTargets(t){return this.checkValueInTargets(t,function(t){return t<0})},hasPositiveValueInTargets:function hasPositiveValueInTargets(t){return this.checkValueInTargets(t,function(t){return 0<t})},_checkOrder:function _checkOrder(t){var e=this.config;return V(e.data_order)&&e.data_order.toLowerCase()===t},isOrderDesc:function isOrderDesc(){return this._checkOrder("desc")},isOrderAsc:function isOrderAsc(){return this._checkOrder("asc")},orderTargets:function orderTargets(t){var e=this.config,n=Y()(t),r=this.isOrderAsc(),i=this.isOrderDesc();return r||i?n.sort(function(t,e){var n=function(t,e){return t+Math.abs(e.value)},i=t.values.reduce(n,0),a=e.values.reduce(n,0);return r?a-i:i-a}):k(e.data_order)&&n.sort(e.data_order),n},filterByX:function filterByX(t,e){return Object(m.merge)(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},filterRemoveNull:function filterRemoveNull(t){var e=this;return t.filter(function(t){return C(e.getBaseValue(t))})},filterByXDomain:function filterByXDomain(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},hasDataLabel:function hasDataLabel(){var t=this.config.data_labels;return f(t)&&t||_(t)&&W(t)},getDataLabelLength:function getDataLabelLength(t,e,n){var i=this,a=[0,0];return i.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return i.dataLabelFormat(t.id)(t)}).each(function(t,e){a[e]=1.3*this.getBoundingClientRect()[n]}).remove(),a},isNoneArc:function isNoneArc(t){return this.hasTarget(this.data.targets,t.id)},isArc:function isArc(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function findSameXOfValues(t,e){var n,i=t[e].x,a=[];for(n=e-1;0<=n&&i===t[n].x;n--)a.push(t[n]);for(n=e;n<t.length&&i===t[n].x;n++)a.push(t[n]);return a},findClosestFromTargets:function findClosestFromTargets(t,e){var n=this,i=t.map(function(t){return n.findClosest(t.values,e)});return n.findClosest(i,e)},findClosest:function findClosest(t,n){var i,a=this,r=a.config.point_sensitivity;return t.filter(function(t){return t&&a.isBarType(t.id)}).forEach(function(t){var e=a.main.select(".".concat(j.bars).concat(a.getTargetSelectorSuffix(t.id)," .").concat(j.bar,"-").concat(t.index)).node();!i&&a.isWithinBar(e)&&(i=t)}),t.filter(function(t){return t&&!a.isBarType(t.id)}).forEach(function(t){var e=a.dist(t,n);e<r&&(r=e,i=t)}),i},dist:function dist(t,e){var n=this.config.axis_rotated,i=n?1:0,a=n?0:1,r=this.circleY(t,t.index),o=this.x(t.x);return Math.sqrt(Math.pow(o-e[i],2)+Math.pow(r-e[a],2))},convertValuesToStep:function convertValuesToStep(t){var e=this.config,n=e.axis_rotated,i=e.line_step_type,a=this.isCategorized(),r=H(t)?t.concat():[t];if(!n&&!a)return t;var o=r[0].id,s=r[0].x-1,c=r[0].value;return a&&r.unshift({x:s,value:c,id:o}),"step-after"===i&&r.unshift({x:s-1,value:c,id:o}),c=r[(s=r.length)-1].value,a&&r.push({x:s,value:c,id:o}),"step-before"===i&&r.push({x:s+1,value:c,id:o}),r},convertValuesToRange:function convertValuesToRange(t){var e=H(t)?t.concat():[t],i=[];return e.forEach(function(t){var e=t.x,n=t.id;i.push({x:e,id:n,value:t.value[0]}),i.push({x:e,id:n,value:t.value[2]})}),i},updateDataAttributes:function updateDataAttributes(t,e){var n=this.config["data_".concat(t)];return O(e)||(Object.keys(e).forEach(function(t){n[t]=e[t]}),this.redraw({withLegend:!0})),n},getAreaRangeData:function getAreaRangeData(t,e){var n=t.value;if(H(n)){var i=["high","mid","low"].indexOf(e);return-1===i?null:n[i]}return n[e]},getRatio:function getRatio(t,e,n){var i=this,a=i.config,r=i.api,o=0;if(e&&r.data.shown.call(r).length){var s=r.data.values.bind(r);if(o=e.ratio||e.value,"arc"===t)if(i.pie.padAngle()()){var c=i.getTotalDataSum();i.hiddenTargetIds.length&&(c-=Object(m.sum)(s(i.hiddenTargetIds))),o=e.value/c}else o=(e.endAngle-e.startAngle)/(Math.PI*(i.hasType("gauge")&&!a.gauge_fullCircle?1:2));else if("index"===t){var l=this.getTotalPerIndex();if(i.hiddenTargetIds.length){var d=s(i.hiddenTargetIds,!1);d.length&&(d=d.reduce(function(t,n){return t.map(function(t,e){return(N(t)?t:0)+n[e]})}),l=l.map(function(t,e){return t-d[e]}))}e.ratio=N(e.value)&&l&&0<l[e.index]?e.value/l[e.index]:0,o=e.ratio}else"radar"===t&&(o=parseFloat(Math.max(e.value,0))/i.maxValue*a.radar_size_ratio)}return n&&o?100*o:o}});var tt=n(18);L($.prototype,{convertUrlToData:function convertUrlToData(e){var n=this,i=1<arguments.length&&arguments[1]!==undefined?arguments[1]:"csv",t=2<arguments.length?arguments[2]:undefined,a=3<arguments.length?arguments[3]:undefined,r=4<arguments.length?arguments[4]:undefined,o=new XMLHttpRequest;if(t)for(var s,c=Object.keys(t),l=0;l<c.length;l++)s=c[l],o.setRequestHeader(s,t[s]);o.open("GET",e),o.onreadystatechange=function(){if(4===o.readyState){if(200!==o.status)throw new Error("".concat(e,": Something went wrong loading!"));var t=o.responseText;t&&r.call(n,n["convert".concat(D(i),"ToData")]("json"===i?JSON.parse(t):t,a))}},o.send()},_convertCsvTsvToData:function _convertCsvTsvToData(t,e){var n,i=t.rows(e);return 1===i.length?(n=[{}],i[0].forEach(function(t){n[0][t]=null})):n=t.parse(e),n},convertCsvToData:function convertCsvToData(t){return this._convertCsvTsvToData({rows:tt.csvParseRows,parse:tt.csvParse},t)},convertTsvToData:function convertTsvToData(t){return this._convertCsvTsvToData({rows:tt.tsvParseRows,parse:tt.tsvParse},t)},convertJsonToData:function convertJsonToData(n,t){var d,e,u=this,i=this.config,g=[];if(H(n)){var a=t||i.data_keys;a.x?(d=a.value.concat(a.x),i.data_x=a.x):d=a.value,g.push(d),n.forEach(function(t){var e=[],n=!0,i=!1,a=undefined;try{for(var r,o=d[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value,c=u.findValueInJson(t,s);O(c)&&(c=null),e.push(c)}}catch(l){i=!0,a=l}finally{try{n||null==o["return"]||o["return"]()}finally{if(i)throw a}}g.push(e)}),e=this.convertRowsToData(g)}else Object.keys(n).forEach(function(t){var e=n[t].concat();e.unshift(t),g.push(e)}),e=this.convertColumnsToData(g);return e},findValueInJson:function findValueInJson(t,e){if(t[e]!==undefined)return t[e];var n=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),i=t,a=!0,r=!1,o=undefined;try{for(var s,c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;if(!(l in i)){i=undefined;break}i=i[l]}}catch(d){r=!0,o=d}finally{try{a||null==c["return"]||c["return"]()}finally{if(r)throw o}}return i},convertRowsToData:function convertRowsToData(t){for(var e=t[0],n=[],i=1,a=t.length;i<a;i++){for(var r={},o=0,s=t[i].length;o<s;o++){if(O(t[i][o]))throw new Error("Source data is missing a component at (".concat(i,", ").concat(o,")!"));r[e[o]]=t[i][o]}n.push(r)}return n},convertColumnsToData:function convertColumnsToData(t){for(var e=[],n=0,i=t.length;n<i;n++)for(var a=t[n][0],r=1,o=t[n].length;r<o;r++){if(O(e[r-1])&&(e[r-1]={}),O(t[n][r]))throw new Error("Source data is missing a component at (".concat(n,", ").concat(r,")!"));e[r-1][a]=t[n][r]}return e},convertDataToTargets:function convertDataToTargets(t,i){var a,r=this,u=this,g=u.config,e=Object(Q.keys)(t[0]).filter(u.isNotX,u),o=Object(Q.keys)(t[0]).filter(u.isX,u);e.forEach(function(n){var e=r.getXKey(n);r.isCustomX()||r.isTimeSeries()?0<=o.indexOf(e)?a=(i&&u.data.xs[n]||[]).concat(t.map(function(t){return t[e]}).filter(C).map(function(t,e){return u.generateTargetX(t,n,e)})):g.data_x?a=r.getOtherTargetXs():W(g.data_xs)&&(a=u.getXValuesOfXKey(e,u.data.targets)):a=t.map(function(t,e){return e}),a&&(r.data.xs[n]=a)}),e.forEach(function(t){if(!a)throw new Error('x is not defined for id = "'.concat(t,'".'))});var n=e.map(function(r,o){var s=g.data_idConverter(r),c=u.getXKey(r),l=u.isCustomX()&&u.isCategorized(),d=l&&t.map(function(t){return t.x}).every(function(t){return-1<g.axis_x_categories.indexOf(t)});return{id:s,id_org:r,values:t.map(function(t,e){var n,i=t[c],a=t[r];return a=null===a||isNaN(a)?H(a)||b(a)&&a.high?a:null:+t[r],l&&0===o&&!O(i)?(!d&&0===o&&0===e&&(g.axis_x_categories=[]),-1===(n=g.axis_x_categories.indexOf(i))&&(n=g.axis_x_categories.length,g.axis_x_categories.push(i))):n=u.generateTargetX(i,r,e),(O(t[r])||u.data.xs[r].length<=e)&&(n=undefined),{x:n,value:a,id:s}}).filter(function(t){return G(t.x)})}});return n.forEach(function(t){g.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:Infinity)-(e.x||0===e.x?e.x:Infinity)})),t.values.forEach(function(t,e){var n=u.data.targets?u.getIndexByX(t.x):null;t.index=null===n?e:n}),u.data.xs[t.id].sort(function(t,e){return t-e})}),u.hasNegativeValue=u.hasNegativeValueInTargets(n),u.hasPositiveValue=u.hasPositiveValueInTargets(n),g.data_type&&u.setTargetType(u.mapToIds(n).filter(function(t){return!(t in g.data_types)}),g.data_type),n.forEach(function(t){return u.addCache(t.id_org,t,!0)}),n}}),L($.prototype,{load:function load(t,n){var i=this,a=t;a&&(n.filter&&(a=a.filter(n.filter)),(n.type||n.types)&&a.forEach(function(t){var e=n.types&&n.types[t.id]||n.type;i.setTargetType(t.id,e)}),i.data.targets.forEach(function(t){for(var e=0;e<a.length;e++)if(t.id===a[e].id){t.values=a[e].values,a.splice(e,1);break}}),i.data.targets=i.data.targets.concat(a)),i.updateTargets(i.data.targets),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.done&&n.done()},loadFromArgs:function loadFromArgs(e){var t,n=this;n.resetCache(),e.data?t=e.data:e.url?n.convertUrlToData(e.url,e.mimeType,e.headers,e.keys,function(t){n.load(n.convertDataToTargets(t),e)}):e.json?t=n.convertJsonToData(e.json,e.keys):e.rows?t=n.convertRowsToData(e.rows):e.columns&&(t=n.convertColumnsToData(e.columns)),n.load(t?n.convertDataToTargets(t):null,e)},unload:function unload(t,e){var n=this,i=e,a=t;return n.resetCache(),i||(i=function(){}),(a=a.filter(function(t){return n.hasTarget(n.data.targets,t)}))&&0!==a.length?(n.svg.selectAll(a.map(function(t){return n.selectorTarget(t)})).transition().style("opacity","0").remove().call(n.endall,i),void a.forEach(function(e){n.withoutFadeIn[e]=!1,n.legend&&n.legend.selectAll(".".concat(j.legendItem).concat(n.getTargetSelectorSuffix(e))).remove(),n.data.targets=n.data.targets.filter(function(t){return t.id!==e})})):void i()}}),L($.prototype,{categoryName:function categoryName(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t}});var et=n(19);L($.prototype,{initEventRect:function initEventRect(){this.main.select(".".concat(j.chart)).append("g").attr("class",j.eventRects).style("fill-opacity","0")},redrawEventRect:function redrawEventRect(){var t,e=this,n=e.config,i=n.zoom_enabled,a=e.isMultipleX(),r=e.main.select(".".concat(j.eventRects)).style("cursor",!i||!0!==i&&"wheel"!==i.type?null:n.axis_rotate?"ns-resize":"ew-resize").classed(j.eventRectsMultiple,a).classed(j.eventRectsSingle,!a);if(r.selectAll(".".concat(j.eventRect)).remove(),e.eventRect=r.selectAll(".".concat(j.eventRect)),a)t=e.eventRect.data([0]),t=e.generateEventRectsForMultipleXs(t.enter()).merge(t);else{var o=e.getMaxDataCountTarget(e.data.targets);r.datum(o?o.values:[]),e.eventRect=r.selectAll(".".concat(j.eventRect)),(t=e.eventRect.data(function(t){return t})).exit().remove(),t=e.generateEventRectsForSingleX(t.enter()).merge(t)}e.updateEventRect(t),"touch"!==e.inputType||e.svg.on("touchstart.eventRect")||e.hasArcType()||e.bindTouchOnEventRect(a)},bindTouchOnEventRect:function bindTouchOnEventRect(a){var r,o=this,s=o.config,c=function(){var t=z.event.changedTouches[0];return Object(z.select)(document.elementFromPoint(t.clientX,t.clientY))},l=function(t){var e=t&&t.attr("class")&&1*t.attr("class").replace(new RegExp("(".concat(j.eventRect,"-?|s)"),"g"),"");return(isNaN(e)||null===e)&&(e=-1),e},t=s.interaction_inputType_touch.preventDefault,d=f(t)&&t||!1,u=!isNaN(t)&&t||null;o.svg.on("touchstart.eventRect touchmove.eventRect",function(){var t,e,n,i=c();if(!i.empty()&&i.classed(j.eventRect)){if(o.dragging||o.flowing||o.hasArcType())return;t=z.event,e=t.type,n=t.changedTouches[0]["client".concat(s.axis_rotated?"Y":"X")],"touchstart"===e?d?t.preventDefault():null!==u&&(r=n):"touchmove"===e&&(d||!0===r||null!==u&&Math.abs(r-n)>=u)&&(r=!0,t.preventDefault()),function(t){if(a)o.selectRectForMultipleXs(t);else{var e=c(),n=l(e);o.setOver(n),-1===n?o.unselectRect():o.selectRectForSingle(t,e,n)}}(this)}else o.unselectRect()}).on("touchend.eventRect",function(){var t=c();if(!t.empty()&&t.classed(j.eventRect)){if(o.hasArcType()||!o.toggleShape||o.cancelClick)return void(o.cancelClick&&(o.cancelClick=!1));var e=l(t);a||-1===e||o.main.selectAll(".".concat(j.shape,"-").concat(e)).each(function(t){return s.data_onout.call(o.api,t)})}})},updateEventRect:function updateEventRect(t){var e,n,i,a,r=this,o=r.config,s=r.zoomScale||r.x,c=t||r.eventRect.data(),l=o.axis_rotated;if(r.isMultipleX())n=e=0,i=r.width,a=r.height;else{var d,u;if(r.isCategorized())d=r.getEventRectWidth(),u=function(t){return s(t.x)-d/2};else{r.updateXs();var g=function(t){var e=t.index;return{prev:r.getPrevX(e),next:r.getNextX(e)}};d=function(t){var e=g(t);return null===e.prev&&null===e.next?l?r.height:r.width:(null===e.prev&&(e.prev=s.domain()[0]),null===e.next&&(e.next=s.domain()[1]),Math.max(0,(s(e.next)-s(e.prev))/2))},u=function(t){var e=g(t),n=r.data.xs[t.id][t.index];return null===e.prev&&null===e.next?0:(null===e.prev&&(e.prev=s.domain()[0]),(s(n)+s(e.prev))/2)}}e=l?0:u,n=l?u:0,i=l?r.width:d,a=l?d:r.height}c.attr("class",r.classEvent.bind(r)).attr("x",e).attr("y",n).attr("width",i).attr("height",a)},selectRectForSingle:function selectRectForSingle(n,i,a){var r=this,o=r.config,s=o.data_selection_enabled,c=o.data_selection_grouped,l=o.tooltip_grouped,t=r.getAllValuesOnIndex(a);l&&(r.showTooltip(t,n),r.showXGridFocus(t),!s||c)||r.main.selectAll(".".concat(j.shape,"-").concat(a)).each(function(){Object(z.select)(this).classed(j.EXPANDED,!0),s&&i.style("cursor",c?"pointer":null),l||(r.hideXGridFocus(),r.hideTooltip(),!c&&r.expandCirclesBars(a))}).filter(function(t){return r.isWithinShape(this,t)}).call(function(t){var e=t.data();s&&(c||o.data_selection_isselectable(e))&&i.style("cursor","pointer"),l||(r.showTooltip(e,n),r.showXGridFocus(e),r.unexpandCircles(),t.each(function(t){return r.expandCirclesBars(a,t.id)}))})},expandCirclesBars:function expandCirclesBars(t,e,n){this.config.point_focus_expand_enabled&&this.expandCircles(t,e,n),this.expandBars(t,e,n)},selectRectForMultipleXs:function selectRectForMultipleXs(t){var e=this,n=e.config,i=e.filterTargetsToShow(e.data.targets);if(!e.dragging&&!e.hasArcType(i)){var a=Object(z.mouse)(t),r=e.findClosestFromTargets(i,a);if(e.mouseover&&(!r||r.id!==e.mouseover.id)&&(n.data_onout.call(e.api,e.mouseover),e.mouseover=undefined),!r)return void e.unselectRect();var o=(e.isBubbleType(r)||e.isScatterType(r)||!n.tooltip_grouped?[r]:e.filterByX(i,r.x)).map(function(t){return e.addName(t)});e.showTooltip(o,t),e.expandCirclesBars(r.index,r.id,!0),e.showXGridFocus(o),(e.isBarType(r.id)||e.dist(r,a)<n.point_sensitivity)&&(e.svg.select(".".concat(j.eventRect)).style("cursor","pointer"),!e.mouseover&&(n.data_onover.call(e.api,r),e.mouseover=r))}},unselectRect:function unselectRect(){var t=this;t.svg.select(".".concat(j.eventRect)).style("cursor",null),t.hideXGridFocus(),t.hideTooltip(),t._handleLinkedCharts(!1),t.unexpandCircles(),t.unexpandBars()},setOver:function setOver(t){var e=this,n=e.config;e.expandCirclesBars(t,null,!0),-1!==t&&e.main.selectAll(".".concat(j.shape,"-").concat(t)).each(function(t){return n.data_onover.call(e.api,t)})},getDraggableSelection:function getDraggableSelection(){var t=this,e=t.config;return e.interaction_enabled&&e.data_selection_draggable&&t.drag?Object(et.drag)().on("drag",function(){t.drag(Object(z.mouse)(this))}).on("start",function(){t.dragstart(Object(z.mouse)(this))}).on("end",function(){t.dragend()}):function(){}},generateEventRectsForSingleX:function generateEventRectsForSingleX(t){var i=this,n=i.config,e=t.append("rect").attr("class",i.classEvent.bind(i)).style("cursor",n.data_selection_enabled&&n.data_selection_grouped?"pointer":null).on("click",function(t){i.clickHandlerForSingleX.bind(this)(t,i)}).call(i.getDraggableSelection());return"mouse"===i.inputType&&e.on("mouseover",function(t){i.dragging||i.flowing||i.hasArcType()||i.setOver(t.index)}).on("mousemove",function(t){if(!(i.dragging||i.flowing||i.hasArcType())){var e=t.index,n=i.svg.select(".".concat(j.eventRect,"-").concat(e));i.isStepType(t)&&"step-after"===i.config.line_step_type&&Object(z.mouse)(this)[0]<i.x(i.getXValue(t.id,e))&&(e-=1),-1===e?i.unselectRect():i.selectRectForSingle(this,n,e)}}).on("mouseout",function(t){if(i.config&&!i.hasArcType()){var e=t.index;i.unselectRect(),i.main.selectAll(".".concat(j.shape,"-").concat(e)).each(function(t){return n.data_onout.call(i.api,t)})}}),e},clickHandlerForSingleX:function clickHandlerForSingleX(t,e){var n=e,i=n.config;if(n.hasArcType()||!n.toggleShape||n.cancelClick)n.cancelClick&&(n.cancelClick=!1);else{var a=t.index;n.main.selectAll(".".concat(j.shape,"-").concat(a)).each(function(t){(i.data_selection_grouped||n.isWithinShape(this,t))&&(n.toggleShape(this,t,a),i.data_onclick.call(n.api,t,this))})}},generateEventRectsForMultipleXs:function generateEventRectsForMultipleXs(t){var e=this,n=t.append("rect").attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("class",j.eventRect).on("click",function(){e.clickHandlerForMultipleXS.bind(this)(e)}).call(e.getDraggableSelection());return"mouse"===e.inputType&&n.on("mouseover mousemove",function(){e.selectRectForMultipleXs(this)}).on("mouseout",function(){!e.config||e.hasArcType()||e.unselectRect()}),n},clickHandlerForMultipleXS:function clickHandlerForMultipleXS(t){var e=t,n=e.config,i=e.filterTargetsToShow(e.data.targets);if(!e.hasArcType(i)){var a=Object(z.mouse)(this),r=e.findClosestFromTargets(i,a);!r||(e.isBarType(r.id)||e.dist(r,a)<n.point_sensitivity)&&e.main.selectAll(".".concat(j.shapes).concat(e.getTargetSelectorSuffix(r.id))).selectAll(".".concat(j.shape,"-").concat(r.index)).each(function(){(n.data_selection_grouped||e.isWithinShape(this,r))&&(e.toggleShape(this,r,r.index),n.data_onclick.call(e.api,r,this))})}},dispatchEvent:function dispatchEvent(t,e,n){var i=".".concat(this.isMultipleX()?j.eventRect:"".concat(j.eventRect,"-").concat(e)),a=this.main.select(i).node(),r=a.getBoundingClientRect(),o=r.left+(n?n[0]:0)+r.width/2,s=r.top+(n?n[1]:0);F[/^(mouse|click)/.test(t)?"mouse":"touch"](a,t,{screenX:o,screenY:s,clientX:o,clientY:s})}}),L($.prototype,{getCurrentWidth:function getCurrentWidth(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function getCurrentHeight(){var t=this.config,e=t.size_height||this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getCurrentPaddingTop:function getCurrentPaddingTop(){var t=this.config,e=C(t.padding_top)?t.padding_top:0;return this.title&&this.title.node()&&(e+=this.getTitlePadding()),e},getCurrentPaddingBottom:function getCurrentPaddingBottom(){var t=this.config;return C(t.padding_bottom)?t.padding_bottom:0},getCurrentPaddingLeft:function getCurrentPaddingLeft(t){var e=this.config;return C(e.padding_left)?e.padding_left:e.axis_rotated?e.axis_x_show?Math.max(p(this.getAxisWidthByAxisId("x",t)),40):1:!e.axis_y_show||e.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:p(this.getAxisWidthByAxisId("y",t))},getCurrentPaddingRight:function getCurrentPaddingRight(){var t=this,e=t.config,n=t.isLegendRight?t.getLegendWidth()+20:0;return C(e.padding_right)?e.padding_right+1:e.axis_rotated?10+n:!e.axis_y2_show||e.axis_y2_inner?2+n+(t.axis.getY2AxisLabelPosition().isOuter?20:0):p(t.getAxisWidthByAxisId("y2"))+n},getParentRectValue:function getParentRectValue(t){for(var e,n="offset".concat(D(t)),i=this.selectChart.node();!e&&i&&"BODY"!==i.tagName;){try{e=i.getBoundingClientRect()[t]}catch(r){n in i&&(e=i[n])}i=i.parentNode}if("width"===t){var a=document.body.offsetWidth;a<e&&(e=a)}return e},getParentWidth:function getParentWidth(){return this.getParentRectValue("width")},getParentHeight:function getParentHeight(){var t=this.selectChart.style("height");return 0<t.indexOf("px")?+t.replace("px",""):0},getSvgLeft:function getSvgLeft(t){var e=this,n=e.config,i=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,a=n.axis_rotated?j.axisX:j.axisY,r=e.main.select(".".concat(a)).node(),o=r&&i?r.getBoundingClientRect():{right:0},s=e.selectChart.node().getBoundingClientRect(),c=e.hasArcType(),l=o.right-s.left-(c?0:e.getCurrentPaddingLeft(t));return 0<l?l:0},getAxisWidthByAxisId:function getAxisWidthByAxisId(t,e){var n=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)},getHorizontalAxisHeight:function getHorizontalAxisHeight(t){var e=this,n=e.config,i=30;return"x"!==t||n.axis_x_show?"x"===t&&n.axis_x_height?n.axis_x_height:"y"!==t||n.axis_y_show?"y2"!==t||n.axis_y2_show?("x"===t&&!n.axis_rotated&&n.axis_x_tick_rotate&&(i=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n.axis_x_tick_rotate)/180)),"y"===t&&n.axis_rotated&&n.axis_y_tick_rotate&&(i=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n.axis_y_tick_rotate)/180)),i+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):e.rotated_padding_top:!n.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},getEventRectWidth:function getEventRectWidth(){return Math.max(0,this.xAxis.tickInterval())}});var nt=n(20);L($.prototype,{getShapeIndices:function getShapeIndices(t){var r=this.config,o={},s=0;return this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(var e,n=0;e=r.data_groups[n];n++)if(!(e.indexOf(t.id)<0))for(var i,a=0;i=e[a];a++)if(i in o){o[t.id]=o[i];break}O(o[t.id])&&(o[t.id]=s++)}),o.__max__=s-1,o},getShapeX:function getShapeX(i,a,r,t){var o=t?this.subX:this.zoomScale||this.x,s=this.config.bar_padding;return function(t){var e=t.id in r?r[t.id]:0,n=t.x||0===t.x?o(t.x)-i*(a/2-e):0;return i&&n&&1<a&&s&&(e&&(n+=s*e),2<a?n-=(a-1)*s/2:2===a&&(n-=s/2)),n}},getShapeY:function getShapeY(e){var n=this,i=n.isStackNormalized();return function(t){return(e?n.getSubYScale(t.id):n.getYScale(t.id))(i?n.getRatio("index",t,!0):t.value)}},getShapeOffset:function getShapeOffset(t,c,e){var l=this,n=l.orderTargets(l.filterTargetsToShow(l.data.targets.filter(t,l))),d=n.map(function(t){return t.id});return function(i,t){var a=e?l.getSubYScale(i.id):l.getYScale(i.id),r=a(0),o=r,s=t;return n.forEach(function(t){var e=l.isStepType(i)?l.convertValuesToStep(t.values):t.values,n=e.map(function(t){return l.isStackNormalized()?l.getRatio("index",t,!0):t.value});t.id===i.id||c[t.id]!==c[i.id]||d.indexOf(t.id)<d.indexOf(i.id)&&((O(e[s])||+e[s].x!=+i.x)&&(s=-1,e.forEach(function(t,e){(t.x.constructor===Date?+t.x:t.x)===(i.x.constructor===Date?+i.x:i.x)&&(s=e)})),s in e&&0<=e[s].value*i.value&&(o+=a(n[s])-r))}),o}},isWithinShape:function isWithinShape(t,e){var n,i=this,a=Object(z.select)(t);return i.isTargetToShow(e.id)?i.hasValidPointType(t.nodeName)?n=i.isStepType(e)?i.isWithinStep(t,i.getYScale(e.id)(e.value)):i.isWithinCircle(t,1.5*i.pointSelectR(e)):"path"===t.nodeName&&(n=!a.classed(j.bar)||i.isWithinBar(t)):n=!1,n},getInterpolate:function getInterpolate(t){var e=this.getInterpolateType(t);return{basis:nt.curveBasis,"basis-closed":nt.curveBasisClosed,"basis-open":nt.curveBasisOpen,bundle:nt.curveBundle,cardinal:nt.curveCardinal,"cardinal-closed":nt.curveCardinalClosed,"cardinal-open":nt.curveCardinalOpen,"catmull-rom":nt.curveCatmullRom,"catmull-rom-closed":nt.curveCatmullRomClosed,"catmull-rom-open":nt.curveCatmullRomOpen,"monotone-x":nt.curveMonotoneX,"monotone-y":nt.curveMonotoneY,natural:nt.curveNatural,"linear-closed":nt.curveLinearClosed,linear:nt.curveLinear,step:nt.curveStep,"step-after":nt.curveStepAfter,"step-before":nt.curveStepBefore}[e]},getInterpolateType:function getInterpolateType(t){var e=this,n=e.config.spline_interpolation_type,i=e.isInterpolationType(n)?n:"cardinal";return e.isSplineType(t)?i:e.isStepType(t)?e.config.line_step_type:"linear"}});var it=n(21);L($.prototype,{initPie:function initPie(){var t=this.config,e=t.pie_padding,n=this.hasType("pie")&&e?.01*e:t["".concat(t.data_type,"_padAngle")]?t["".concat(t.data_type,"_padAngle")]:0;this.pie=Object(nt.pie)().padAngle(n).value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)}),t.data_order||this.pie.sort(null)},updateRadius:function updateRadius(){var t=this,e=t.config,n=e.pie_innerRadius,i=e.pie_padding,a=e.gauge_width||e.donut_width;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2,t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=a?(t.radius-a)/t.radius:.6;var r=n||(i?i*(t.innerRadiusRatio+.1):0);t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:r},updateArc:function updateArc(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},updateAngle:function updateAngle(t){var e,n,i,a,r=this,o=r.config,s=t,c=!1,l=0;return o?(r.pie(r.filterTargetsToShow(r.data.targets)).forEach(function(t){c||t.data.id!==s.data.id||(c=!0,(s=t).index=l),l++}),isNaN(s.startAngle)&&(s.startAngle=0),isNaN(s.endAngle)&&(s.endAngle=s.startAngle),r.isGaugeType(s.data)&&(e=o.gauge_min,n=o.gauge_max,i=Math.PI*(o.gauge_fullCircle?2:1)/(n-e),a=s.value<e?0:s.value<n?s.value-e:n-e,s.startAngle=o.gauge_startingAngle,s.endAngle=s.startAngle+i*a),c?s:null):null},getSvgArc:function getSvgArc(){var a=this,r=Object(nt.arc)().outerRadius(a.radius).innerRadius(a.innerRadius),t=function(t,e){var n="M 0 0";if("value"in t?0<t.value:t.data){var i=!e&&a.updateAngle(t);e?n=r(t):i&&(n=r(i))}return n};return t.centroid=r.centroid,t},getSvgArcExpanded:function getSvgArcExpanded(t){var n=this,i=Object(nt.arc)().outerRadius(n.radiusExpanded*(t||1)).innerRadius(n.innerRadius);return function(t){var e=n.updateAngle(t);return e?i(e):"M 0 0"}},getArc:function getArc(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function transformForArcLabel(t){var e=this,n=e.config,i=e.updateAngle(t),a="";if(i&&!e.hasType("gauge")){var r=this.svgArc.centroid(i),o=isNaN(r[0])?0:r[0],s=isNaN(r[1])?0:r[1],c=Math.sqrt(o*o+s*s),l=e.hasType("donut")&&n.donut_label_ratio||e.hasType("pie")&&n.pie_label_ratio;l=l?k(l)?l(t,e.radius,c):l:e.radius&&(c?(.375<36/e.radius?1.175-36/e.radius:.8)*e.radius/c:0),a="translate(".concat(o*l,",").concat(s*l,")")}return a},convertToArcData:function convertToArcData(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function textForArcLabel(n){var t=this,e=n.node?n.datum():n;if(!t.shouldShowArcLabel())return"";var i=t.updateAngle(e),a=i?i.value:null,r=t.getRatio("arc",i),o=e.data.id;if(!t.hasType("gauge")&&!t.meetsArcLabelThreshold(r))return"";var s=(t.getArcLabelFormat()||t.defaultArcValueFormat)(a,r,o).toString();if(n.node)if(-1===s.indexOf("\n"))n.text(s);else{var c=s.split("\n"),l=c.length-1;c.forEach(function(t,e){n.append("tspan").attr("x",0).attr("dy","".concat(0===e?-l:1,"em")).text(t)})}return s},textForGaugeMinMax:function textForGaugeMinMax(t,e){var n=this.getGaugeLabelExtents();return n?n(t,e):t},expandArc:function expandArc(t){var n=this;if(n.transiting)var e=setInterval(function(){n.transiting||(clearInterval(e),0<n.legend.selectAll(".".concat(j.legendItemFocused)).size()&&n.expandArc(t))},10);else{var i=n.mapToTargetIds(t);n.svg.selectAll(n.selectorTargets(i,".".concat(j.chartArc))).each(function(t){if(n.shouldExpand(t.data.id)&&0!==t.value){var e=n.expandDuration(t.data.id);Object(z.select)(this).selectAll("path").transition().duration(e).attr("d",n.svgArcExpanded).transition().duration(2*e).attr("d",n.svgArcExpandedSub)}})}},unexpandArc:function unexpandArc(t){var e=this;if(!e.transiting){var n=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(n,".".concat(j.chartArc))).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll("".concat(j.arc)).style("opacity","1")}},expandDuration:function expandDuration(t){var e,n=this.config;return this.isDonutType(t)?e="donut":this.isGaugeType(t)?e="gauge":this.isPieType(t)&&(e="pie"),e?n["".concat(e,"_expand_duration")]:50},shouldExpand:function shouldExpand(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},shouldShowArcLabel:function shouldShowArcLabel(){var t=this.config,e=!0;return this.hasType("donut")?e=t.donut_label_show:this.hasType("pie")&&(e=t.pie_label_show),e},meetsArcLabelThreshold:function meetsArcLabelThreshold(t){var e=this.config;return(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)<=t},getArcLabelFormat:function getArcLabelFormat(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),e},getGaugeLabelExtents:function getGaugeLabelExtents(){return this.config.gauge_label_extents},getArcTitle:function getArcTitle(){return this.hasType("donut")?this.config.donut_title:""},updateTargetsForArc:function updateTargetsForArc(t){var e=this,n=e.main,i=e.classChartArc.bind(e),a=e.classArcs.bind(e),r=e.classFocus.bind(e),o=n.select(".".concat(j.chartArcs)).selectAll(".".concat(j.chartArc)).data(e.pie(t)).attr("class",function(t){return i(t)+r(t.data)}),s=o.enter().append("g").attr("class",i);s.append("g").attr("class",a).merge(o),s.append("text").attr("dy",e.hasType("gauge")?"-.1em":".35em").style("opacity","0").style("text-anchor","middle").style("pointer-events","none")},initArc:function initArc(){this.arcs=this.main.select(".".concat(j.chart)).append("g").attr("class",j.chartArcs).attr("transform",this.getTranslate("arc")),this.setArcTitle()},setArcTitle:function setArcTitle(){var t=this.getArcTitle();if(t){var e=t.split("\n"),n=this.arcs.append("text").attr("class",j.chartArcsTitle).style("text-anchor","middle");if(1<e.length){var i=+n.style("font-size").replace("px",""),a=Math.floor(n.text(".").node().getBBox().height,n.text(""));e.forEach(function(t,e){return n.insert("tspan").text(t).attr("x",0).attr("dy",e?a:0)}),n.attr("y","-".concat(i*(e.length-2)||i/2))}else n.text(t)}},redrawArc:function redrawArc(t,e,n){var a=this,i=a.config,r=a.main,o=i.interaction_enabled,s=r.selectAll(".".concat(j.arcs)).selectAll(".".concat(j.arc)).data(a.arcData.bind(a));s.exit().transition().duration(e).style("opacity","0").remove(),(s=s.enter().append("path").attr("class",a.classArc.bind(a)).style("fill",function(t){return a.color(t.data)}).style("cursor",function(t){return o&&(i.data_selection_isselectable(t)?"pointer":null)}).style("opacity","0").each(function(t){a.isGaugeType(t.data)&&(t.startAngle=i.gauge_startingAngle,t.endAngle=i.gauge_startingAngle),this._current=t}).merge(s)).attr("transform",function(t){return!a.isGaugeType(t.data)&&n?"scale(0)":""}).style("opacity",function(t){return t===this._current?"0":"1"}).each(function(){a.transiting=!0}).transition().duration(t).attrTween("d",function(n){var t=a.updateAngle(n);if(!t)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var i=Object(it.interpolate)(this._current,t);return this._current=i(0),function(t){var e=i(t);return e.data=n.data,a.getArc(e,!0)}}).attr("transform",n?"scale(1)":"").style("fill",function(t){return a.levelColor?a.levelColor(t.data.values[0].value):a.color(t.data.id)}).style("opacity","1").call(a.endall,function(){a.transiting=!1}),o&&a.bindArcEvent(s),a.redrawArcText(t)},bindArcEvent:function bindArcEvent(t){function selectArc(t,e,n){a.expandArc(n),a.api.focus(n),a.toggleFocusLegend(n,!0),a.showTooltip([e],t)}function unselectArc(t){var e=t&&t.id||undefined;a.unexpandArc(e),a.api.revert(),a.revertLegend(),a.hideTooltip()}var a=this,e="touch"===a.inputType,n="mouse"===a.inputType;if(t.on("click",function(t,e){var n,i=a.updateAngle(t);i&&(n=a.convertToArcData(i),a.toggleShape&&a.toggleShape(this,n,e),a.config.data_onclick.call(a.api,n,this))}),n&&t.on("mouseover",function(t){if(!a.transiting){var e=a.updateAngle(t),n=e?a.convertToArcData(e):null;selectArc(this,n,n&&n.id||undefined),a.config.data_onover(n,this)}}).on("mouseout",function(t){if(!a.transiting){var e=a.updateAngle(t),n=e?a.convertToArcData(e):null;unselectArc(),a.config.data_onout(n,this)}}).on("mousemove",function(t){var e=a.updateAngle(t),n=e?a.convertToArcData(e):null;a.showTooltip([n],this)}),e&&a.hasArcType()){var r=function(){var t=z.event.changedTouches[0];return Object(z.select)(document.elementFromPoint(t.clientX,t.clientY))};a.svg.on("touchstart",function(){if(!a.transiting){var t=r().datum(),e=t&&t.data&&t.data.id?a.updateAngle(t):null,n=e?a.convertToArcData(e):null,i=n&&n.id||undefined;i===undefined?unselectArc():selectArc(this,n,i),a.config.data_onover(n,this)}}).on("touchend",function(){if(!a.transiting){var t=r().datum(),e=t&&t.data&&t.data.id?a.updateAngle(t):null,n=e?a.convertToArcData(e):null,i=n&&n.id||undefined;i===undefined?unselectArc():selectArc(this,n,i),a.config.data_onout(n,this)}}).on("touchmove",function(){var t=r().datum(),e=t&&t.data&&t.data.id?a.updateAngle(t):null,n=e?a.convertToArcData(e):null,i=n&&n.id||undefined;i===undefined?unselectArc():selectArc(this,n,i)})}},redrawArcText:function redrawArcText(t){var e=this,n=e.config,i=e.main,a=i.selectAll(".".concat(j.chartArc)).select("text").style("opacity","0").attr("class",function(t){return e.isGaugeType(t.data)?j.gaugeValue:""});n.gauge_fullCircle&&a.attr("dy","".concat(Math.round(e.radius/14)));var r=!a.empty()&&a.classed(j.gaugeValue)?"call":"text";if(a[r](e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",function(t){return e.isGaugeType(t.data)?"".concat(Math.round(e.radius/5),"px"):""}).transition().duration(t).style("opacity",function(t){return e.isTargetToShow(t.data.id)&&e.isArcType(t.data)?"1":"0"}),i.select(".".concat(j.chartArcsTitle)).style("opacity",e.hasType("donut")||e.hasType("gauge")?"1":"0"),e.hasType("gauge")){var o=(n.gauge_fullCircle?-4:-1)*n.gauge_startingAngle;e.arcs.select(".".concat(j.chartArcsBackground)).attr("d",function(){var t={data:[{value:n.gauge_max}],startAngle:n.gauge_startingAngle,endAngle:o};return e.getArc(t,!0,!0)}),e.arcs.select(".".concat(j.chartArcsGaugeUnit)).attr("dy",".75em").text(n.gauge_label_show?n.gauge_units:""),n.gauge_label_show&&(e.arcs.select(".".concat(j.chartArcsGaugeMin)).attr("dx","".concat(-1*(e.innerRadius+(e.radius-e.innerRadius)/(n.gauge_fullCircle?1:2)),"px")).attr("dy","1.2em").text(e.textForGaugeMinMax(n.gauge_min,!1)),!n.gauge_fullCircle&&e.arcs.select(".".concat(j.chartArcsGaugeMax)).attr("dx","".concat(e.innerRadius+(e.radius-e.innerRadius)/2,"px")).attr("dy","1.2em").text(e.textForGaugeMinMax(n.gauge_max,!0)))}},initGauge:function initGauge(){var t=this.config,e=this.arcs;this.hasType("gauge")&&(e.append("path").attr("class",j.chartArcsBackground),e.append("text").attr("class",j.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.gauge_label_show&&(e.append("text").attr("class",j.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),!t.gauge_fullCircle&&e.append("text").attr("class",j.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none")))},getGaugeLabelHeight:function getGaugeLabelHeight(){return this.config.gauge_label_show?20:0}}),L($.prototype,{initBar:function initBar(){this.main.select(".".concat(j.chart)).append("g").attr("class",j.chartBars)},updateTargetsForBar:function updateTargetsForBar(t){var e=this,n=e.config,i=e.classChartBar.bind(e),a=e.classBars.bind(e),r=e.classFocus.bind(e);e.main.select(".".concat(j.chartBars)).selectAll(".".concat(j.chartBar)).data(t).attr("class",function(t){return i(t)+r(t)}).enter().append("g").attr("class",i).style("opacity","0").style("pointer-events","none").append("g").attr("class",a).style("cursor",function(t){return n.data_selection_isselectable(t)?"pointer":null})},updateBar:function updateBar(t){var e=this,n=e.barData.bind(e),i=e.classBar.bind(e),a=e.initialOpacity.bind(e),r=function(t){return e.color(t.id)};e.mainBar=e.main.selectAll(".".concat(j.bars)).selectAll(".".concat(j.bar)).data(n),e.mainBar.exit().transition().duration(t).style("opacity","0").remove(),e.mainBar=e.mainBar.enter().append("path").attr("class",i).style("stroke",r).style("fill",r).merge(e.mainBar).style("opacity",a)},redrawBar:function redrawBar(t,e){return[(e?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",t).style("fill",this.color).style("opacity","1")]},getBarW:function getBarW(t,e){var n=this.config,i=N(n.bar_width)?n.bar_width:e?t.tickInterval(this.getMaxDataCount())*n.bar_width_ratio/e:0;return n.bar_width_max&&i>n.bar_width_max?n.bar_width_max:i},getBars:function getBars(t,e){var n=C(t)?"-".concat(t):"";return(e?this.main.selectAll(".".concat(j.bars).concat(this.getTargetSelectorSuffix(e))):this.main).selectAll(".".concat(j.bar).concat(n))},expandBars:function expandBars(t,e,n){n&&this.unexpandBars(),this.getBars(t,e).classed(j.EXPANDED,!0)},unexpandBars:function unexpandBars(t){this.getBars(t).classed(j.EXPANDED,!1)},generateDrawBar:function generateDrawBar(t,e){var n=this.config,g=this.generateGetBarPoints(t,e),h=n.axis_rotated,f=n.data_groups.length,i=n.bar_radius,a=n.bar_radius_ratio,p=N(i)&&0<i?function(){return i}:N(a)?function(t){return t*a}:null;return function(t,e){var n=g(t,e),i=+h,a=+!i,r=t.value<0,o=["",""],s=0;if(p&&!f){var c=h?a:i,l=n[2][c]-n[0][c];s=p(l);var d="a".concat(s,",").concat(s," ").concat(r?"1 0 0":"0 0 1"," ");o[+!h]="".concat(d).concat(s,",").concat(s),o[+h]="".concat(d).concat([-s,s][h?"sort":"reverse"]()),r&&o.reverse()}var u=h?"H".concat(n[1][i]-s," ").concat(o[0],"V").concat(n[2][a]-s," ").concat(o[1],"H").concat(n[3][i]):"V".concat(n[1][a]+(r?-s:s)," ").concat(o[0],"H").concat(n[2][i]-s," ").concat(o[1],"V").concat(n[3][a]);return"M".concat(n[0][i],",").concat(n[0][a]).concat(u,"z")}},generateGetBarPoints:function generateGetBarPoints(t,e){var o=this,n=e?o.subXAxis:o.xAxis,i=t.__max__+1,s=o.getBarW(n,i),c=o.getShapeX(s,i,t,!!e),l=o.getShapeY(!!e),d=o.getShapeOffset(o.isBarType,t,!!e),u=e?o.getSubYScale:o.getYScale;return function(t,e){var n=u.call(o,t.id)(0),i=d(t,e)||n,a=c(t),r=l(t);return o.config.axis_rotated&&(0<t.value&&r<n||t.value<0&&n<r)&&(r=n),[[a,i],[a,r-=n-i],[a+s,r],[a+s,i]]}},isWithinBar:function isWithinBar(t){var e=Object(z.mouse)(t),n=T(t),i=t.getBBox(),a=n[0],r=n[1],o=Math.min(a.x,r.x),s=Math.min(a.y,r.y),c=i.width,l=i.height;return o-2<e[0]&&e[0]<o+c+2&&s-2<e[1]&&e[1]<s+l+2}}),L($.prototype,{initBubble:function initBubble(){var t=this.config;this.hasType("bubble")&&(t.point_show=!0,t.point_type="circle",t.point_sensitivity=25)},getBaseLength:function getBaseLength(){var t="$baseLength",e=this.getCache(t);return e||this.addCache(t,e=Object(m.min)([this.axes.x.select("path").node().getTotalLength(),this.axes.y.select("path").node().getTotalLength()])),e},getBubbleR:function getBubbleR(t){var e=this.config.bubble_maxR;k(e)?e=e(t):!N(e)&&(e=this.getBaseLength()/(2*this.getMaxDataCount())+12);var n=Object(m.max)(this.getMinMaxData().max.map(function(t){return b(t.value)?t.value.mid:t.value})),i=e*e*Math.PI,a=t.value*(i/n);return Math.sqrt(a/Math.PI)}}),L($.prototype,{initLine:function initLine(){this.main.select(".".concat(j.chart)).append("g").attr("class",j.chartLines)},updateTargetsForLine:function updateTargetsForLine(t){var n=this,e=n.config,i=n.classChartLine.bind(n),a=n.classLines.bind(n),r=n.classAreas.bind(n),o=n.classCircles.bind(n),s=n.classFocus.bind(n),c=n.main.select(".".concat(j.chartLines)).selectAll(".".concat(j.chartLine)).data(t).attr("class",function(t){return i(t)+s(t)}).enter().append("g").attr("class",i).style("opacity","0").style("pointer-events","none");c.append("g").attr("class",a),c.append("g").attr("class",r),e.point_show&&(e.data_selection_enabled&&c.append("g").attr("class",function(t){return n.generateClass(j.selectedCircles,t.id)}),c.append("g").attr("class",o).style("cursor",function(t){return e.data_selection_isselectable(t)?"pointer":null})),t.forEach(function(e){n.main.selectAll(".".concat(j.selectedCircles).concat(n.getTargetSelectorSuffix(e.id))).selectAll("".concat(j.selectedCircle)).each(function(t){t.value=e.values[t.index].value})})},updateLine:function updateLine(t){var e=this;e.mainLine=e.main.selectAll(".".concat(j.lines)).selectAll(".".concat(j.line)).data(e.lineData.bind(e)),e.mainLine.exit().transition().duration(t).style("opacity","0").remove(),e.mainLine=e.mainLine.enter().append("path").attr("class",function(t){return"".concat(e.classLine.bind(e)(t)," ").concat(e.extraLineClasses(t)||"")}).style("stroke",e.color).merge(e.mainLine).style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null)},redrawLine:function redrawLine(t,e){return[(e?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity","1")]},getCurve:function getCurve(n){var i=this;return i.config.axis_rotated&&i.isStepType(n)?function(t){var e=i.getInterpolate(n)(t);return e.orgPoint=e.point,e.pointRotated=function(t,e){1===this._point&&(this._point=2);var n=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,n),this._context.lineTo(t,n),this._x=t,this._y=e},e.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},e}:i.getInterpolate(n)},generateDrawLine:function generateDrawLine(t,o){var s=this,c=s.config,l=c.line_connectNull,d=c.axis_rotated,n=s.generateGetLinePoints(t,o),u=o?s.getSubYScale:s.getYScale,e=function(t){return(o?s.subxx:s.xx).call(s,t)},i=function(t,e){return s.isGrouped(t.id)?n(t,e)[0][1]:u.call(s,t.id)(s.getBaseValue(t))},g=Object(nt.line)();return g=d?g.x(i).y(e):g.x(e).y(i),l||(g=g.defined(function(t){return null!==s.getBaseValue(t)})),function(t){var e=o?s.x:s.subX,n=u.call(s,t.id),i=l?s.filterRemoveNull(t.values):t.values,a=0,r=0;return(s.isLineType(t)?c.data_regions[t.id]?s.lineWithRegions(i,e,n,c.data_regions[t.id]):(s.isStepType(t)&&(i=s.convertValuesToStep(i)),g.curve(s.getCurve(t))(i)):(i[0]&&(a=e(i[0].x),r=n(i[0].value)),d?"M ".concat(r," ").concat(a):"M ".concat(a," ").concat(r)))||"M 0 0"}},generateGetLinePoints:function generateGetLinePoints(t,e){var s=this,c=s.config,n=t.__max__+1,i=!!e,l=s.getShapeX(0,n,t,i),d=s.getShapeY(i),u=s.getShapeOffset(s.isLineType,t,i),g=i?s.getSubYScale:s.getYScale;return function(t,e){var n=g.call(s,t.id)(0),i=u(t,e)||n,a=l(t),r=d(t);c.axis_rotated&&(0<t.value&&r<n||t.value<0&&n<r)&&(r=n);var o=[a,r-(n-i)];return[o,o,o,o]}},lineWithRegions:function lineWithRegions(t,l,d,e){var r,u,g,n,i=this,h=i.config.axis_rotated,a=i.isTimeSeries(),o=i.isCategorized()?.5:0,s=[],c=function(t,e){for(var n,i=0;n=e[i];i++)if(n.start<t&&t<=n.end)return n.style;return!1};if(G(e))for(var f,p=function(t,e){return O(t)?e:a?i.parseDate(t):t},x=0;f=e[x];x++){var m=p(f.start,t[0].x),v=p(f.end,t[t.length-1].x),_=f.style||{dasharray:"2 2"};s[x]={start:m,end:v,style:_}}for(var y,b=h?function(t){return d(t.value)}:function(t){return l(t.x)},T=h?function(t){return l(t.x)}:function(t){return d(t.value)},A=function(t){return"M".concat(t[0][0],",").concat(t[0][1],"L").concat(t[1][0],",").concat(t[1][1])},w=a?function(t,e,n,i){var a=t.x.getTime(),r=e.x-t.x,o=new Date(a+r*n),s=new Date(a+r*(n+i)),c=h?[[d(u(n)),l(o)],[d(u(n+g)),l(s)]]:[[l(o),d(u(n))],[l(s),d(u(n+g))]];return A(c)}:function(t,e,n,i){var a=h?[[d(u(n),!0),l(r(n))],[d(u(n+i),!0),l(r(n+i))]]:[[l(r(n),!0),d(u(n))],[l(r(n+i),!0),d(u(n+i))]];return A(a)},L="M",S=0;y=t[S];S++){var C=t[S-1];_=c(y.x,s);if(O(s)||!_)L+="".concat(S?"L":"").concat(b(y),",").concat(T(y));else{try{_=_.dasharray.split(" ")}catch(R){_="2 2".split(" ")}r=i.getScale(C.x+o,y.x+o,a),u=i.getScale(C.value,y.value);var k=l(y.x)-l(C.x),X=d(y.value)-d(C.value),D=Math.sqrt(Math.pow(k,2)+Math.pow(X,2));n=(g=_[0]/D)*_[1];for(var F=g;F<=1;F+=n)L+=w(C,y,F,g),1<=F+n&&(L+=w(C,y,1,0))}}return L},updateArea:function updateArea(t){var e=this;e.mainArea=e.main.selectAll(".".concat(j.areas)).selectAll(".".concat(j.area)).data(e.lineData.bind(e)),e.mainArea.exit().transition().duration(t).style("opacity","0").remove(),e.mainArea=e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=Object(z.select)(this).style("opacity"),"0"}).merge(e.mainArea),e.mainArea.style("opacity",e.orgAreaOpacity)},redrawArea:function redrawArea(t,e){var n=this;return[(e?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",function(t){return n.isAreaRangeType(t)?n.orgAreaOpacity/1.75:n.orgAreaOpacity})]},generateDrawArea:function generateDrawArea(t,e){var o=this,s=o.config,c=s.line_connectNull,l=s.axis_rotated,n=o.generateGetAreaPoints(t,e),i=e?o.getSubYScale:o.getYScale,d=function(t){return(e?o.subxx:o.xx).call(o,t)},u=function(t,e){return o.isGrouped(t.id)?n(t,e)[0][1]:i.call(o,t.id)(o.isAreaRangeType(t)?o.getAreaRangeData(t,"high"):o.getAreaBaseValue(t.id))},g=function(t,e){return o.isGrouped(t.id)?n(t,e)[1][1]:i.call(o,t.id)(o.isAreaRangeType(t)?o.getAreaRangeData(t,"low"):t.value)};return function(t){var e,n=c?o.filterRemoveNull(t.values):t.values,i=0,a=0;if(o.isAreaType(t)){var r=Object(nt.area)();r=l?r.y(d).x0(u).x1(g):r.x(d).y0(s.area_above?0:u).y1(g),c||(r=r.defined(function(t){return null!==o.getBaseValue(t)})),o.isStepType(t)&&(n=o.convertValuesToStep(n)),e=r.curve(o.getCurve(t))(n)}else n[0]&&(i=o.x(n[0].x),a=o.getYScale(t.id)(n[0].value)),e=l?"M ".concat(a," ").concat(i):"M ".concat(i," ").concat(a);return e||"M 0 0"}},getAreaBaseValue:function getAreaBaseValue(){return 0},generateGetAreaPoints:function generateGetAreaPoints(t,e){var o=this,s=o.config,n=t.__max__+1,c=o.getShapeX(0,n,t,!!e),l=o.getShapeY(!!e),d=o.getShapeOffset(o.isAreaType,t,!!e),u=e?o.getSubYScale:o.getYScale;return function(t,e){var n=u.call(o,t.id)(0),i=d(t,e)||n,a=c(t),r=l(t);return s.axis_rotated&&(0<t.value&&r<n||t.value<0&&n<r)&&(r=n),[[a,i],[a,r-(n-i)],[a,r-(n-i)],[a,i]]}},updateCircle:function updateCircle(){var e=this;e.config.point_show&&(e.mainCircle=e.main.selectAll(".".concat(j.circles)).selectAll(".".concat(j.circle)).data(function(t){return!e.isBarType(t)&&(!e.isLineType(t)||e.shouldDrawPointsForLine(t))&&e.labelishData(t)}),e.mainCircle.exit().remove(),e.mainCircle=e.mainCircle.enter().append(e.point("create",this,e.classCircle.bind(e),e.pointR.bind(e),e.color)).merge(e.mainCircle).style("stroke",e.color).style("opacity",e.initialOpacityForCircle.bind(e)))},redrawCircle:function redrawCircle(n,i,a,r){var o=this,s=o.main.selectAll(".".concat(j.selectedCircle));if(!o.config.point_show)return[];var c=[];o.mainCircle.each(function(t){var e=o.point("update",o,n,i,o.opacityForCircle.bind(o),o.color,a,r,s).bind(this)(t);c.push(e)});var t=o.isCirclePoint()?"c":"";return[c,s.attr("".concat(t,"x"),n).attr("".concat(t,"y"),i)]},circleX:function circleX(t){var e=C(t.x);return this.config.zoom_enabled&&this.zoomScale?e?this.zoomScale(t.x):null:e?this.x(t.x):null},updateCircleY:function updateCircleY(){var i=this;i.circleY=function(t,e){var n=t.id;return i.isGrouped(n)?i.generateGetLinePoints(i.getShapeIndices(i.isLineType))(t,e)[0][1]:i.getYScale(n)(i.getBaseValue(t))}},getCircles:function getCircles(t,e){var n=C(t)?"-".concat(t):"";return(e?this.main.selectAll(".".concat(j.circles).concat(this.getTargetSelectorSuffix(e))):this.main).selectAll(".".concat(j.circle).concat(n))},expandCircles:function expandCircles(t,e,n){var i=this,a=i.pointExpandedR.bind(i);n&&i.unexpandCircles();var r=i.getCircles(t,e).classed(j.EXPANDED,!0),o=a(r)/i.config.point_r;i.isCirclePoint()?r.attr("r",a):r.each(function(){var t=Object(z.select)(this),e=this.getBBox(),n=e.x+.5*e.width,i=e.y+.5*e.height;"circle"===this.tagName?t.attr("r",a):t.style("transform","translate(".concat((1-o)*n,"px, ").concat((1-o)*i,"px) scale(").concat(o,")"))})},unexpandCircles:function unexpandCircles(t){var e=this,n=e.pointR.bind(e),i=e.getCircles(t).filter(function(){return Object(z.select)(this).classed(j.EXPANDED)}).classed(j.EXPANDED,!1);i.attr("r",n),e.isCirclePoint()||i.style("transform","scale(".concat(n(i)/e.config.point_r,")"))},pointR:function(t){var e=this.config.point_r,n=e;return this.isStepType(t)?n=0:this.isBubbleType(t)?n=this.getBubbleR(t):k(e)&&(n=e(t)),n},pointExpandedR:function pointExpandedR(t){var e=this.config,n=this.isBubbleType(t)?1.15:1.75;return e.point_focus_expand_enabled?e.point_focus_expand_r||this.pointR(t)*n:this.pointR(t)},pointSelectR:function pointSelectR(t){var e=this.config.point_select_r;return k(e)?e(t):e||4*this.pointR(t)},isWithinCircle:function isWithinCircle(t,e){var n=Object(z.mouse)(t),i=Object(z.select)(t),a=this.isCirclePoint()?"c":"",r=+i.attr("".concat(a,"x")),o=+i.attr("".concat(a,"y"));if(!r&&!o&&1===t.nodeType){var s=t.getBBox?t.getBBox():t.getBoundingClientRect();r=s.x,o=s.y}return Math.sqrt(Math.pow(r-n[0],2)+Math.pow(o-n[1],2))<e},isWithinStep:function isWithinStep(t,e){return Math.abs(e-Object(z.mouse)(t)[1])<30},shouldDrawPointsForLine:function shouldDrawPointsForLine(t){var e=this.config.line_point;return!0===e||H(e)&&-1!==e.indexOf(t.id)}}),L($.prototype,{hasValidPointType:function hasValidPointType(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function hasValidPointDrawMethods(t){var e=t||this.config.point_type;return _(e)&&k(e.create)&&k(e.update)},insertPointInfoDefs:function insertPointInfoDefs(t,e){var n=function(t,e){for(var n,i=t.attributes,a=0;n=i[a];a++)n=n.name,e.setAttribute(n,t.getAttribute(n))},i=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement,a=document.createElementNS(z.namespaces.svg,i.nodeName.toLowerCase());if(a.id=e,a.style.fill="inherit",a.style.stroke="inherit",n(i,a),i.childNodes&&i.childNodes.length){var r=Object(z.select)(a);"innerHTML"in a?r.html(i.innerHTML):U(i.childNodes).forEach(function(t){n(t,r.append(t.tagName).node())})}this.defs.node().appendChild(a)},pointFromDefs:function pointFromDefs(t){return this.defs.select("#".concat(t))},generatePoint:function generatePoint(){var c=this,t=c.config,l=[],d=W(t.point_pattern)?t.point_pattern:[t.point_type];return function(r,o){for(var t=arguments.length,s=Array(2<t?t-2:0),e=2;e<t;e++)s[e-2]=arguments[e];return function(t){var e,n=t.id||t.data&&t.data.id||t,i=Object(z.select)(this);if(l.indexOf(n)<0&&l.push(n),e=d[l.indexOf(n)%d.length],c.hasValidPointType(e))e=c[e];else if(!c.hasValidPointDrawMethods(e)){var a="".concat(c.datetimeId,"-point-").concat(n);if(c.pointFromDefs(a).size()<1&&c.insertPointInfoDefs(e,a),"create"===r)return c.custom.create.bind(o).apply(void 0,[i,a].concat(s));if("update"===r)return c.custom.update.bind(o).apply(void 0,[i].concat(s))}return e[r].bind(o).apply(void 0,[i].concat(s))}}},getTransitionName:function getTransitionName(){return Math.random().toString()},custom:{create:function create(t,e,n,i,a){return t.append("use").attr("xlink:href","#".concat(e)).attr("class",n).style("fill",a).node()},update:function update(t,e,n,i,a,r,o,s){var c=t.node().getBBox(),l=function(t){return e(t)-c.width/2},d=function(t){return n(t)-c.height/2},u=t;if(r){var g=this.getTransitionName();o&&(u=t.attr("x",l)),u=t.transition(g).attr("x",l).attr("y",d).transition(g),s.transition(this.getTransitionName())}else u=t.attr("x",l).attr("y",d);return u.style("opacity",i).style("fill",a)}},circle:{create:function create(t,e,n,i){return t.append("circle").attr("class",e).attr("r",n).style("fill",i).node()},update:function update(t,e,n,i,a,r,o,s){var c=this,l=t;if(c.hasType("bubble")&&(l=l.attr("r",c.pointR.bind(c))),r){var d=c.getTransitionName();o&&(l=l.attr("cx",e)),l=t.attr("cx")?l.transition(d).attr("cx",e).attr("cy",n).transition(d):l.attr("cx",e).attr("cy",n),s.transition(c.getTransitionName())}else l=l.attr("cx",e).attr("cy",n);return l.style("opacity",i).style("fill",a)}},rectangle:{create:function create(t,e,n,i){var a=function(t){return 2*n(t)};return t.append("rect").attr("class",e).attr("width",a).attr("height",a).style("fill",i).node()},update:function update(t,e,n,i,a,r,o,s){var c=this.config.point_r,l=function(t){return e(t)-c},d=function(t){return n(t)-c},u=t;if(r){var g=this.getTransitionName();o&&(u=u.attr("x",l)),u=u.transition(g).attr("x",l).attr("y",d).transition(g),s.transition(this.getTransitionName())}else u=u.attr("x",l).attr("y",d);return u.style("opacity",i).style("fill",a)}}});var at="$radarPoints";L($.prototype,{initRadar:function initRadar(){var t=this,e=t.config;t.hasType("radar")&&(t.radars=t.main.select(".".concat(j.chart)).append("g").attr("class",j.chartRadars),t.radars.levels=t.radars.append("g").attr("class",j.levels),t.radars.axes=t.radars.append("g").attr("class",j.axis),t.radars.shapes=t.radars.append("g").attr("class",j.shapes),t.maxValue=e.radar_axis_max||t.getMinMaxData().max[0].value)},getRadarSize:function getRadarSize(){var t=this.config.axis_x_categories.length<4?-20:10,e=(Math.min(this.arcWidth,this.arcHeight)-t)/2;return[e,e]},updateTargetsForRadar:function updateTargetsForRadar(t){var e=this.config;y(e.axis_x_categories)&&(e.axis_x_categories=Object(m.range)(0,Object(m.max)(t).values.length)),this.generateRadarPoints()},getRadarPosition:function getRadarPosition(e,n,i,a){var r=this.config,t=this.getRadarSize(),o=S()(t,2),s=o[0],c=o[1],l=r.axis_x_categories.length,d=r.radar_direction_clockwise,u=U(e).map(function(t){return function getPosition(t,e,n,i,a,r){var o=t&&0<i?n-i:i,s=2*Math.PI;return a*(1-r*("x"===e?Math.sin:Math.cos)(o*s/n))}(d,t,l,n,G(i)?i:"x"===e?s:c,a||r.radar_size_ratio)});return 1===u.length?u[0]:u},generateRadarPoints:function generateRadarPoints(){var n=this,t=n.data.targets,e=n.getRadarSize(),i=S()(e,2),a=i[0],r=i[1],o=n.getCache(at)||{},s=o._size;s&&(s.width===a||s.height===r)||(t.forEach(function(t){o[t.id]=t.values.map(function(t,e){return n.getRadarPosition(["x","y"],e,undefined,n.getRatio("radar",t))})}),o._size={width:a,height:r},n.addCache(at,o))},redrawRadar:function redrawRadar(t,e){var n=this,i=n.getTranslate("radar");i&&(n.radars.attr("transform",i),n.main.selectAll(".".concat(j.circles)).attr("transform",i),n.main.select(".".concat(j.chartTexts)).attr("transform",i),n.generateRadarPoints(),n.updateRadarLevel(),n.updateRadarAxes(),n.updateRadarShape(t,e))},generateGetRadarPoints:function generateGetRadarPoints(){var i=this.getCache(at);return function(t,e){var n=i[t.id][e];return[n,n,n,n]}},updateRadarLevel:function updateRadarLevel(){var n=this,t=n.config,e=n.getRadarSize(),i=S()(e,2),a=i[0],r=i[1],o=t.radar_level_depth,s=t.axis_x_categories.length,c=t.radar_level_text_show,l=n.radars.levels,d=Object(m.range)(0,o),u=t.radar_size_ratio*Math.min(a,r),g=d.map(function(t){return u*((t+1)/o)}),h=t.radar_level_text_format,f=d.map(function(t){var e=g[t];return Object(m.range)(0,s).map(function(t){return n.getRadarPosition(["x","y"],t,e,1).join(",")}).join(" ")}),p=l.selectAll(".".concat(j.level)).data(d);p.exit().remove();var x=p.enter().append("g").attr("class",function(t,e){return"".concat(j.level," ").concat(j.level,"-").concat(e)});x.append("polygon").style("visibility",t.radar_level_show?null:"hidden"),c&&(l.select("text").empty()&&l.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return h(0)}),x.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(t){return h(n.maxValue/d.length*(t+1))})),x.merge(p).attr("transform",function(t){return"translate(".concat(a-g[t],", ").concat(r-g[t],")")}).selectAll("polygon").attr("points",function(t){return f[t]}),c&&l.selectAll("text").attr("x",function(t){return O(t)?a:f[t].split(",")[0]}).attr("y",function(t){return O(t)?r:0})},updateRadarAxes:function updateRadarAxes(){var n=this,t=n.config,e=n.getRadarSize(),i=S()(e,2),a=i[0],r=i[1],o=t.axis_x_categories,s=n.radars.axes.selectAll("g").data(o);s.exit().remove();var c=s.enter().append("g").attr("class",function(t,e){return"".concat(j.axis,"-").concat(e)});t.radar_axis_line_show&&c.append("line"),t.radar_axis_text_show&&c.append("text"),s=c.merge(s),t.radar_axis_line_show&&s.select("line").attr("x1",a).attr("y1",r).attr("x2",function(t,e){return n.getRadarPosition("x",e)}).attr("y2",function(t,e){return n.getRadarPosition("y",e)}),t.radar_axis_text_show&&s.select("text").style("text-anchor","middle").attr("dy",".5em").text(function(t){return t}).datum(function(t,e){return{index:e}}).attr("x",function(t,e){return n.getRadarPosition("x",e,undefined,1)}).attr("y",function(t,e){return n.getRadarPosition("y",e,undefined,1)}),n.bindEvent()},bindEvent:function bindEvent(){var t=this,e=this;if(e.config.interaction_enabled){var n="mouse"===e.inputType;e.radars.select(".".concat(j.axis)).on("".concat(n?"mouseover ":"","click"),function(){if(!e.transiting){var t=Object(z.select)(z.event.target).datum().index;e.selectRectForSingle(e.svg.node(),null,t),e.setOver(t)}}).on("mouseout",n?function(){t.hideTooltip(),t.unexpandCircles()}:null)}},updateRadarShape:function updateRadarShape(t,e){var n=this,i=n.data.targets,a=n.getCache(at),r=n.radars.shapes.selectAll("polygon").data(i),o=r.enter().append("g").attr("class",n.classChartRadar.bind(n));r.exit().transition().duration(e).remove(),o.append("polygon").merge(r).transition().duration(t).style("fill",function(t){return n.color(t)}).style("stroke",function(t){return n.color(t)}).attr("points",function(t){return a[t.id].join(" ")})},radarCircleX:function radarCircleX(t){return this.getCache(at)[t.id][t.index][0]},radarCircleY:function radarCircleY(t){return this.getCache(at)[t.id][t.index][1]}}),L($.prototype,{initText:function initText(){this.main.select(".".concat(j.chart)).append("g").attr("class",j.chartTexts),this.mainText=Object(z.selectAll)([])},updateTargetsForText:function updateTargetsForText(t){var e=this,n=e.classChartText.bind(e),i=e.classTexts.bind(e),a=e.classFocus.bind(e);e.main.select(".".concat(j.chartTexts)).selectAll(".".concat(j.chartText)).data(t).attr("class",function(t){return n(t)+a(t)}).enter().append("g").attr("class",n).style("opacity","0").style("pointer-events","none").append("g").attr("class",i)},updateText:function updateText(t){var e=this,i=this,n=i.config,a=i.labelishData.bind(i),r=i.classText.bind(i);i.mainText=i.main.selectAll(".".concat(j.texts)).selectAll(".".concat(j.text)).data(function(t){return e.isRadarType(t)?t.values:a(t)}),i.mainText.exit().transition().duration(t).style("fill-opacity","0").remove(),i.mainText=i.mainText.enter().append("text").merge(i.mainText).attr("class",r).attr("text-anchor",function(t){return n.axis_rotated?t.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(t){return i.color(t)}).style("fill-opacity","0").text(function(t,e,n){return i.dataLabelFormat(t.id)(t.value,t.id,e,n)})},redrawText:function redrawText(t,e,n,i){return[(i?this.mainText.transition():this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},getTextRect:function getTextRect(t,e,n){var i,a=(t.node?t.node():t).textContent,r=n.node?n.node():n,o=Object(z.select)("body").append("div").classed("bb",!0),s=o.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px"),c=Object(z.select)(r).style("font");return s.selectAll(".dummy").data([a]).enter().append("text").classed(e,!!e).style("font",c).text(a).each(function(){i=this.getBoundingClientRect()}),o.remove(),i},generateXYForText:function generateXYForText(t,e,n,i){var a=this,r=a.generateGetAreaPoints(t,!1),o=a.generateGetBarPoints(e,!1),s=a.generateGetLinePoints(n,!1),c=a.generateGetRadarPoints(),l=i?a.getXForText:a.getYForText;return function(t,e){var n=a.isAreaType(t)&&r||a.isBarType(t)&&o||a.isRadarType(t)&&c||s;return l.call(a,n(t,e),t,this)}},getXForText:function getXForText(t,e,n){var i,a,r=this,o=r.config;return i=o.axis_rotated?(a=r.isBarType(e)?4:6,t[2][1]+a*(e.value<0?-1:1)):r.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(i>r.width?i=r.width-n.getBoundingClientRect().width:i<0&&(i=4)),i+(o.data_labels_position.x||0)},getYForText:function getYForText(t,e,n){var i,a=this,r=a.config,o=r.point_r,s=3;if(r.axis_rotated)i=(t[0][0]+t[2][0]+.6*n.getBoundingClientRect().height)/2;else if(i=t[2][1],N(o)&&5<o&&(a.isLineType(e)||a.isScatterType(e))&&(s+=r.point_r/2.3),e.value<0||0===e.value&&!a.hasPositiveValue)i+=n.getBoundingClientRect().height,a.isBarType(e)&&a.isSafari()?i-=s:!a.isBarType(e)&&a.isChrome()&&(i+=s);else{var c=2*-s;a.isBarType(e)?c=-s:a.isBubbleType(e)&&(c=s),i+=c}if(null===e.value&&!r.axis_rotated){var l=n.getBoundingClientRect().height;i<l?i=l:i>this.height&&(i=this.height-4)}return i+(r.data_labels_position.y||0)}}),L($.prototype,{setTargetType:function setTargetType(t,e){var n=this,i=n.config;n.mapToTargetIds(t).forEach(function(t){n.withoutFadeIn[t]=e===i.data_types[t],i.data_types[t]=e}),t||(i.data_type=e)},hasType:function hasType(n,t){var i=this.config.data_types,e=t||this.data.targets,a=!1;return e&&e.length?e.forEach(function(t){var e=i[t.id];(e&&0<=e.indexOf(n)||!e&&"line"===n)&&(a=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(t){i[t]===n&&(a=!0)}):a=this.config.data_type===n,a},hasArcType:function hasArcType(e){var n=this,i=1<arguments.length&&arguments[1]!==undefined?arguments[1]:[];return!["pie","donut","gauge","radar"].filter(function(t){return-1===i.indexOf(t)}).every(function(t){return!n.hasType(t,e)})},isLineType:function isLineType(t){var e=V(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,["line","spline","area","area-spline","area-spline-range","area-line-range","step","area-step"])},isTypeOf:function isTypeOf(t,e){var n=V(t)?t:t.id,i=this.config.data_types[n];return H(e)?0<=e.indexOf(i):i===e},isStepType:function isStepType(t){return this.isTypeOf(t,["step","area-step"])},isSplineType:function isSplineType(t){return this.isTypeOf(t,["spline","area-spline","area-spline-range"])},isAreaType:function isAreaType(t){return this.isTypeOf(t,["area","area-spline","area-spline-range","area-line-range","area-step"])},isAreaRangeType:function isAreaRangeType(t){return this.isTypeOf(t,["area-spline-range","area-line-range"])},isBarType:function isBarType(t){return this.isTypeOf(t,"bar")},isBubbleType:function isBubbleType(t){return this.isTypeOf(t,"bubble")},isScatterType:function isScatterType(t){return this.isTypeOf(t,"scatter")},isPieType:function isPieType(t){return this.isTypeOf(t,"pie")},isGaugeType:function isGaugeType(t){return this.isTypeOf(t,"gauge")},isDonutType:function isDonutType(t){return this.isTypeOf(t,"donut")},isRadarType:function isRadarType(t){return this.isTypeOf(t,"radar")},isArcType:function isArcType(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isRadarType(t)},isCirclePoint:function isCirclePoint(){var t=this.config,e=t.point_pattern;return"circle"===t.point_type&&(!e||H(e)&&0===e.length)},lineData:function lineData(t){return this.isLineType(t)?[t]:[]},arcData:function arcData(t){return this.isArcType(t.data)?[t]:[]},barData:function barData(t){return this.isBarType(t)?t.values:[]},labelishData:function labelishData(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isRadarType(t)?t.values:[]},barLineBubbleData:function barLineBubbleData(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function isInterpolationType(t){return 0<=["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)}});var rt=function(t){return C(t.position)||"end"},ot=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},st=function(n,i,a){return function(t){var e=n?0:i;return"start"===t.position?e=n?-a:0:"middle"===t.position&&(e=(n?-a:i)/2),e}};L($.prototype,{initGrid:function initGrid(){var t=this.config;this.xgrid=Object(z.selectAll)([]),t.grid_lines_front||this.initGridLines(),t.grid_front||this.initXYFocusGrid()},initGridLines:function initGridLines(){var t=this;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class","".concat(j.grid," ").concat(j.gridLines)),t.gridLines.append("g").attr("class",j.xgridLines),t.gridLines.append("g").attr("class",j.ygridLines),t.xgridLines=Object(z.selectAll)([])},updateXGrid:function updateXGrid(t){var n=this,e=n.config,i=e.axis_rotated,a=n.generateGridData(e.grid_x_type,n.x),r=n.isCategorized()?n.xAxis.tickOffset():0;n.xgridAttr=i?{x1:0,x2:n.width,y1:function y1(t){return n.x(t)-r},y2:function y2(t){return n.x(t)-r}}:{x1:function x1(t){return n.x(t)+r},x2:function x2(t){return n.x(t)+r},y1:0,y2:n.height},n.xgrid=n.main.select(".".concat(j.xgrids)).selectAll(".".concat(j.xgrid)).data(a),n.xgrid.exit().remove(),n.xgrid=n.xgrid.enter().append("line").attr("class",j.xgrid).merge(n.xgrid),t||n.xgrid.each(function(){var e=Object(z.select)(this);Object.keys(n.xgridAttr).forEach(function(t){e.attr(t,n.xgridAttr[t]).style("opacity",function(){return e.attr(i?"y1":"x1")===(i?n.height:0)?"0":"1"})})})},updateYGrid:function updateYGrid(){var t=this,e=t.config,n=e.axis_rotated,i=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks);t.ygrid=t.main.select(".".concat(j.ygrids)).selectAll(".".concat(j.ygrid)).data(i),t.ygrid.exit().remove(),t.ygrid=t.ygrid.enter().append("line").attr("class",j.ygrid).merge(t.ygrid),t.ygrid.attr("x1",n?t.y:0).attr("x2",n?t.y:t.width).attr("y1",n?0:t.y).attr("y2",n?t.height:t.y),t.smoothLines(t.ygrid,"grid")},updateGrid:function updateGrid(t){var e=this;e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),e.main.select("line.".concat(j.xgridFocus)).style("visibility","hidden"),e.updateXGridLines(t),e.updateYGridLines(t)},updateXGridLines:function updateXGridLines(t){var e=this,n=e.main,i=e.config,a=i.axis_rotated;i.grid_x_show&&e.updateXGrid(),e.xgridLines=n.select(".".concat(j.xgridLines)).selectAll(".".concat(j.xgridLine)).data(i.grid_x_lines),e.xgridLines.exit().transition().duration(t).style("opacity","0").remove();var r=e.xgridLines.enter().append("g");r.append("line").style("opacity","0"),r.append("text").attr("transform",a?"":"rotate(-90)").attr("dy",-5).style("opacity","0"),e.xgridLines=r.merge(e.xgridLines),e.xgridLines.attr("class",function(t){return"".concat(j.xgridLine," ").concat(t["class"]||"").trim()}).select("text").attr("text-anchor",rt).attr("dx",ot).transition().duration(t).text(function(t){return t.text}).transition().style("opacity","1")},updateYGridLines:function updateYGridLines(t){var e=this,n=e.main,i=e.config,a=i.axis_rotated;i.grid_y_show&&e.updateYGrid(),e.ygridLines=n.select(".".concat(j.ygridLines)).selectAll(".".concat(j.ygridLine)).data(i.grid_y_lines),e.ygridLines.exit().transition().duration(t).style("opacity","0").remove();var r=e.ygridLines.enter().append("g");r.append("line").style("opacity","0"),r.append("text").attr("transform",a?"rotate(-90)":"").style("opacity","0"),e.ygridLines=r.merge(e.ygridLines);var o=e.yv.bind(e);e.ygridLines.attr("class",function(t){return"".concat(j.ygridLine," ").concat(t["class"]||"").trim()}).select("line").transition().duration(t).attr("x1",a?o:0).attr("x2",a?o:e.width).attr("y1",a?0:o).attr("y2",a?e.height:o).transition().style("opacity","1"),e.ygridLines.select("text").attr("text-anchor",rt).attr("dx",ot).transition().duration(t).attr("dy",-5).attr("x",st(a,e.width,e.height)).attr("y",o).text(function(t){return t.text}).transition().style("opacity","1")},redrawGrid:function redrawGrid(t){var e=this,n=e.config.axis_rotated,i=e.xv.bind(e),a=e.xgridLines.select("line"),r=e.xgridLines.select("text");return a=(t?a.transition():a).attr("x1",n?0:i).attr("x2",n?e.width:i).attr("y1",n?i:0).attr("y2",n?i:e.height),r=(t?r.transition():r).attr("x",st(!n,e.width,e.height)).attr("y",i).text(function(t){return t.text}),[(t?a.transition():a).style("opacity","1"),(t?r.transition():r).style("opacity","1")]},initXYFocusGrid:function initXYFocusGrid(){var t=this,e=t.config;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",j.grid),e.grid_x_show&&t.grid.append("g").attr("class",j.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",j.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",j.xgridFocus).append("line").attr("class",j.xgridFocus)},showXGridFocus:function showXGridFocus(t){var e=this,n=e.config,i=n.axis_rotated,a=t.filter(function(t){return t&&C(e.getBaseValue(t))}),r=e.main.selectAll("line.".concat(j.xgridFocus)),o=e.xx.bind(e);!n.tooltip_show||e.hasType("bubble")||e.hasType("scatter")||e.hasArcType()||(r.style("visibility","visible").data([a[0]]).attr(i?"y1":"x1",o).attr(i?"y2":"x2",o),e.smoothLines(r,"grid"))},hideXGridFocus:function hideXGridFocus(){this.main.select("line.".concat(j.xgridFocus)).style("visibility","hidden")},updateXgridFocus:function updateXgridFocus(){var t=this.config.axis_rotated;this.main.select("line.".concat(j.xgridFocus)).attr("x1",t?0:-10).attr("x2",t?this.width:-10).attr("y1",t?-10:0).attr("y2",t?-10:this.height)},generateGridData:function generateGridData(t,e){var n=this.main.select(".".concat(j.axisX)).selectAll(".tick").size(),i=[];if("year"===t)for(var a=this.getXDomain(),r=a[0].getFullYear(),o=a[1].getFullYear(),s=r;s<=o;s++)i.push(new Date("".concat(s,"-01-01 00:00:00")));else(i=e.ticks(10)).length>n&&(i=i.filter(function(t){return(t+"").indexOf(".")<0}));return i},getGridFilterToRemove:function getGridFilterToRemove(t){return t?function(e){var n=!1;return(H(t)?t.concat():[t]).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e["class"]===t["class"])&&(n=!0)}),n}:function(){return!0}},removeGridLines:function removeGridLines(t,e){var n=this.config,i=this.getGridFilterToRemove(t),a=e?j.xgridLines:j.ygridLines,r=e?j.xgridLine:j.ygridLine;this.main.select(".".concat(a)).selectAll(".".concat(r)).filter(i).transition().duration(n.transition_duration).style("opacity","0").remove();var o="grid_".concat(e?"x":"y","_lines");n[o]=n[o].filter(function toShow(t){return!i(t)})}}),L($.prototype,{initTooltip:function initTooltip(){var e=this,n=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",j.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(e.isTimeSeries()&&V(n.tooltip_init_x)){var t,i,a=e.data.targets[0];for(n.tooltip_init_x=e.parseDate(n.tooltip_init_x),t=0;(i=a.values[t])&&i.x-n.tooltip_init_x!=0;t++);n.tooltip_init_x=t}e.tooltip.html(n.tooltip_contents.call(e,e.data.targets.map(function(t){return e.addName(t.values[n.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType(null,["radar"])),e.color)),e.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},getTooltipContent:function getTooltipContent(t,e,n,i){var a,r,o,s,c=this,l=c.config,d=l.tooltip_format_title||e,u=l.tooltip_format_name||function(t){return t},g=l.tooltip_format_value||(c.isStackNormalized()?function(t,e){return"".concat((100*e).toFixed(2),"%")}:n),h=l.tooltip_order,f=function(t){return c.getBaseValue(t)},p=c.levelColor?function(t){return c.levelColor(t.value)}:function(t){return i(t.id)};if(null===h&&l.data_groups.length){var x=c.orderTargets(c.data.targets).map(function(t){return t.id}).reverse();t.sort(function(t,e){var n=t?t.value:null,i=e?e.value:null;return 0<n&&0<i&&(n=t.id?x.indexOf(t.id):null,i=e.id?x.indexOf(e.id):null),n-i})}else/^(asc|desc)$/.test(h)?t.sort(function(t,e){var n=t?f(t):null,i=e?f(e):null;return"asc"===h?n-i:i-n}):k(h)&&t.sort(h);for(var m=0,v=t.length;m<v;m++)if((r=t[m])&&(f(r)||0===f(r))){if(!a){var _=X(d?d(r.x):r.x);a='<table class="'.concat(c.CLASS.tooltip,'">').concat(C(_)?'<tr><th colspan="2">'.concat(_,"</th></tr>"):"")}if(o=[r.ratio,r.id,r.index,t],s=X(g.apply(void 0,[f(r)].concat(Y()(o)))),c.isAreaRangeType(r)){var y=["high","low"].map(function(t){return X(g.apply(void 0,[c.getAreaRangeData(r,t)].concat(Y()(o))))}),b=S()(y,2),T=b[0],A=b[1];s="<b>Mid:</b> ".concat(s," <b>High:</b> ").concat(T," <b>Low:</b> ").concat(A)}if(s!==undefined){if(null===r.name)continue;var w=X(u.apply(void 0,[r.name].concat(Y()(o)))),L=p(r);a+='<tr class="'.concat(c.CLASS.tooltipName).concat(c.getTargetSelectorSuffix(r.id),'"><td class="name">'),a+=c.patterns?'<svg><rect style="fill:'.concat(L,'" width="10" height="10"></rect></svg>'):'<span style="background-color:'.concat(L,'"></span>'),a+="".concat(w,'</td><td class="value">').concat(s,"</td></tr>")}}return"".concat(a,"</table>")},tooltipPosition:function tooltipPosition(t,e,n,i){var a=this,r=a.config,o=Object(z.mouse)(i),s=S()(o,2),c=s[0],l=s[1],d=a.getSvgLeft(!0),u=d+a.currentWidth-a.getCurrentPaddingRight();if(l+=20,a.hasArcType()){"touch"===a.inputType||a.hasType("radar")||(l+=a.height/2,c+=(a.width-(a.isLegendRight?a.getLegendWidth():0))/2)}else{var g=a.x(t[0].x);r.axis_rotated?(l=g+20,c+=d+100,u-=d):(l-=5,c=d+a.getCurrentPaddingLeft(!0)+20+(a.zoomScale?c:g))}var h=c+e;return u<h&&(c-=h-u+20),l+n>a.currentHeight&&(l-=n+30),l<0&&(l=0),{top:l,left:c}},showTooltip:function showTooltip(t,e){var n=this,i=n.config,a=n.hasArcType(null,["radar"]),r=t.filter(function(t){return t&&C(n.getBaseValue(t))}),o=i.tooltip_position||n.tooltipPosition;if(0!==r.length&&i.tooltip_show){var s=n.tooltip.datum(),c=JSON.stringify(t),l=s&&s.width||0,d=s&&s.height||0;if(!s||s.current!==c){var u=t.concat().sort()[0].index,g=i.tooltip_contents.call(n,t,n.axis.getXAxisTickFormat(),n.getYFormat(a),n.color);I(i.tooltip_onshow,n),n.tooltip.html(g).style("display","block").datum({index:u,current:c,width:l=n.tooltip.property("offsetWidth"),height:d=n.tooltip.property("offsetHeight")}),I(i.tooltip_onshown,n),n._handleLinkedCharts(!0,u)}var h=o.call(this,r,l,d,e);n.tooltip.style("top","".concat(h.top,"px")).style("left","".concat(h.left,"px"))}},hideTooltip:function hideTooltip(){var t=this.config;I(t.tooltip_onhide,this),this.tooltip.style("display","none").datum(null),I(t.tooltip_onhidden,this)},_handleLinkedCharts:function _handleLinkedCharts(c,l){var d=this;if(d.config.tooltip_linked){var u=d.config.tooltip_linked_name;(d.api.internal.charts||[]).forEach(function(t){if(t!==d.api){var e=t.internal.config,n=e.tooltip_linked,i=e.tooltip_linked_name,a=document.body.contains(t.element);if(n&&u===i&&a){var r=t.internal.tooltip.data()[0],o=l!==(r&&r.index);try{c&&o?t.tooltip.show({index:l}):!c&&t.tooltip.hide()}catch(s){}}}})}}}),L($.prototype,{initLegend:function initLegend(){var t=this,e=t.config;t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g"),e.legend_show?(t.legend.attr("transform",t.getTranslate("legend")),t.updateLegend()):(t.legend.style("visibility","hidden"),t.hiddenLegendIds=t.mapToIds(t.data.targets))},updateLegend:function updateLegend(t,e,n){var i=this,a=i.config;a.legend_contents_bindto&&a.legend_contents_template?i.updateLegendTemplate():i.updateLegendElement(t||i.mapToIds(i.data.targets),e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1},n)},updateLegendTemplate:function updateLegendTemplate(){var n=this,t=n.config,e=Object(z.select)(t.legend_contents_bindto),i=t.legend_contents_template;if(!e.empty()){var a=n.data.targets,r=[],o="";n.mapToIds(a).forEach(function(t){var e=k(i)?i.call(n,t,n.color(t),n.api.data(t)[0].values):i.replace(/{=COLOR}/g,n.color(t)).replace(/{=TITLE}/g,t);e&&(r.push(t),o+=e)});var s=e.html(o).selectAll(function(){return this.childNodes}).data(r);n.setLegendItem(s)}},updateSizeForLegend:function updateSizeForLegend(t,e){var n=this,i=n.config,a={top:n.isLegendTop?n.getCurrentPaddingTop()+i.legend_inset_y+5.5:n.currentHeight-t-n.getCurrentPaddingBottom()-i.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+i.legend_inset_x+.5:n.currentWidth-e-n.getCurrentPaddingRight()-i.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?a.top:n.currentHeight-t,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-e:n.isLegendInset?a.left:0}},transformLegend:function transformLegend(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},updateLegendStep:function updateLegendStep(t){this.legendStep=t},updateLegendItemWidth:function updateLegendItemWidth(t){this.legendItemWidth=t},updateLegendItemHeight:function updateLegendItemHeight(t){this.legendItemHeight=t},getLegendWidth:function getLegendWidth(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},getLegendHeight:function getLegendHeight(){var t=this,e=0;return t.config.legend_show&&(e=t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1)),e},opacityForLegend:function opacityForLegend(t){return t.classed(j.legendItemHidden)?null:"1"},opacityForUnfocusedLegend:function opacityForUnfocusedLegend(t){return t.classed(j.legendItemHidden)?null:"0.3"},toggleFocusLegend:function toggleFocusLegend(t,e){var n=this,i=n.mapToTargetIds(t);n.legend.selectAll(".".concat(j.legendItem)).filter(function(t){return 0<=i.indexOf(t)}).classed(j.legendItemFocused,e).transition().duration(100).style("opacity",function(){return(e?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,Object(z.select)(this))})},revertLegend:function revertLegend(){var t=this;t.legend.selectAll(".".concat(j.legendItem)).classed(j.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(Object(z.select)(this))})},showLegend:function showLegend(t){var e=this,n=e.config;n.legend_show||(n.legend_show=!0,e.legend.style("visibility","visible"),!e.legendHasRendered&&e.updateLegend()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(Object(z.select)(this))})},hideLegend:function hideLegend(t){var e=this,n=e.config;n.legend_show&&y(t)&&(n.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},clearLegendItemTextBoxCache:function clearLegendItemTextBoxCache(){this.legendItemTextBox={}},setLegendItem:function setLegendItem(t){var n=this,e=n.config,i="touch"===n.inputType;t.attr("class",function(t){var e=Object(z.select)(this);return(!e.empty()&&e.attr("class")||"")+n.generateClass(j.legendItem,t)}).style("visibility",function(t){return n.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){I(e.legend_item_onclick,n,t)||(z.event.altKey?(n.api.hide(),n.api.show(t)):(n.api.toggle(t),!i&&n.isTargetToShow(t)?n.api.focus(t):n.api.revert())),i&&n.hideTooltip()}),i||t.on("mouseout",function(t){I(e.legend_item_onout,n,t)||(Object(z.select)(this).classed(j.legendItemFocused,!1),n.api.revert())}).on("mouseover",function(t){I(e.legend_item_onover,n,t)||(Object(z.select)(this).classed(j.legendItemFocused,!0),!n.transiting&&n.isTargetToShow(t)&&n.api.focus(t))})},updateLegendElement:function updateLegendElement(t,e,n){var i,a,r,f=this,p=f.config,x=p.legend_item_tile_width+5,m=0,v=0,_=0,y={},b={},T={},A=[0],w={},L=0,S=f.isLegendRight||f.isLegendInset,C=t.filter(function(t){return!G(p.data_names[t])||null!==p.data_names[t]}),o=e||{},s=q(o,"withTransition",!0),c=q(o,"withTransitionForTransform",!0),l=function(t,e,n){var i,a,r,o=n===C.length-1,s=(a=t,r=e,f.legendItemTextBox[r]||(f.legendItemTextBox[r]=f.getTextRect(a,j.legendItem,a)),f.legendItemTextBox[r]),c=s.width+x+(o&&!S?0:10)+p.legend_padding,l=s.height+4,d=S?l:c,u=S?f.getLegendHeight():f.getLegendWidth(),g=function(t,e){e||(i=(u-_-d)/2)<10&&(i=(u-d)/2,_=0,L++),w[t]=L,A[L]=f.isLegendInset?10:i,y[t]=_,_+=d};if(0===n&&(v=m=L=_=0),p.legend_show&&!f.isLegendToShow(e))return b[e]=0,T[e]=0,w[e]=0,void(y[e]=0);b[e]=c,T[e]=l,(!m||m<=c)&&(m=c),(!v||v<=l)&&(v=l);var h=S?v:m;p.legend_equally?(Object.keys(b).forEach(function(t){return b[t]=m}),Object.keys(T).forEach(function(t){return T[t]=v}),(i=(u-h*C.length)/2)<10?(L=_=0,C.forEach(function(t){return g(t)})):g(e,!0)):g(e)};f.isLegendInset&&(L=p.legend_inset_step?p.legend_inset_step:C.length,f.updateLegendStep(L)),a=f.isLegendRight?(i=function(t){return m*w[t]},function(t){return A[w[t]]+y[t]}):f.isLegendInset?(i=function(t){return m*w[t]+10},function(t){return A[w[t]]+y[t]}):(i=function(t){return A[w[t]]+y[t]},function(t){return v*w[t]});var d=function(t,e){return i(t,e)+4+p.legend_item_tile_width},u=function(t,e){return i(t,e)},g=function(t,e){return i(t,e)-2},h=function(t,e){return i(t,e)-2+p.legend_item_tile_width},k=function(t,e){return a(t,e)+9},X=function(t,e){return a(t,e)-5},D=function(t,e){return a(t,e)+4},F=-200,R=f.legend.selectAll(".".concat(j.legendItem)).data(C).enter().append("g");f.setLegendItem(R),R.append("text").text(function(t){return G(p.data_names[t])?p.data_names[t]:t}).each(function(t,e){l(this,t,e)}).style("pointer-events","none").attr("x",S?d:F).attr("y",S?F:k),R.append("rect").attr("class",j.legendItemEvent).style("fill-opacity","0").attr("x",S?u:F).attr("y",S?F:X);var O=f.config.legend_usePoint;if(O){var I=[];R.append(function(t){var e=W(p.point_pattern)?p.point_pattern:[p.point_type];-1===I.indexOf(t)&&I.push(t);var n=e[I.indexOf(t)%e.length];return"rectangle"===n&&(n="rect"),document.createElementNS(z.namespaces.svg,f.hasValidPointType(n)?n:"use")}).attr("class",j.legendItemPoint).style("fill",function(t){return f.color(t)}).style("pointer-events","none").attr("href",function(t,e,n){return"use"===n[e].nodeName.toLowerCase()?"#".concat(f.datetimeId,"-point-").concat(t):undefined})}else R.append("line").attr("class",j.legendItemTile).style("stroke",f.color).style("pointer-events","none").attr("x1",S?g:F).attr("y1",S?F:D).attr("x2",S?h:F).attr("y2",S?F:D).attr("stroke-width",p.legend_item_tile_height);r=f.legend.select(".".concat(j.legendBackground," rect")),f.isLegendInset&&0<m&&0===r.size()&&(r=f.legend.insert("g",".".concat(j.legendItem)).attr("class",j.legendBackground).append("rect"));var E=f.legend.selectAll("text").data(C).text(function(t){return G(p.data_names[t])?p.data_names[t]:t}).each(function(t,e){l(this,t,e)});(s?E.transition():E).attr("x",d).attr("y",k);var B=f.legend.selectAll("rect.".concat(j.legendItemEvent)).data(C);if((s?B.transition():B).attr("width",function(t){return b[t]}).attr("height",function(t){return T[t]}).attr("x",u).attr("y",X),O){var M=f.legend.selectAll(".".concat(j.legendItemPoint)).data(C);(s?M.transition():M).each(function(){var t,e,n,i=this.nodeName.toLowerCase(),a=f.config.point_r,r="x",o="y",s=2,c=2.5;if("circle"===i){var l=.2*a;r="cx",o="cy",t=a+l,s=2*a,c=-l}else if("rect"===i){var d=2.5*a;n=e=d,c=3}Object(z.select)(this).attr(r,function(t){return g(t)+s}).attr(o,function(t){return D(t)-c}).attr("r",t).attr("width",e).attr("height",n)})}else{var P=f.legend.selectAll("line.".concat(j.legendItemTile)).data(C);(s?P.transition():P).style("stroke",f.color).attr("x1",g).attr("y1",D).attr("x2",h).attr("y2",D)}r&&(s?r.transition():r).attr("height",f.getLegendHeight()-12).attr("width",m*(L+1)+10),f.legend.selectAll(".".concat(j.legendItem)).classed(j.legendItemHidden,function(t){return!f.isTargetToShow(t)}),f.updateLegendItemWidth(m),f.updateLegendItemHeight(v),f.updateLegendStep(L),f.updateSizes(),f.updateScales(!s),f.updateSvgSize(),f.transformAll(c,n),f.legendHasRendered=!0}}),L($.prototype,{initTitle:function initTitle(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},redrawTitle:function redrawTitle(){var t=this;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t))},xForTitle:function xForTitle(){var t=this,e=t.config,n=e.title_position||"left";return 0<=n.indexOf("right")?t.currentWidth-t.getTextRect(t.title,t.CLASS.title,t.title).width-e.title_padding.right:0<=n.indexOf("center")?(t.currentWidth-t.getTextRect(t.title,t.CLASS.title,t.title).width)/2:e.title_padding.left},yForTitle:function yForTitle(){var t=this;return t.config.title_padding.top+t.getTextRect(t.title,t.CLASS.title,t.title).height},getTitlePadding:function getTitlePadding(){return this.yForTitle()+this.config.title_padding.bottom}}),L($.prototype,{getClipPath:function getClipPath(t){var e=this.config;if(!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t))return null;var n=0<=window.navigator.appVersion.toLowerCase().indexOf("msie 9.");return"url(".concat(n?"":document.URL.split("#")[0],"#").concat(t,")")},appendClip:function appendClip(t,e){return t.append("clipPath").attr("id",e).append("rect")},getAxisClipX:function getAxisClipX(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},getAxisClipY:function getAxisClipY(t){return t?-20:-this.margin.top},getXAxisClipX:function getXAxisClipX(){return this.getAxisClipX(!this.config.axis_rotated)},getXAxisClipY:function getXAxisClipY(){return this.getAxisClipY(!this.config.axis_rotated)},getYAxisClipX:function getYAxisClipX(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},getYAxisClipY:function getYAxisClipY(){return this.getAxisClipY(this.config.axis_rotated)},getAxisClipWidth:function getAxisClipWidth(t){var e=Math.max(30,this.margin.left),n=Math.max(30,this.margin.right);return t?this.width+2+e+n:this.margin.left+20},getAxisClipHeight:function getAxisClipHeight(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},getXAxisClipWidth:function getXAxisClipWidth(){return this.getAxisClipWidth(!this.config.axis_rotated)},getXAxisClipHeight:function getXAxisClipHeight(){return this.getAxisClipHeight(!this.config.axis_rotated)},getYAxisClipWidth:function getYAxisClipWidth(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},getYAxisClipHeight:function getYAxisClipHeight(){return this.getAxisClipHeight(this.config.axis_rotated)}}),L($.prototype,{initRegion:function initRegion(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",j.regions)},updateRegion:function updateRegion(t){var e=this,n=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select(".".concat(j.regions)).selectAll(".".concat(j.region)).data(n.regions),e.mainRegion.exit().transition().duration(t).style("opacity","0").remove(),e.mainRegion=e.mainRegion.enter().append("g").merge(e.mainRegion).attr("class",e.classRegion.bind(e)),e.mainRegion.append("rect").style("fill-opacity","0")},redrawRegion:function redrawRegion(t){var e=this,n=e.mainRegion.select("rect");return n=(t?n.transition():n).attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)),[(t?n.transition():n).style("fill-opacity",function(t){return C(t.opacity)?t.opacity:"0.1"}).on("end",function(){Object(z.select)(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function getRegionXY(t,e){var n=this,i=n.config.axis_rotated,a="x"===t,r="start",o=0;return"y"===e.axis||"y2"===e.axis?(!a&&(r="end"),(a?i:!i)&&r in e&&(o=(0,n[e.axis])(e[r]))):(a?!i:i)&&r in e&&(o=(n.zoomScale||n.x)(n.isTimeSeries()?n.parseDate(e[r]):e[r])),o},regionX:function regionX(t){return this.getRegionXY("x",t)},regionY:function regionY(t){return this.getRegionXY("y",t)},getRegionSize:function getRegionSize(t,e){var n=this,i=n.config.axis_rotated,a="width"===t,r=n[a?"regionX":"regionY"](e),o="end",s=n[t];return"y"===e.axis||"y2"===e.axis?(!a&&(o="start"),(a?i:!i)&&o in e&&(s=(0,n[e.axis])(e[o]))):(a?!i:i)&&o in e&&(s=(n.zoomScale||n.x)(n.isTimeSeries()?n.parseDate(e[o]):e[o])),s<r?0:s-r},regionWidth:function regionWidth(t){return this.getRegionSize("width",t)},regionHeight:function regionHeight(t){return this.getRegionSize("height",t)},isRegionOnX:function isRegionOnX(t){return!t.axis||"x"===t.axis}}),L($.prototype,{drag:function drag(t){var m=this,e=m.config,n=m.main;if(!m.hasArcType()&&e.data_selection_enabled&&(!e.zoom_enabled||m.zoom.altDomain)&&e.data_selection_multiple){var i=S()(m.dragStart,2),a=i[0],r=i[1],o=S()(t,2),s=o[0],c=o[1],v=Math.min(a,s),_=Math.max(a,s),y=e.data_selection_grouped?m.margin.top:Math.min(r,c),b=e.data_selection_grouped?m.height:Math.max(r,c);n.select(".".concat(j.dragarea)).attr("x",v).attr("y",y).attr("width",_-v).attr("height",b-y),n.selectAll(".".concat(j.shapes)).selectAll(".".concat(j.shape)).filter(function(t){return e.data_selection_isselectable(t)}).each(function(t,e){var n,i,a,r,o,s,c,l,d,u,g,h=Object(z.select)(this),f=h.classed(j.SELECTED),p=h.classed(j.INCLUDED),x=!1;if(h.classed(j.circle))n=1*h.attr("cx"),i=1*h.attr("cy"),o=m.togglePoint,x=v<n&&n<_&&y<i&&i<b;else{if(!h.classed(j.bar))return;l=(c=this).getBoundingClientRect(),d=l.width,u=l.height,n=(s={x:(g=T(c))[0].x,y:Math.min(g[0].y,g[1].y),width:d,height:u}).x,i=s.y,a=s.width,r=s.height,o=m.togglePath,x=!(_<n||n+a<v||b<i||i+r<y)}x^p&&(h.classed(j.INCLUDED,!p),h.classed(j.SELECTED,!f),o.call(m,!f,h,t,e))})}},dragstart:function dragstart(t){var e=this,n=e.config;e.hasArcType()||!n.data_selection_enabled||(e.dragStart=t,e.main.select(".".concat(j.chart)).append("rect").attr("class",j.dragarea).style("opacity","0.1"),e.setDragStatus(!0))},dragend:function dragend(){var t=this,e=t.config;t.hasArcType()||!e.data_selection_enabled||(t.main.select(".".concat(j.dragarea)).transition().duration(100).style("opacity","0").remove(),t.main.selectAll(".".concat(j.shape)).classed(j.INCLUDED,!1),t.setDragStatus(!1))},setDragStatus:function setDragStatus(t){this.dragging=t}});var ct=n(22);L($.prototype,{selectPoint:function selectPoint(t,e,n){var i=this,a=i.config,r=a.axis_rotated,o=(r?i.circleY:i.circleX).bind(i),s=(r?i.circleX:i.circleY).bind(i),c=i.pointSelectR.bind(i);I(a.data_onselected,i.api,e,t.node()),i.main.select(".".concat(j.selectedCircles).concat(i.getTargetSelectorSuffix(e.id))).selectAll(".".concat(j.selectedCircle,"-").concat(n)).data([e]).enter().append("circle").attr("class",function(){return i.generateClass(j.selectedCircle,n)}).attr("cx",o).attr("cy",s).attr("stroke",function(){return i.color(e)}).attr("r",function(t){return 1.4*i.pointSelectR(t)}).transition().duration(100).attr("r",c)},unselectPoint:function unselectPoint(t,e,n){I(this.config.data_onunselected,this.api,e,t.node()),this.main.select(".".concat(j.selectedCircles).concat(this.getTargetSelectorSuffix(e.id))).selectAll(".".concat(j.selectedCircle,"-").concat(n)).transition().duration(100).attr("r",0).remove()},togglePoint:function togglePoint(t,e,n,i){this["".concat(t?"":"un","selectPoint")](e,n,i)},selectPath:function selectPath(t,e){var n=this,i=n.config;I(i.data_onselected,n,e,t.node()),i.interaction_brighten&&t.transition().duration(100).style("fill",function(){return Object(ct.rgb)(n.color(e)).brighter(.75)})},unselectPath:function unselectPath(t,e){var n=this,i=n.config;I(i.data_onunselected,n,e,t.node()),i.interaction_brighten&&t.transition().duration(100).style("fill",function(){return n.color(e)})},togglePath:function togglePath(t,e,n,i){this["".concat(t?"":"un","selectPath")](e,n,i)},getToggle:function getToggle(t,e){return"path"===t.nodeName?this.togglePath:this.isStepType(e)?function(){}:this.togglePoint},toggleShape:function toggleShape(t,e,n){var i,a=this,r=a.config,o=Object(z.select)(t),s=o.classed(j.SELECTED),c=a.getToggle(t,e).bind(a);if(r.data_selection_enabled&&r.data_selection_isselectable(e)){if(!r.data_selection_multiple){var l=".".concat(j.shapes);r.data_selection_grouped&&(l+=a.getTargetSelectorSuffix(e.id)),a.main.selectAll(l).selectAll(".".concat(j.shape)).each(function(t,e){var n=Object(z.select)(this);n.classed(j.SELECTED)&&c(!1,(i=n).classed(j.SELECTED,!1),t,e)})}i&&i.node()===o.node()||(o.classed(j.SELECTED,!s),c(!s,o,e,n))}}}),L($.prototype,{initBrush:function initBrush(){var a=this;a.brush=a.config.axis_rotated?Object(h.brushY)():Object(h.brushX)();var t=function(){a.redrawForBrush()};a.brush.on("start",function(){"touch"===a.inputType&&a.hideTooltip(),t()}).on("brush",t),a.brush.update=function(){return 0===this.extent()()[1].filter(function(t){return isNaN(t)}).length&&a.context&&a.context.select(".".concat(j.brush)).call(this),this},a.brush.scale=function(t,e){var n=a.svg.select(".bb-brush .overlay"),i=[[0,0]];t.range?i.push([t.range()[1],(e||!n.empty())&&~~n.attr("height")||60]):t.constructor===Array&&i.push(t),a.config.axis_rotated&&i.reverse(),this.extent(a.config.axis_x_extent||i),this.update()},a.brush.getSelection=function(){return a.context?a.context.select(".".concat(j.brush)):Object(z.select)([])}},initSubchart:function initSubchart(){var t=this,e=t.config,n=e.subchart_show?"visible":"hidden";t.context=t.svg.append("g").attr("transform",t.getTranslate("context"));var i=t.context;i.style("visibility",n),i.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",j.chart),i.select(".".concat(j.chart)).append("g").attr("class",j.chartBars),i.select(".".concat(j.chart)).append("g").attr("class",j.chartLines),i.append("g").attr("clip-path",t.clipPath).attr("class",j.brush).call(t.brush),t.axes.subx=i.append("g").attr("class",j.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?n:"hidden")},updateTargetsForSubchart:function updateTargetsForSubchart(t){var e=this,n=e.context,i=e.config,a=e.classChartBar.bind(e),r=e.classBars.bind(e),o=e.classChartLine.bind(e),s=e.classLines.bind(e),c=e.classAreas.bind(e);if(i.subchart_show){var l=n.select(".".concat(j.chartBars)).selectAll(".".concat(j.chartBar)).data(t).attr("class",a);l.enter().append("g").style("opacity","0").attr("class",a).merge(l).append("g").attr("class",r);var d=n.select(".".concat(j.chartLines)).selectAll(".".concat(j.chartLine)).data(t).attr("class",o),u=d.enter().append("g").style("opacity","0").attr("class",o).merge(d);u.append("g").attr("class",s),u.append("g").attr("class",c),n.selectAll(".".concat(j.brush," rect")).attr(i.axis_rotated?"width":"height",i.axis_rotated?e.width2:e.height2)}},updateBarForSubchart:function updateBarForSubchart(t){var e=this;e.contextBar=e.context.selectAll(".".concat(j.bars)).selectAll(".".concat(j.bar)).data(e.barData.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity","0").remove(),e.contextBar=e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color).merge(e.contextBar).style("opacity",e.initialOpacity.bind(e))},redrawBarForSubchart:function redrawBarForSubchart(t,e,n){(e?this.contextBar.transition(Math.random().toString()).duration(n):this.contextBar).attr("d",t).style("opacity","1")},updateLineForSubchart:function updateLineForSubchart(t){var e=this;e.contextLine=e.context.selectAll(".".concat(j.lines)).selectAll(".".concat(j.line)).data(e.lineData.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity","0").remove(),e.contextLine=e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color).merge(e.contextLine).style("opacity",e.initialOpacity.bind(e))},redrawLineForSubchart:function redrawLineForSubchart(t,e,n){(e?this.contextLine.transition(Math.random().toString()).duration(n):this.contextLine).attr("d",t).style("opacity","1")},updateAreaForSubchart:function updateAreaForSubchart(t){var e=this;e.contextArea=e.context.selectAll(".".concat(j.areas)).selectAll(".".concat(j.area)).data(e.lineData.bind(e)),e.contextArea.exit().transition().duration(t).style("opacity","0").remove(),e.contextArea=e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=Object(z.select)(this).style("opacity"),"0"}).merge(e.contextArea).style("opacity","0")},redrawAreaForSubchart:function redrawAreaForSubchart(t,e,n){(e?this.contextArea.transition(Math.random().toString()).duration(n):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},redrawSubchart:function redrawSubchart(t,e,n,i,a,r,o){var s=this,c=s.config;if(s.context.style("visibility",c.subchart_show?"visible":"hidden"),c.subchart_show&&(z.event&&"zoom"===z.event.type&&s.brush.update(),t)){w(s)||s.brush.update();var l=s.generateDrawArea(a,!0),d=s.generateDrawBar(r,!0),u=s.generateDrawLine(o,!0);s.updateBarForSubchart(n),s.updateLineForSubchart(n),s.updateAreaForSubchart(n),s.redrawBarForSubchart(d,n,n),s.redrawLineForSubchart(u,n,n),s.redrawAreaForSubchart(l,n,n)}},redrawForBrush:function redrawForBrush(){var t=this,e=t.x;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t.config.subchart_onbrush.call(t.api,e.orgDomain())},transformContext:function transformContext(t,e){var n;e&&e.axisSubX?n=e.axisSubX:(n=this.context.select(".".concat(j.axisX)),t&&(n=n.transition())),this.context.attr("transform",this.getTranslate("context")),n.attr("transform",this.getTranslate("subx"))},getDefaultExtent:function getDefaultExtent(){var t=this,e=t.config,n=k(e.axis_x_extent)?e.axis_x_extent(t.getXDomain(t.data.targets)):e.axis_x_extent;return t.isTimeSeries()&&(n=[t.parseDate(n[0]),t.parseDate(n[1])]),n}});var lt=n(23);L($.prototype,{initZoom:function initZoom(){this.zoomScale=null,this.generateZoom()},bindZoomEvent:function bindZoomEvent(){var t=!(0<arguments.length&&arguments[0]!==undefined)||arguments[0],e=this,n=e.config.zoom_enabled;e.redrawEventRect(),n&&t?e.bindZoomOnEventRect(n.type):!1===t&&(e.api.unzoom(),e.main.select(".".concat(j.eventRects)).on(".zoom",null).on(".drag",null))},generateZoom:function generateZoom(){var a=this,r=a.config,t=Object(lt.zoom)().duration(0).on("start",a.onZoomStart.bind(a)).on("zoom",a.onZoom.bind(a)).on("end",a.onZoomEnd.bind(a));t.orgScaleExtent=function(){var t=r.zoom_extent||[1,10];return[t[0],Math.max(a.getMaxDataCount()/t[1],t[1])]},t.updateScaleExtent=function(){var t=B(a.x.orgDomain())/B(a.getZoomDomain()),e=this.orgScaleExtent();return this.scaleExtent([e[0]*t,e[1]*t]),this},t.updateTransformScale=function(t){var e=t.rescaleX(a.subX.orgScale()),n=a.trimXDomain(e.domain()),i=r.zoom_rescale;e.domain(n,a.orgXDomain),a.zoomScale=a.getCustomizedScale(e),a.xAxis.scale(a.zoomScale),i&&a.x.domain(a.zoomScale.orgDomain())},a.zoom=t},onZoomStart:function onZoomStart(){var t=this,e=z.event.sourceEvent;t.zoom.altDomain=e.altKey?t.x.orgDomain():null,t.zoom.startEvent=e,I(t.config.zoom_onzoomstart,t.api,e)},onZoom:function onZoom(){var t=this,e=t.config,n=z.event;if(e.zoom_enabled){var i="mousemove"===n.sourceEvent.type,a=n.transform;return t.zoom.updateTransformScale(a),0===t.filterTargetsToShow(t.data.targets).length?void 0:i&&t.zoom.altDomain?(t.x.domain(t.zoom.altDomain),void a.scale(t.zoomScale).updateScaleExtent()):(t.isCategorized()&&t.x.orgDomain()[0]===t.orgXDomain[0]&&t.x.domain([t.orgXDomain[0]-1e-10,t.x.orgDomain()[1]]),t.redraw({withTransition:!1,withY:e.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),t.cancelClick=i,void I(e.zoom_onzoom,t.api,t.subX.domain()))}},onZoomEnd:function onZoomEnd(){var t=this,e=t.zoom.startEvent;event&&e.clientX===event.clientX&&e.clientY===event.clientY||(t.redrawEventRect(),t.updateZoom(),I(t.config.zoom_onzoomend,t.api,t.subX.domain()))},getZoomDomain:function getZoomDomain(){var t=this.config;return[Object(m.min)([this.orgXDomain[0],t.zoom_x_min]),Object(m.max)([this.orgXDomain[1],t.zoom_x_max])]},updateZoom:function updateZoom(){var t=this;if(t.zoomScale){var e=t.zoomScale.domain(),n=t.subX.domain();(e[0]<=n[0]||e[0]-.015<=n[0])&&(n[1]<=e[1]||n[1]<=e[1]-.015)&&(t.xAxis.scale(t.subX),t.x.domain(t.subX.orgDomain()),t.zoomScale=null)}},bindZoomOnEventRect:function bindZoomOnEventRect(t){var e="drag"===t?this.zoomBehaviour:this.zoom;this.main.select(".".concat(j.eventRects)).call(e).on("dblclick.zoom",null)},initZoomBehaviour:function initZoomBehaviour(){var c=this,t=c.config.axis_rotated,l=0,d=0,u=null;c.zoomBehaviour=Object(et.drag)().clickDistance(4).on("start",function(){c.setDragStatus(!0),u||(u=c.main.append("rect").attr("clip-path",c.clipPath).attr("class",j.zoomBrush).attr("width",t?c.width:0).attr("height",t?0:c.height)),l=Object(z.mouse)(this)[0],d=l,u.attr("x",l).attr("width",0),c.onZoomStart()}).on("drag",function(){d=Object(z.mouse)(this)[0],u.attr("x",Math.min(l,d)).attr("width",Math.abs(d-l))}).on("end",function(){var t,e=c.zoomScale||c.x;if(c.setDragStatus(!1),u.attr("x",0).attr("width",0),d<l&&(l=(t=[d,l])[0],d=t[1]),l<0&&(d+=Math.abs(l),l=0),l!==d)c.api.zoom([l,d].map(function(t){return e.invert(t)})),c.onZoomEnd();else if(c.isMultipleX())c.clickHandlerForMultipleXS.bind(this)(c);else{var n=z.event.sourceEvent||z.event,i="clientX"in n?[n.clientX,n.clientY]:[n.x,n.y],a=S()(i,2),r=a[0],o=a[1],s=document.elementFromPoint(r,o);c.clickHandlerForSingleX.bind(s)(Object(z.select)(s).datum(),c)}})},setZoomResetButton:function setZoomResetButton(){var t=this,e=t.config,n=e.zoom_resetButton;n&&"drag"===e.zoom_enabled.type&&(t.zoom.resetBtn?t.zoom.resetBtn.style("display",null):t.zoom.resetBtn=t.selectChart.append("div").classed(j.button,!0).append("span").on("click",t.api.unzoom.bind(t)).classed(j.buttonZoomReset,!0).text(n.text||"Reset Zoom"))}});var dt=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];L($.prototype,{getColorFromCss:function getColorFromCss(){var t=document.body,e=t.__colorPattern__;if(!e){var n=document.createElement("span");n.className=j.colorPattern,n.style.display="none",t.appendChild(n);var i=window.getComputedStyle(n).backgroundImage;n.parentNode.removeChild(n),-1<i.indexOf(";")&&(e=i.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(t){return t.trim().replace(/[\"'\s]/g,"")}).filter(Boolean),t.__colorPattern__=e)}return e},generateColor:function generateColor(){var c=this,t=c.config,a=t.data_colors,r=t.data_color,o=[],s=W(t.color_pattern)?t.color_pattern:Object(u.scaleOrdinal)(c.getColorFromCss()||dt).range(),l=s;if(k(t.color_tiles)){var d=t.color_tiles(),e=s.map(function(t,e){var n,i,a,r,o=t.replace(/[#\(\)\s,]/g,""),s="".concat(c.datetimeId,"-pattern-").concat(o,"-").concat(e);return n=d[e%d.length],i=t,a=s,(r=Object(z.select)(n.cloneNode(!0))).attr("id",a).insert("rect",":first-child").attr("width",r.attr("width")).attr("height",r.attr("height")).style("fill",i),{id:a,node:r.node()}});s=e.map(function(t){return"url(#".concat(t.id,")")}),c.patterns=e}return function(t){var e,n=t.id||t.data&&t.data.id||t,i=c.isTypeOf(n,["line","spline","step"])||!c.config.data_types[n];return k(a[n])?e=a[n](t):a[n]?e=a[n]:(o.indexOf(n)<0&&o.push(n),e=i?l[o.indexOf(n)%l.length]:s[o.indexOf(n)%s.length],a[n]=e),k(r)?r(e,t):e}},generateLevelColor:function generateLevelColor(){var t=this.config,i=t.color_pattern,e=t.color_threshold,a="value"===e.unit,r=e.max||100,o=e.values&&e.values.length?e.values:[];return W(e)?function(t){for(var e=i[i.length-1],n=0;n<o.length;n++)if((a?t:100*t/r)<o[n]){e=i[n];break}return e}:null}});var ut=function(t,e,n){var i=t.config,a="axis_".concat(e,"_tick_format");return(i[a]?i[a]:t.defaultValueFormat)(n)};L($.prototype,{getYFormat:function getYFormat(t){var i=this,a=i.yFormat,r=i.y2Format;return t&&!i.hasType("gauge")&&(a=i.defaultArcValueFormat,r=i.defaultArcValueFormat),function(t,e,n){return("y2"===i.axis.getId(n)?r:a).call(i,t,e)}},yFormat:function yFormat(t){return ut(this,"y",t)},y2Format:function y2Format(t){return ut(this,"y2",t)},defaultValueFormat:function defaultValueFormat(t){return C(t)?+t:""},defaultArcValueFormat:function defaultArcValueFormat(t,e){return"".concat((100*e).toFixed(1),"%")},dataLabelFormat:function dataLabelFormat(t){var e=this.config.data_labels,n=function(t){return C(t)?+t:""},i=n;return k(e.format)?i=e.format:_(e.format)&&(i=e.format[t]?!0===e.format[t]?n:e.format[t]:function(){return""}),i}}),L($.prototype,{addCache:function addCache(t,e){var n=!!(2<arguments.length&&arguments[2]!==undefined)&&arguments[2];this.cache[t]=n?this.cloneTarget(e):e},removeCache:function removeCache(t){var e=this;U(t).forEach(function(t){return delete e.cache[t]})},getCache:function getCache(t){if(!(1<arguments.length&&arguments[1]!==undefined&&arguments[1]))return this.cache[t]||null;for(var e,n=[],i=0;e=t[i];i++)e in this.cache&&n.push(this.cloneTarget(this.cache[e]));return n},resetCache:function resetCache(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)}}),L($.prototype,{CLASS:j,generateClass:function generateClass(t,e){return" ".concat(t," ").concat(t+this.getTargetSelectorSuffix(e))},classText:function classText(t){return this.generateClass(j.text,t.index)},classTexts:function classTexts(t){return this.generateClass(j.texts,t.id)},classShape:function classShape(t){return this.generateClass(j.shape,t.index)},classShapes:function classShapes(t){return this.generateClass(j.shapes,t.id)},generateExtraLineClass:function generateExtraLineClass(){var n=this.config.line_classes||[],i=[];return function(t){var e=t.id||t.data&&t.data.id||t;return i.indexOf(e)<0&&i.push(e),n[i.indexOf(e)%n.length]}},classLine:function classLine(t){return this.classShape(t)+this.generateClass(j.line,t.id)},classLines:function classLines(t){return this.classShapes(t)+this.generateClass(j.lines,t.id)},classCircle:function classCircle(t){return this.classShape(t)+this.generateClass(j.circle,t.index)},classCircles:function classCircles(t){return this.classShapes(t)+this.generateClass(j.circles,t.id)},classBar:function classBar(t){return this.classShape(t)+this.generateClass(j.bar,t.index)},classBars:function classBars(t){return this.classShapes(t)+this.generateClass(j.bars,t.id)},classArc:function classArc(t){return this.classShape(t.data)+this.generateClass(j.arc,t.data.id)},classArcs:function classArcs(t){return this.classShapes(t.data)+this.generateClass(j.arcs,t.data.id)},classArea:function classArea(t){return this.classShape(t)+this.generateClass(j.area,t.id)},classAreas:function classAreas(t){return this.classShapes(t)+this.generateClass(j.areas,t.id)},classRegion:function classRegion(t,e){return"".concat(this.generateClass(j.region,e)," ").concat("class"in t?t["class"]:"")},classEvent:function classEvent(t){return this.generateClass(j.eventRect,t.index)},classTarget:function classTarget(t){var e=this.config.data_classes[t],n="";return e&&(n=" ".concat(j.target,"-").concat(e)),this.generateClass(j.target,t)+n},classFocus:function classFocus(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function classFocused(t){return" ".concat(0<=this.focusedTargetIds.indexOf(t.id)?j.focused:"")},classDefocused:function classDefocused(t){return" ".concat(0<=this.defocusedTargetIds.indexOf(t.id)?j.defocused:"")},classChartText:function classChartText(t){return j.chartText+this.classTarget(t.id)},classChartLine:function classChartLine(t){return j.chartLine+this.classTarget(t.id)},classChartBar:function classChartBar(t){return j.chartBar+this.classTarget(t.id)},classChartArc:function classChartArc(t){return j.chartArc+this.classTarget(t.data.id)},classChartRadar:function classChartRadar(t){return j.chartRadar+this.classTarget(t.id)},getTargetSelectorSuffix:function getTargetSelectorSuffix(t){return t||0===t?"-".concat(t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},selectorTarget:function selectorTarget(t,e){return"".concat(e||"",".").concat(j.target+this.getTargetSelectorSuffix(t))},selectorTargets:function selectorTargets(t,e){var n=this,i=t||[];return i.length?i.map(function(t){return n.selectorTarget(t,e)}):null},selectorLegend:function selectorLegend(t){return".".concat(j.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function selectorLegends(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null}}),L(K.prototype,{focus:function focus(t){var e=this.internal,n=e.mapToTargetIds(t),i=e.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),i.classed(j.focused,!0).classed(j.defocused,!1),e.hasArcType()&&e.expandArc(n),e.toggleFocusLegend(n,!0),e.focusedTargetIds=n,e.defocusedTargetIds=e.defocusedTargetIds.filter(function(t){return n.indexOf(t)<0})},defocus:function defocus(t){var e=this.internal,n=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e))).classed(j.focused,!1).classed(j.defocused,!0),e.hasArcType()&&e.unexpandArc(n),e.toggleFocusLegend(n,!1),e.focusedTargetIds=e.focusedTargetIds.filter(function(t){return n.indexOf(t)<0}),e.defocusedTargetIds=n},revert:function revert(t){var e=this.internal,n=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(n)).classed(j.focused,!1).classed(j.defocused,!1),e.hasArcType()&&e.unexpandArc(n),e.config.legend_show&&(e.showLegend(n.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(n)).filter(function(){return Object(z.select)(this).classed(j.legendItemFocused)}).classed(j.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]}}),L(K.prototype,{show:function show(t){var e=1<arguments.length&&arguments[1]!==undefined?arguments[1]:{},n=this.internal,i=n.mapToTargetIds(t);n.removeHiddenTargetIds(i);var a=n.svg.selectAll(n.selectorTargets(i));a.transition().style("opacity","1","important").call(n.endall,function(){a.style("opacity",null).style("opacity","1")}),e.withLegend&&n.showLegend(i),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},hide:function hide(t){var e=1<arguments.length&&arguments[1]!==undefined?arguments[1]:{},n=this.internal,i=n.mapToTargetIds(t);n.addHiddenTargetIds(i);var a=n.svg.selectAll(n.selectorTargets(i));a.transition().style("opacity","0","important").call(n.endall,function(){a.style("opacity",null).style("opacity","0")}),e.withLegend&&n.hideLegend(i),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},toggle:function toggle(t){var e=this,n=1<arguments.length&&arguments[1]!==undefined?arguments[1]:{},i=this.internal,a={show:[],hide:[]};i.mapToTargetIds(t).forEach(function(t){return a[i.isTargetToShow(t)?"hide":"show"].push(t)}),a.show.length&&this.show(a.show,n),a.hide.length&&setTimeout(function(){return e.hide(a.hide,n)},0)}});var gt=function(t){var e,n=this.internal,i=t;if(n.config.zoom_enabled&&i){if(n.isTimeSeries()&&(i=i.map(function(t){return n.parseDate(t)})),n.config.subchart_show){var a=n.zoomScale||n.x;n.brush.getSelection().call(n.brush.move,[a(i[0]),a(i[1])]),e=i}else n.x.domain(i),n.zoomScale=n.x,n.xAxis.scale(n.zoomScale),e=n.zoomScale.orgDomain();n.redraw({withTransition:!0,withY:n.config.zoom_rescale,withDimension:!1}),n.setZoomResetButton(),I(n.config.zoom_onzoom,this,n.x.orgDomain())}else e=n.zoomScale?n.zoomScale.domain():n.x.orgDomain();return e};L(gt,{enable:function enable(){var t=0<arguments.length&&arguments[0]!==undefined?arguments[0]:"wheel",e=this.internal,n=e.config,i=t;t&&(i=V(t)&&/^(drag|wheel)$/.test(t)?{type:t}:t),n.zoom_enabled=i,e.zoom?!1===t&&e.bindZoomEvent(!1):(e.initZoom(),e.initZoomBehaviour(),e.bindZoomEvent()),e.updateAndRedraw()},max:function max(t){var e=this.internal,n=e.config;return(0===t||t)&&(n.zoom_x_max=Object(m.max)([e.orgXDomain[1],t])),n.zoom_x_max},min:function min(t){var e=this.internal,n=e.config;return(0===t||t)&&(n.zoom_x_min=Object(m.min)([e.orgXDomain[0],t])),n.zoom_x_min},range:function range(t){var e=this.zoom;return b(t)&&(G(t.min)&&e.min(t.min),G(t.max)&&e.max(t.max)),{min:e.min(),max:e.max()}}}),L(K.prototype,{zoom:gt,unzoom:function unzoom(){var t=this.internal,e=t.config;t.zoomScale&&(e.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(lt.zoomIdentity),t.updateZoom(),t.zoom.resetBtn&&t.zoom.resetBtn.style("display","none"),t.redraw({withTransition:!0,withY:e.zoom_rescale}))}}),L(K.prototype,{load:function load(e){var t=this.internal,n=t.config;e.xs&&t.addXs(e.xs),"names"in e&&this.data.names(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){n.data_classes[t]=e.classes[t]}),"categories"in e&&t.isCategorized()&&(n.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){n.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){n.data_colors[t]=e.colors[t]}),"unload"in e&&!1!==e.unload?t.unload(t.mapToTargetIds(!0===e.unload?null:e.unload),function(){return t.loadFromArgs(e)}):t.loadFromArgs(e)},unload:function unload(t){var e=this.internal,n=t||{};H(n)?n={ids:n}:V(n)&&(n={ids:[n]});var i=e.mapToTargetIds(n.ids);e.unload(i,function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.removeCache(i),n.done&&n.done()})}});var ht=n(24);L(K.prototype,{flow:function flow(t){var e,n,i,a,r=this.internal,o=[],s=r.getMaxDataCount(),c=0,l=0;if(t.json)e=r.convertJsonToData(t.json,t.keys);else if(t.rows)e=r.convertRowsToData(t.rows);else{if(!t.columns)return;e=r.convertColumnsToData(t.columns)}var d=r.convertDataToTargets(e,!0);r.data.targets.forEach(function(t){for(var e=!1,n=0;n<d.length;n++)if(t.id===d[n].id){e=!0,t.values[t.values.length-1]&&(l=t.values[t.values.length-1].index+1),c=d[n].values.length;for(var i=0;i<c;i++)d[n].values[i].index=l+i,r.isTimeSeries()||(d[n].values[i].x=l+i);t.values=t.values.concat(d[n].values),d.splice(n,1);break}e||o.push(t.id)}),r.data.targets.forEach(function(t){for(var e=0;e<o.length;e++)if(t.id===o[e]){l=t.values[t.values.length-1].index+1;for(var n=0;n<c;n++)t.values.push({id:t.id,index:l+n,x:r.isTimeSeries()?r.getOtherTargetX(l+n):l+n,value:null})}}),r.data.targets.length&&d.forEach(function(t){for(var e=[],n=r.data.targets[0].values[0].index;n<l;n++)e.push({id:t.id,index:n,x:r.isTimeSeries()?r.getOtherTargetX(n):n,value:null});t.values.forEach(function(t){t.index+=l,r.isTimeSeries()||(t.x+=l)}),t.values=e.concat(t.values)}),r.data.targets=r.data.targets.concat(d);var u=r.data.targets[0],g=u.values[0];G(t.to)?(c=0,a=r.isTimeSeries()?r.parseDate(t.to):t.to,u.values.forEach(function(t){t.x<a&&c++})):G(t.length)&&(c=t.length),s?1===s&&r.isTimeSeries()&&(i=(u.values[u.values.length-1].x-g.x)/2,n=[new Date(+g.x-i),new Date(+g.x+i)],r.updateXDomain(null,!0,!0,!1,n)):(i=r.isTimeSeries()?1<u.values.length?u.values[u.values.length-1].x-g.x:g.x-r.getXDomain(r.data.targets)[0]:1,n=[g.x-i,g.x],r.updateXDomain(null,!0,!0,!1,n)),r.updateTargets(r.data.targets),r.redraw({flow:{index:g.index,length:c,duration:C(t.duration)?t.duration:r.config.transition_duration,done:t.done,orgDataCount:s},withLegend:!0,withTransition:1<s,withTrimXDomain:!1,withUpdateXAxis:!0})}}),L($.prototype,{generateFlow:function generateFlow(R){var O=this,I=O.config;return function(){var t,e,n=R.targets,i=R.flow,r=R.drawBar,o=R.drawLine,s=R.drawArea,c=R.cx,l=R.cy,d=R.xv,u=R.xForText,g=R.yForText,a=R.duration,h=i.index,f=i.length,p=O.getValueOnIndex(O.data.targets[0].values,h),x=O.getValueOnIndex(O.data.targets[0].values,h+f),m=O.x.domain(),v=i.duration||a,_=i.done||function(){},y=O.generateWait(),b=O.xgrid||Object(z.selectAll)([]),T=O.xgridLines||Object(z.selectAll)([]),A=O.mainRegion||Object(z.selectAll)([]),w=O.mainText||Object(z.selectAll)([]),L=O.mainBar||Object(z.selectAll)([]),S=O.mainLine||Object(z.selectAll)([]),C=O.mainArea||Object(z.selectAll)([]),k=O.mainCircle||Object(z.selectAll)([]);O.flowing=!0,O.data.targets.forEach(function(t){t.values.splice(0,f)});var X=O.updateXDomain(n,!0,!0);O.updateXGrid&&O.updateXGrid(!0),t=i.orgDataCount?1===i.orgDataCount||(p&&p.x)===(x&&x.x)?O.x(m[0])-O.x(X[0]):O.isTimeSeries()?O.x(m[0])-O.x(X[0]):O.x(p.x)-O.x(x.x):1===O.data.targets[0].values.length?O.isTimeSeries()?(p=O.getValueOnIndex(O.data.targets[0].values,0),x=O.getValueOnIndex(O.data.targets[0].values,O.data.targets[0].values.length-1),O.x(p.x)-O.x(x.x)):B(X)/2:O.x(m[0])-O.x(X[0]),e=B(m)/B(X);var D="translate(".concat(t,",0) scale(").concat(e,",1)");O.hideXGridFocus();var F=Object(E.transition)().ease(ht.easeLinear).duration(v);y.add([O.axes.x.transition(F).call(O.xAxis.setTransition(F)),L.transition(F).attr("transform",D),S.transition(F).attr("transform",D),C.transition(F).attr("transform",D),k.transition(F).attr("transform",D),w.transition(F).attr("transform",D),A.filter(O.isRegionOnX).transition(F).attr("transform",D),b.transition(F).attr("transform",D),T.transition(F).attr("transform",D)]),F.call(y,function(){var t=[],e=[],n=[];if(f){for(var i,a=0;a<f;a++)i=h+a,t.push(".".concat(j.shape,"-").concat(i)),e.push(".".concat(j.text,"-").concat(i)),n.push(".".concat(j.eventRect,"-").concat(i));O.svg.selectAll(".".concat(j.shapes)).selectAll(t).remove(),O.svg.selectAll(".".concat(j.texts)).selectAll(e).remove(),O.svg.selectAll(".".concat(j.eventRects)).selectAll(n).remove(),O.svg.select(".".concat(j.xgrid)).remove()}if(b.size()&&b.attr("transform",null).attr(O.xgridAttr),T.attr("transform",null),T.select("line").attr("x1",I.axis_rotated?0:d).attr("x2",I.axis_rotated?O.width:d),T.select("text").attr("x",I.axis_rotated?O.width:0).attr("y",d),L.attr("transform",null).attr("d",r),S.attr("transform",null).attr("d",o),C.attr("transform",null).attr("d",s),k.attr("transform",null),O.isCirclePoint())k.attr("cx",c).attr("cy",l);else{k.attr("x",function(t){return c(t)-I.point_r}).attr("y",function(t){return l(t)-I.point_r}).attr("cx",c).attr("cy",l)}w.attr("transform",null).attr("x",u).attr("y",g).style("fill-opacity",O.opacityForText.bind(O)),A.attr("transform",null),A.select("rect").filter(O.isRegionOnX).attr("x",O.regionX.bind(O)).attr("width",O.regionWidth.bind(O)),I.interaction_enabled&&O.redrawEventRect(),_(),O.flowing=!1})}}}),L(K.prototype,{selected:function selected(t){var e=this.internal,n=[];return e.main.selectAll(".".concat(j.shapes+e.getTargetSelectorSuffix(t))).selectAll(".".concat(j.shape)).filter(function(){return Object(z.select)(this).classed(j.SELECTED)}).each(function(t){return n.push(t)}),n},select:function select(c,l,d){var u=this.internal,g=u.config;g.data_selection_enabled&&u.main.selectAll(".".concat(j.shapes)).selectAll(".".concat(j.shape)).each(function(t,e){var n=Object(z.select)(this),i=t.data?t.data.id:t.id,a=u.getToggle(this,t).bind(u),r=g.data_selection_grouped||!c||0<=c.indexOf(i),o=!l||0<=l.indexOf(e),s=n.classed(j.SELECTED);n.classed(j.line)||n.classed(j.area)||(r&&o?g.data_selection_isselectable(t)&&!s&&a(!0,n.classed(j.SELECTED,!0),t,e):G(d)&&d&&s&&a(!1,n.classed(j.SELECTED,!1),t,e))})},unselect:function unselect(c,l){var d=this.internal,u=d.config;u.data_selection_enabled&&d.main.selectAll(".".concat(j.shapes)).selectAll(".".concat(j.shape)).each(function(t,e){var n=Object(z.select)(this),i=t.data?t.data.id:t.id,a=d.getToggle(this,t).bind(d),r=u.data_selection_grouped||!c||0<=c.indexOf(i),o=!l||0<=l.indexOf(e),s=n.classed(j.SELECTED);n.classed(j.line)||n.classed(j.area)||r&&o&&u.data_selection_isselectable(t)&&s&&a(!1,n.classed(j.SELECTED,!1),t,e)})}}),L(K.prototype,{transform:function transform(t,e){var n=this.internal,i=0<=["pie","donut"].indexOf(t)?{withTransform:!0}:null;n.transformTo(e,t,i)}}),L($.prototype,{transformTo:function transformTo(t,e,n){var i=this,a=!i.hasArcType(),r=n||{withTransitionForAxis:a};r.withTransitionForTransform=!1,i.transiting=!1,i.setTargetType(t,e),i.updateTargets(i.data.targets),i.updateAndRedraw(r)}}),L(K.prototype,{groups:function groups(t){var e=this.internal,n=e.config;return O(t)||(n.data_groups=t,e.redraw()),n.data_groups}});var ft=function(t){var e=this.internal,n=e.config;return t&&(n.grid_x_lines=t,e.redrawWithoutRescale()),n.grid_x_lines};L(ft,{add:function add(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},remove:function remove(t){this.internal.removeGridLines(t,!0)}});var pt=function(t){var e=this.internal,n=e.config;return t&&(n.grid_y_lines=t,e.redrawWithoutRescale()),n.grid_y_lines};L(pt,{add:function add(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},remove:function remove(t){this.internal.removeGridLines(t,!1)}}),L(K.prototype,{xgrids:ft,ygrids:pt});var xt=function(t){var e=this.internal,n=e.config;return t?(n.regions=t,e.redrawWithoutRescale(),t):n.regions};L(xt,{add:function add(t){var e=this.internal,n=e.config;return t&&(n.regions=n.regions.concat(t),e.redrawWithoutRescale()),n.regions},remove:function remove(t){var e=this.internal,n=e.config,i=t||{},a=q(i,"duration",n.transition_duration),r=q(i,"classes",[j.region]),o=e.main.select(".".concat(j.regions)).selectAll(r.map(function(t){return".".concat(t)}));return(a?o.transition().duration(a):o).style("opacity","0").remove(),o=n.regions,Object.keys(i).length?(o=o.filter(function(t){var e=!1;return!t["class"]||(t["class"].split(" ").forEach(function(t){0<=r.indexOf(t)&&(e=!0)}),!e)}),n.regions=o):n.regions=[],o}}),L(K.prototype,{regions:xt});var mt=function(e){var t=this.internal.data.targets;return O(e)?t:t.filter(function(t){return 0<=e.indexOf(t.id)})};L(mt,{shown:function shown(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t){var n=!(1<arguments.length&&arguments[1]!==undefined)||arguments[1],i=null;if(t){var e=this.data(t);e&&H(e)&&(i=[],e.forEach(function(t){var e=t.values.map(function(t){return t.value});n?i=i.concat(e):i.push(e)}))}return i},names:function names(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},colors:function colors(t){return this.internal.updateDataAttributes("colors",t)},axes:function axes(t){return this.internal.updateDataAttributes("axes",t)},min:function min(){return this.internal.getMinMaxData().min},max:function max(){return this.internal.getMinMaxData().max}}),L(K.prototype,{data:mt}),L(K.prototype,{category:function category(t,e){var n=this.internal,i=n.config;return 1<arguments.length&&(i.axis_x_categories[t]=e,n.redraw()),i.axis_x_categories[t]},categories:function categories(t){var e=this.internal,n=e.config;return arguments.length&&(n.axis_x_categories=t,e.redraw()),n.axis_x_categories}}),L(K.prototype,{color:function color(t){return this.internal.color(t)}}),L(K.prototype,{x:function x(t){var e=this.internal,n=e.isCustomX()&&e.isCategorized();return H(t)&&(n?e.api.categories(t):(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),n?e.api.categories():e.data.xs},xs:function xs(t){var e=this.internal;return b(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}});var vt=function(t,e,n){var i=t.config,a="axis_x_".concat(e),r="axis_y_".concat(e),o="axis_y2_".concat(e);return G(n)&&(_(n)?(C(n.x)&&(i[a]=n.x),C(n.y)&&(i[r]=n.y),C(n.y2)&&(i[o]=n.y2)):(i[r]=n,i[o]=n),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),undefined},_t=function(t,e){var n=t.config,i="axis_x_".concat(e),a="axis_y_".concat(e),r="axis_y2_".concat(e);return{x:n[i],y:n[a],y2:n[r]}},yt=L(function(){},{labels:function labels(e){var n=this.internal;arguments.length&&(Object.keys(e).forEach(function(t){n.axis.setLabelText(t,e[t])}),n.axis.updateLabels())},min:function min(t){var e=this.internal;return arguments.length?vt(e,"min",t):_t(e,"min")},max:function max(t){var e=this.internal;return arguments.length?vt(e,"max",t):_t(e,"max")},range:function range(t){var e=this.axis;return arguments.length?(G(t.max)&&e.max(t.max),G(t.min)&&e.min(t.min),undefined):{max:e.max(),min:e.min()}}});L(K.prototype,{axis:yt});var bt=L(function(){},{show:function show(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function hide(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}});L(K.prototype,{legend:bt});var Tt=G(window)&&window.Math===Math?window:G(self)&&(self.Math===Math?self:Function("return this")());Tt.document;L(K.prototype,{resize:function resize(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},flush:function flush(t){var e=this.internal;e.zoomScale=null,t?e.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):e.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},destroy:function destroy(){var e=this,n=this.internal;return W(n)&&(n.charts.splice(n.charts.indexOf(this),1),G(n.resizeTimeout)&&Tt.clearTimeout(n.resizeTimeout),Tt.removeEventListener("resize",n.resizeFunction),n.selectChart.classed("bb",!1).html(""),Object.keys(this).forEach(function(t){"internal"===t&&Object.keys(n).forEach(function(t){n[t]=null}),e[t]=null,delete e[t]})),null},config:function config(t,e,n){var i,a=this.internal,r=t&&t.replace(/\./g,"_");return r in a.config&&(G(e)?(i=a.config[r]=e,n&&this.flush(!0)):i=a.config[r]),i}});var At=L(function(){},{show:function show(){var e,n,t=0<arguments.length&&arguments[0]!==undefined?arguments[0]:{},i=this.internal;t.mouse&&(n=t.mouse),t.data?e=i.isMultipleX()?(n=[i.x(t.data.x),i.getYScale(t.data.id)(t.data.value)],null):C(t.data.index)?t.data.index:i.getIndexByX(t.data.x):G(t.x)?e=i.getIndexByX(t.x):G(t.index)&&(e=t.index),("mouse"===i.inputType?["mouseover","mousemove"]:["touchstart"]).forEach(function(t){i.dispatchEvent(t,e,n)})},hide:function hide(){var t=this.internal;t.hideTooltip(),t.hideXGridFocus(),t.unexpandCircles(),t.unexpandBars()}});L(K.prototype,{tooltip:At});var wt=window.navigator.userAgent;L($.prototype,{isSafari:function isSafari(){return-1<wt.indexOf("Safari")&&!this.isChrome()},isChrome:function isChrome(){return-1<wt.indexOf("Chrome")},isMobile:function isMobile(){return-1<wt.indexOf("Mobi")}});var Lt=function(t){var n,e=t.getBoundingClientRect(),i=t.cloneNode(!0),a=U(document.styleSheets),r=(n=[],a.forEach(function(t){try{t.cssRules&&t.cssRules.length&&(n=n.concat(U(t.cssRules)))}catch(e){console.error("Error while reading rules from ".concat(t.href,": ").concat(e.toString()))}}),n).filter(function(t){return t.cssText}).map(function(t){return t.cssText});i.setAttribute("xmlns",z.namespaces.xhtml);var o=(new XMLSerializer).serializeToString(i),s='<svg xmlns="'.concat(z.namespaces.svg,'" width="').concat(e.width,'" height="').concat(e.height,'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t<style>').concat(r.join("\n"),"</style>\n\t\t\t\t").concat(o,"\n\t\t\t</foreignObject></svg>").replace(/#/g,"%23").replace("/\n/g","%0A");return"data:image/svg+xml;base64,".concat(btoa(encodeURIComponent(s).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x".concat(e))})))};L(K.prototype,{"export":function _export(){var n=0<arguments.length&&arguments[0]!==undefined?arguments[0]:"image/png",i=1<arguments.length?arguments[1]:undefined,t=Lt(this.element);if(k(i)){var a=new Image;a.crosssOrigin="Anonymous",a.onload=function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=a.width,t.height=a.height,e.drawImage(a,0,0),t.toBlob(function(t){i(window.URL.createObjectURL(t))},n)},a.src=t}return t}});n(25);n.d(e,"bb",function(){return St});var St={version:"1.6.2-nightly-20181121171023",generate:function generate(t){var e=new K(t);return e.internal.charts=this.instance,this.instance.push(e),e},instance:[],chart:{fn:K.prototype,internal:{fn:$.prototype,axis:{fn:P.prototype}}}};e["default"]=St}])});
//# sourceMappingURL=billboard.min.js.map